<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Permission is granted to copy, distribute and/or modify this
document under the terms of the GNU General Public License.
 -->
<!-- Created on August 29, 2019 by texi2html 5.0
texi2html was written by: 
            Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Many creative people.
Send bugs and suggestions to <texi2html-bug@nongnu.org>
-->
<head>
<title>Sherpa 2.2.8</title>

<meta name="description" content="Sherpa 2.2.8">
<meta name="keywords" content="Sherpa 2.2.8">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2html 5.0">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smalllisp {margin-left: 3.2em}
pre.display {font-family: serif}
pre.format {font-family: serif}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: serif; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: serif; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nocodebreak {white-space:pre}
span.nolinebreak {white-space:pre}
span.roman {font-family:serif; font-weight:normal}
span.sansserif {font-family:sans-serif; font-weight:normal}
ul.no-bullet {list-style: none}
body {
   padding: 0.0em;
}

a {
    color: #355f7c;
    text-decoration: none;
    font-weight: bold;
}

a:hover {
    text-decoration: underline;
}

p, dl, dd, ul, ol, table {
    text-align: justify;
    line-height: 130%;
   margin-left: 1.0em;
}

img {
   margin: 2.0em;
}

h1,
h2,
h3,
h4,
h5,
h6 {
    font-family: 'Trebuchet MS', sans-serif;
    background-color: #f2f2f2;
    font-weight: normal;
    color: #20435c;
    border-bottom: 1px solid #ccc;
    margin: 20px -20px 10px -20px;
    padding: 3px 0 3px 30px;
}

h1 { margin-top: 0; font-size: 200%; }
h2 { font-size: 160%; }
h3 { font-size: 140%; }
h4 { font-size: 120%; }
h5 { font-size: 110%; }
h6 { font-size: 100%; }

pre.verbatim, pre.example {
    font-family: monospace;
    padding: 5px;
    background-color: #eeffcc;
    color: #333333;
    line-height: 150%;
    border: 1px solid #ac9;
    border-left: none;
    border-right: none;
   margin-left: 1.0em;
}

code, samp, kbd {
    background-color: #eeffcc;
    color: #333333;
    border: none;
}

hr {
    display: none;
}

-->
</style>


</head>

<body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">

<h1>Sherpa Manual Version 2.2.8</h1>
<strong>The Sherpa Team, see <a href="http://sherpa.hepforge.org">http://sherpa.hepforge.org</a></strong><br>


<p>Permission is granted to copy, distribute and/or modify this
document under the terms of the GNU General Public License.
</p><hr>
<a name="Top"></a>
<a name="Sherpa-2_002e2_002e8-Manual"></a>
<h1 class="top">Sherpa 2.2.8 Manual</h1>




<img src="SherpaLogo.jpg" alt="Sherpa Logo">

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Introduction">1 Introduction</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">       What is Sherpa
<br>
</td></tr>
<tr><td align="left" valign="top"><a href="#Getting-started">2 Getting started</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">    A guide to getting started with Sherpa
<br>
</td></tr>
<tr><td align="left" valign="top"><a href="#Command-line">3 Command line options</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">       Sherpa&rsquo;s command line options
</td></tr>
<tr><td align="left" valign="top"><a href="#Input-structure">4 Input structure</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">    How to specify parameters for a Sherpa run
</td></tr>
<tr><td align="left" valign="top"><a href="#Parameters">5 Parameters</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         The complete list of parameters
<br>
</td></tr>
<tr><td align="left" valign="top"><a href="#Tips-and-Tricks">6 Tips and tricks</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">    Advanced usage tips
</td></tr>
<tr><td align="left" valign="top"><a href="#Scale-variations">7 A posteriori scale variations</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#Customization">8 Customization</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">      Extending Sherpa 
<br>
</td></tr>
<tr><td align="left" valign="top"><a href="#Examples">9 Examples</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Examples to illustrate some of Sherpa&rsquo;s features
<br>
</td></tr>
<tr><td align="left" valign="top"><a href="#Getting-help">10 Getting help</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">       What to do if you have questions about Sherpa
<br>
</td></tr>
<tr><td align="left" valign="top"><a href="#Authors">11 Authors</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            Authors of Sherpa 
</td></tr>
<tr><td align="left" valign="top"><a href="#Copying">12 Copying</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            Your rights and freedoms
<br>
</td></tr>
<tr><td align="left" valign="top"><a href="#References">Appendix A References</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         Bibliography
</td></tr>
<tr><td align="left" valign="top"><a href="#Index">Appendix B Index</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"></td></tr>
</table>
<br>








<hr size="6">
<a name="Introduction"></a>
<a name="Introduction-1"></a>
<h1 class="chapter">1 Introduction</h1>

<p>Sherpa  is a Monte Carlo event generator for the Simulation 
of High-Energy Reactions of PArticles in lepton-lepton, 
lepton-photon, photon-photon, lepton-hadron and hadron-hadron collisions. 
This document provides information to help users understand 
and apply Sherpa  for their physics studies. The event generator 
is introduced, in broad terms, and the installation and running 
of the program are outlined. The various options and parameters 
specifying the program are compiled, and their meanings are 
explained. This document does not aim at giving a
complete description of the physics content of Sherpa .
To this end, the authors refer the reader to the original publication, 
[<a href="#Gleisberg2008ta">Gle08b</a>].
</p>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Introduction-to-Sherpa">1.1 Introduction to Sherpa</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">      Intro
</td></tr>
<tr><td align="left" valign="top"><a href="#Basic-structure">1.2 Basic structure</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">             Descriptions of modules within Sherpa
</td></tr>
</table>


<hr>
<a name="Introduction-to-Sherpa"></a>
<a name="Introduction-to-Sherpa-1"></a>
<h2 class="section">1.1 Introduction to Sherpa</h2>

<p><a href="http://projects.hepforge.org/sherpa/">Sherpa</a>
[<a href="#Gleisberg2008ta">Gle08b</a>] is a Monte Carlo event generator that
provides complete hadronic final states in simulations of high-energy
particle collisions. The produced events may be passed into detector
simulations used by the various experiments.
The entire code has been written in C++, like its competitors 
<a href="http://projects.hepforge.org/herwig/">Herwig++</a> [<a href="#Bahr2008pv">Bah08b</a>] and 
<a href="http://home.thep.lu.se/~torbjorn/Pythia.html">Pythia 8</a> [<a href="#Sjostrand2007gs">Sjo07</a>].
</p>
<p>Sherpa  simulations can be achieved for the following types of
collisions:
</p><ul>
<li> for lepton&ndash;lepton collisions, as explored by the CERN LEP
  experiments,
</li><li> for lepton&ndash;photon collisions,
</li><li> for photon&ndash;photon collisions with both photons either resolved or
	unresolved,
</li><li> for deep-inelastic lepton-hadron scattering, as investigated
  by the HERA experiments at DESY, and,
</li><li> in particular, for hadronic interactions as studied at the
  Fermilab Tevatron or the CERN LHC.
</li></ul>


<p>The list of physics processes that can be simulated with Sherpa  covers all reactions 
in the Standard Model. Other models can be implemented either using Sherpa&rsquo;s 
own model syntax, or by using the generic interface [<a href="#Hoeche2014kca">Hoe14c</a>] to the UFO output 
[<a href="#Degrande2011ua">Deg11</a>] of <a href="https://feynrules.irmp.ucl.ac.be/">FeynRules</a> 
[<a href="#Christensen2008py">Chr08</a>],[<a href="#Christensen2009jx">Chr09</a>].
The 
Sherpa  program owes this versatility to the two inbuilt matrix-element generators, 
AMEGIC++ and <a href="http://comix.freacafe.de">Comix</a>,
and to it&rsquo;s phase-space generator Phasic [<a href="#Krauss2001iv">Kra01</a>], which automatically 
calculate and integrate tree-level amplitudes for the implemented models.  This 
feature enables Sherpa 
to be used as a cross-section integrator and parton-level 
event generator as well.  This aspect has been extensively tested, see e.g. 
[<a href="#Gleisberg2003bi">Gle03b</a>], [<a href="#Hagiwara2005wg">Hag05</a>].
</p>

<p>As a second key feature of 
Sherpa 
the program provides an implementation of the merging approaches of [<a href="#Hoeche2009rj">Hoe09</a>] and [<a href="#Gehrmann2012yg">Geh12</a>], [<a href="#Hoeche2012yf">Hoe12a</a>]. 
These algorithms yield improved descriptions of multijet production processes, 
which copiously appear at lepton-hadron colliders like HERA [<a href="#Carli2009cg">Car09</a>], 
or hadron-hadron colliders like the Tevatron and the LHC, [<a href="#Krauss2004bs">Kra04</a>], 
[<a href="#Krauss2005nu">Kra05</a>], [<a href="#Gleisberg2005qq">Gle05</a>], [<a href="#Hoeche2009xc">Hoe09a</a>]. 
An older approach, implemented in previous versions of Sherpa and known
as the CKKW technique [<a href="#Catani2001cc">Cat01a</a>], [<a href="#Krauss2002up">Kra02</a>],
has been compared in great detail in [<a href="#Alwall2007fs">Alw07</a>] with other approaches, such 
as the MLM merging prescription [<a href="#Mangano2001xp">Man01</a>] as implemented in 
Alpgen [<a href="#Mangano2002ea">Man02</a>], Madevent [<a href="#Stelzer1994ta">Ste94</a>], [<a href="#Maltoni2002qb">Mal02a</a>], 
or Helac [<a href="#Kanaki2000ey">Kan00</a>], [<a href="#Papadopoulos2005ky">Pap05</a>] and the CKKW-L prescription 
[<a href="#Lonnblad2001iq">Lon01</a>], [<a href="#Lavesson2005xu">Lav05</a>] of Ariadne [<a href="#Lonnblad1992tz">Lon92</a>]. 
</p>

<p>This manual contains all information necessary to get started with 
Sherpa  as quickly as possible. It lists options and switches of interest
for steering the simulation of various physics aspects of the collision. 
It does not describe the physics simulated by Sherpa or the underlying 
structure of the program.
Many external codes can be linked with Sherpa. This manual explains how
to do this, but it does not contain a description of the external programs. 
You are encouraged to read their corresponding documentations, which are
referenced in the text. If you use external programs with Sherpa, 
you are encouraged to cite them accordingly. 
</p>
<p>The <a href="http://www.montecarlonet.org/index.php?p=Publications/Guidelines">MCnet Guidelines</a> apply to Sherpa. You are kindly asked to cite 
[<a href="#Gleisberg2008ta">Gle08b</a>] if you have used the program in your work.  
</p>
<p>The Sherpa  authors strongly recommend the study of the manuals and many excellent 
publications on different aspects of event generation and physics at 
collider experiments written by other event generator authors.
</p>

<p>This manual is organized as follows: in <a href="#Basic-structure">Basic structure</a>
the modular structure intrinsic to 
Sherpa  is introduced. <a href="#Getting-started">Getting started</a> contains information about and
instructions for the installation of the package. There is also
a description of the steps that are
needed to run Sherpa  and generate events. 
The <a href="#Input-structure">Input structure</a> is then discussed, and the ways in which 
Sherpa can be steered are explained.
All parameters and options are discussed in <a href="#Parameters">Parameters</a>.
Advanced <a href="#Tips-and-Tricks">Tips and tricks</a> are detailed, and some options for
<a href="#Customization">Customization</a> are outlined for those more 
familiar with Sherpa.
There is also a short description of the different <a href="#Examples">Examples</a> 
provided with Sherpa.
</p>

<p>The construction of Monte Carlo programs
requires several assumptions, approximations and
simplifications of complicated physics aspects. The results of event
generators should therefore always be verified and cross-checked 
with results obtained by other programs, and they should be interpreted 
with care and common sense.
</p>







<hr>
<a name="Basic-structure"></a>
<a name="Basic-structure-1"></a>
<h2 class="section">1.2 Basic structure</h2>

<p>Sherpa  is a modular program. This reflects the paradigm of Monte Carlo 
event generation, with the full simulation is split into well defined 
event phases, based on QCD factorization theorems. Accordingly, each
module encapsulates a different aspect of event generation for
high-energy particle reactions. It resides within its own namespace
and is located in its own subdirectory of the same name. The main
module called <code>SHERPA</code> steers the interplay of all modules &ndash; or
phases &ndash; and the actual generation of the events.
Altogether, the following modules are currently distributed with the
Sherpa  framework:
</p>
<ul>
<li> ATOOLS
         
<p>This is the toolbox for all other modules. Since the 
Sherpa  framework does not rely on CLHEP etc., the ATOOLS contain classes 
with mathematical tools like vectors and matrices, organization tools 
such as read-in or write-out devices, and physics tools like particle 
data or classes for the event record.
</p>
</li><li> METOOLS

<p>In this module some general methods for the evaluation of helicity
amplitudes have been accumulated.  They are used in 
AMEGIC++ 
, the
EXTRA_XS module, and the new matrix-element generator Comix.
This module also contains
helicity amplitudes for some generic matrix elements, that are, e.g.,
used by
HADRONS++
. Further, METOOLS also contains a simple library of tensor integrals
which are used in the
PHOTONS++
matrix element corrections.
</p>
</li><li> BEAM

<p>This module manages the treatment of the initial beam spectra for 
different colliders. The three options which are currently available
include a monochromatic beam, which requires no extra treatment,
photon emission in the Equivalent Photon Approximation (EPA)
and - for the case of an electron collider - laser
backscattering off the electrons, leading to photonic initial states.
</p>
</li><li> PDF 

<p>The PDF module provides access to various parton density functions (PDFs)
for the proton and the photon. In addition, it hosts an interface to the 
<a href="http://projects.hepforge.org/lhapdf">LHAPDF</a> package,
which makes a full wealth of PDFs available. An 
(analytical) electron structure function is supplied in the PDF module 
as well.   
</p>	
</li><li> MODEL

<p>This module sets up the physics model for the simulation.
It initializes particle properties, basic physics parameters 
(coupling constants, mixing angles, etc.) and the set of available interaction
vertices (Feynman rules). By now, there exist explicit implementations of the 
Standard Model (SM), its Minimal Supersymmetric extension (MSSM), the ADD model
of large extra dimensions, and a comprehensive set of operators parametrizing 
anomalous triple and quartic electroweak gauge boson couplings. An Interface to
<a href="http://feynrules.irmp.ucl.ac.be/">FeynRules</a> is also available.
</p>
</li><li> EXTRA_XS

<p>In this module a (limited) collection of analytic expressions
for simple 2-&gt;2 processes within the SM are provided
together with classes embedding them into the Sherpa 
framework. This also includes methods used for the definition
of the starting conditions for parton-shower evolution, 
such as colour connections and the hard scale of the process.
</p>
</li><li> AMEGIC++

<p>AMEGIC++  [<a href="#Krauss2001iv">Kra01</a>] is Sherpa &rsquo;s original matrix-element
generator. It employs the method of helicity amplitudes
[<a href="#Kleiss1985yh">Kle85</a>], [<a href="#Ballestrero1992dv">Bal92</a>] and works as
a generator, which generates generators:  
During the initialization run the matrix elements for a given set of
processes, as well as their 
specific phase-space mappings are created by AMEGIC++ .
Corresponding C++ sourcecode is written to disk and compiled
by the user using the <kbd>makelibs</kbd> script or
<a href="http://www.scons.org/">scons</a>.
The produced libraries are linked to the main program
automatically in the next run and used to calculate cross
sections and to generate weighted or unweighted events.
AMEGIC++  has been tested for multi-particle production in the Standard 
Model [<a href="#Gleisberg2003bi">Gle03b</a>]. Its MSSM implementation has been
validated in [<a href="#Hagiwara2005wg">Hag05</a>]. 
</p>
</li><li> COMIX

<p><a href="http://comix.freacafe.de">Comix</a> is a multi-leg tree-level matrix element generator, based on 
the color dressed Berends-Giele recursive relations [<a href="#Duhr2006iq">Duh06</a>].
It employs a new algorithm to recursively compute phase-space weights.
The module is a useful supplement to older matrix element generators like AMEGIC++ 
in the high multiplicity regime. Due to the usage of colour sampling it is 
particularly suited for an interface with parton shower simulations and can hence be
easily employed for the ME-PS merging within Sherpa. It is Sherpa&rsquo;s default
large multiplicity matrix element generator for the Standard Model.
</p>

</li><li> PHASIC++

<p>All base classes dealing with the Monte Carlo phase-space
integration are located in this module. For the evaluation of the
initial-state (laser backscattering, initial-state radiation)
and final-state integrals, the adaptive multi-channel method
of [<a href="#Kleiss1994qy">Kle94</a>], [<a href="#Berends1994pv">Ber94</a>] is used by default together
with a Vegas optimization [<a href="#Lepage1980dq">Lep80</a>] of the single
channels. In addition, final-state integration accomplished
by Rambo [<a href="#Kleiss1985gy">Kle85a</a>], Sarge
[<a href="#Draggiotis2000gm">Dra00</a>] and HAAG [<a href="#vanHameren2002tc">Ham02</a>] is supported.
</p>        
</li><li> CSSHOWER++ 

<p>This is the module hosting Sherpa&rsquo;s default parton shower,
which was published in [<a href="#Schumann2007mg">Sch07a</a>]. 
The corresponding shower model was originally proposed in 
[<a href="#Nagy2005aa">Nag05</a>], [<a href="#Nagy2006kb">Nag06</a>].
It relies on the factorisation of real-emission matrix elements in the 
CS subtraction framework [<a href="#Catani1996vz">Cat96b</a>], [<a href="#Catani2002hc">Cat02</a>]. 
There exist four general types of CS dipole terms that capture the complete
infrared singularity structure of next-to-leading order QCD amplitudes.
In the large-N_C limit, the corresponding splitter and spectator partons
are always adjacent in colour space. The dipole functions for the
various cases, taken in four dimensions and averaged over spins,
are used as shower splitting kernels.
</p>
</li><li> DIRE 

<p>This is the module hosting Sherpa&rsquo;s alternative parton shower [<a href="#Hoche2015sya">Hoe15</a>].
In the Dire model, the ordering variable exhibits a symmetry in emitter and 
spectator momenta, such that the dipole-like picture of the evolution 
can be re-interpreted as a dipole picture in the soft limit. At the same time, 
the splitting functions are regularized in the soft anti-collinear region 
using partial fractioning of the soft eikonal in the Catani-Seymour approach 
[<a href="#Catani1996vz">Cat96b</a>], [<a href="#Catani2002hc">Cat02</a>]. They are then modified to satisfy
the sum rules in the collinear limit. This leads to an invariant formulation 
of the parton-shower algorithm, which is in complete analogy to the standard 
DGLAP case, but generates the correct soft anomalous dimension at one-loop order.
</p>
</li><li> AMISIC++ 

<p>AMISIC++ contains classes for the simulation of multiple parton
interactions according to [<a href="#Sjostrand1987su">Sjo87</a>]. In Sherpa  the
treatment of multiple interactions has been extended by allowing for
the simultaneous evolution of an independent parton shower in each
of the subsequent (semi-)hard collisions. The beam&ndash;beam remnants
are organized such that partons which are adjacent in colour space
are also adjacent in momentum space. The corresponding classes for
beam remnant handling reside in the PDF and SHERPA modules.
</p>  
</li><li> AHADIC++

<p>AHADIC++ is Sherpa &rsquo;s hadronization package, for translating
the partons (quarks and gluons) into primordial hadrons, to be
further decayed in HADRONS++.  The algorithm bases on the cluster
fragmentation ideas presented in [<a href="#Gottschalk1982yt">Got82</a>], 
[<a href="#Gottschalk1983fm">Got83</a>], [<a href="#Webber1983if">Web83</a>], [<a href="#Gottschalk1986bv">Got86</a>] 
and implemented in the Herwig family of event generators.  The actual
Sherpa  implementation, based on [<a href="#Winter2003tt">Win03</a>], 
differs from the original model in several respects.
</p>  
</li><li> HADRONS++ 

<p>HADRONS++ is the module for simulating hadron and tau-lepton decays.
The resulting decay products respect full spin correlations (if desired).
Several matrix elements and form-factor models have been implemented,
such as the K&uuml;hn-Santamar&iacute;a model, form-factor parametrizations
from Resonance Chiral Theory for the tau and form factors from
heavy	quark effective theory or light cone sum rules for hadron decays.
</p>
</li><li> PHOTONS++ 

<p>The PHOTONS++ module holds routines to add QED radiation to
hadron and tau-lepton decays. This has been achieved by an
implementation of the YFS algorithm [<a href="#Yennie1961ad">Yen61</a>]. The
structure of PHOTONS++ is such that the formalism can be extended to
scattering processes and to a systematic improvement to higher
orders of perturbation theory [<a href="#Schonherr2008av">Sch08</a>].  The application
of PHOTONS++ therefore accounts for corrections that usually are
added by the application of PHOTOS [<a href="#Barberio1993qi">Bar93</a>] to the
final state.
</p> 
</li><li> SHERPA

<p>Finally, SHERPA is the steering module that initializes,
controls and evaluates the different phases during the entire
process of event generation.
All routines for the combination of truncated showers and 
matrix elements, which are independent of the specific 
matrix element and parton shower generator are found in this module. 
</p></li></ul>

<p>The actual executable of the 
Sherpa  generator can be found in the
subdirectory <code>&lt;prefix&gt;/bin/</code> and is
called <code>Sherpa</code>. To run the program, input files have to be
provided in the current working directory or elsewhere by specifying
the corresponding path, see <a href="#Input-structure">Input structure</a>. All output files are then written to this
directory as well.
</p><hr>
<a name="Getting-started"></a>
<a name="Getting-started-1"></a>
<h1 class="chapter">2 Getting started</h1>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Installation">2.1 Installation</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                           How to install Sherpa
</td></tr>
<tr><td align="left" valign="top"><a href="#Running-Sherpa">2.2 Running Sherpa</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                         How to run the event generator
</td></tr>
<tr><td align="left" valign="top"><a href="#Cross-section-determination">2.3 Cross section determination</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            How cross sections are determined
</td></tr>
</table>

<hr>
<a name="Installation"></a>
<a name="Installation-1"></a>
<h2 class="section">2.1 Installation</h2>

<p>Sherpa is distributed as a tarred and gzipped file named
<code>SHERPA-MC-2.2.8.tar.gz</code>, and can be unpacked in the current
working directory with
</p>
<div class="example">
<pre class="example"><code> tar -zxf SHERPA-MC-2.2.8.tar.gz</code>
</pre></div>

<p>Alternatively, it can also be accessed via Git through the location specified
on the download page. In that case, before continuing, it is necessary to
construct the build scripts by running <code>autoreconf -i</code> once after cloning
the Git repo.
</p>
<p>To guarantee successful installation, the following tools should be
available on the system:
</p><ul>
<li> C++ and Fortran compilers (e.g. from the gcc suite)
  </li><li> make
  </li><li> <a href="http://www.sqlite.org/">SQLite 3</a> 
    (including the -dev package if installed through a package manager)
</li></ul>
<p>If SQLite is installed in a non-standard location, please specify
the installation path using option &lsquo;<samp>--with-sqlite3=/path/to/sqlite</samp>&rsquo;.
If SQLite is not installed on your system, the Sherpa configure script provides 
the fallback option of installing it into the same directory as Sherpa itself.
To do so, please run configure with option &lsquo;<samp>--with-sqlite3=install</samp>&rsquo;
(This may not work if you are cross-compiling using &lsquo;<samp>--host</samp>&rsquo;. 
In this case, please <a href="http://www.sqlite.org/download.html">install SQLite</a>
by yourself and reconfigure using &lsquo;<samp>--with-sqlite3=/path/to/sqlite</samp>&rsquo;).
</p>
<p>Compilation and installation proceed through the following commands:
</p>
<div class="example">
<pre class="example"><code> ./configure</code>

<code> make install</code>
</pre></div>

<p>If not specified differently, the directory structure after installation is organized as follows 
</p>
<dl compact="compact">
<dt><code>$(prefix)/bin</code></dt>
<dd><p>Sherpa executeable and scripts
</p>
</dd>
<dt><code>$(prefix)/include</code></dt>
<dd><p>headers for process library compilation
</p>
</dd>
<dt><code>$(prefix)/lib</code></dt>
<dd><p>basic libraries
</p>
</dd>
<dt><code>$(prefix)/share</code></dt>
<dd><p>PDFs, Decaydata, fallback run cards
</p></dd>
</dl>

<p>The installation directory <code>$(prefix)</code> can be specified by using the
<code>./configure --prefix /path/to/installation/target</code> directive and defaults
to the current working directory.
</p>
<p>If Sherpa has to be moved to a different directory after the installation,
one has to set the following environment variables for each run:
</p><ul>
<li> <code>SHERPA_INCLUDE_PATH=$newprefix/include/SHERPA-MC</code>
  </li><li> <code>SHERPA_SHARE_PATH=$newprefix/share/SHERPA-MC</code>
  </li><li> <code>SHERPA_LIBRARY_PATH=$newprefix/lib/SHERPA-MC</code>
  </li><li> <code>LD_LIBRARY_PATH=$SHERPA_LIBRARY_PATH:$LD_LIBRARY_PATH</code>
</li></ul>

<p>Sherpa can be interfaced with various external packages, e.g. <a href="http://lcgapp.cern.ch/project/simu/HepMC/">HepMC</a>,
for event output, or <a href="https://lhapdf.hepforge.org/">LHAPDF</a>, for PDFs. For this to work, the user has
to pass the appropriate commands to the configure step. This is achieved 
as shown below:
</p>
<div class="example">
<pre class="example"><code>./configure --enable-hepmc2=/path/to/hepmc2 --enable-lhapdf=/path/to/lhapdf</code>
</pre></div>

<p>Here, the paths have to point to the top level installation directories of
the external packages, i.e. the ones containing the <code>lib/</code>, <code>share/</code>,
... subdirectories.
</p>
<p>For a complete list of possible configuration options run
&lsquo;<samp>./configure --help</samp>&rsquo;.
</p>

<p>The Sherpa package has successfully been compiled, installed and
tested on SuSE, RedHat / Scientific Linux and Debian / Ubuntu Linux systems 
using the GNU C++ compiler versions 3.2, 3.3, 3.4, and 4.x as
well as on Mac OS X 10 using the GNU C++ compiler version 4.0. In all cases the 
GNU FORTRAN compiler g77 or gfortran has been employed.
</p>
<p>If you have multiple compilers installed on your system, you can use shell 
environment variables to specify which of these are to be used. A list of 
the available variables is printed with
</p><div class="example">
<pre class="example"><code>./configure --help</code>
</pre></div>
<p>in the Sherpa top level directory and looking at the last lines. Depending 
on the shell you are using, you can set these variables e.g. with export 
(bash) or setenv (csh).
Examples:
</p><div class="example">
<pre class="example"><code>export CXX=g++-3.4
export CC=gcc-3.4
export CPP=cpp-3.4</code>
</pre></div>

<a name="Installation-on-Cray-XE6-_002f-XK7"></a>
<h4 class="subsubheading">Installation on Cray XE6 / XK7</h4>

<p>Sherpa has been installed successfully on Cray XE6 and Cray XK7.
The following configure command should be used
</p><div class="example">
<pre class="example">./configure &lt;your options&gt; --enable-mpi --host=i686-pc-linux CC=CC CXX=CC FC='ftn -fPIC' LDFLAGS=-dynamic
</pre></div>
<p>Sherpa can then be run with
</p><div class="example">
<pre class="example">aprun -n &lt;nofcores&gt; &lt;prefix&gt;/bin/Sherpa -lrun.log
</pre></div>
<p>The modularity of the code requires setting the environment variable &lsquo;<samp>CRAY_ROOTFS</samp>&rsquo;, 
cf. the Cray system documentation.
</p>
<a name="Installation-on-IBM-BlueGene_002fQ"></a>
<h4 class="subsubheading">Installation on IBM BlueGene/Q</h4>

<p>Sherpa has been installed successfully on an IBM BlueGene/Q system. 
The following configure command should be used
</p><div class="example">
<pre class="example">./configure &lt;your options&gt; --enable-mpi --host=powerpc64-bgq-linux CC=mpic++ CXX=mpic++ FC='mpif90 -fPIC -funderscoring' LDFLAGS=-dynamic
</pre></div>
<p>Sherpa can then be run with
</p><div class="example">
<pre class="example">qsub -A &lt;account&gt; -n &lt;nofcores&gt; -t 60 --mode c16 &lt;prefix&gt;/bin/Sherpa -lrun.log
</pre></div>

<a name="MacOS-Installation"></a>
<h4 class="subsubheading">MacOS Installation</h4>

<p>Since it is more complicated to set up the necessary compiler environment
on a Mac we recommend using a package manager to install Sherpa and its
dependencies. David Hall is hosting a repository for Homebrew packages at:
<a href="http://davidchall.github.io/homebrew-hep/">http://davidchall.github.io/homebrew-hep/</a>
</p>

<p>In case you are compiling yourself, please be aware of
the following issues which have come up on Mac installations before:
</p><ul>
<li> On 10.4 and 10.5 only gfortran is supported, and you will 
have to install it e.g. from HPC
</li><li> If you want to reconfigure, i.e. run the command <code>autoreconf</code> 
or <code>(g)libtoolize</code>, you have to make sure that you have a recent version 
of GNU libtool (&gt;=1.5.22 has been tested). Don’t confuse this with 
the native non-GNU libtool which is installed in <code>/usr/bin/libtool</code> and 
of no use! Also make sure that your autools (autoconf &gt;= 2.61, 
automake &gt;= 1.10 have been tested) are of recent versions. All this should 
not be necessary though, if you only run <code>configure</code>.
</li><li> Make sure that you don’t have two versions of g++ and libstdc++ 
installed and being used inconsistently. This appeared e.g. when the gcc 
suite was installed through Fink to get gfortran. This caused Sherpa to 
use the native MacOS compilers but link the libstdc++ from Fink (which 
is located in /sw/lib). You can find out which libraries are used by Sherpa 
by running <code>otool -L bin/Sherpa</code>
</li></ul>


<hr>
<a name="Running-Sherpa"></a>
<a name="Running-Sherpa-1"></a>
<h2 class="section">2.2 Running Sherpa</h2>


<p>The <code>Sherpa</code> executable resides in the directory <code>&lt;prefix&gt;/bin/</code>
where <code>&lt;prefix&gt;</code> denotes the path to the Sherpa installation
directory. The way a particular simulation will be accomplished is
defined by several parameters, which can all be listed in a
common file, or data card (Parameters can be
alternatively specified on the command line; more details are given
in <a href="#Input-structure">Input structure</a>). 
This steering file is called <code>Run.dat</code> and some example setups
(i.e. <code>Run.dat</code> files) are distributed with the current version
of Sherpa. They can be found in the directory 
<code>&lt;prefix&gt;/share/SHERPA-MC/Examples/</code>, and descriptions of some of 
their key features can be found in the section <a href="#Examples">Examples</a>.
</p>
<p><strong>Please note:</strong> It is not in general possible to reuse run 
cards from previous Sherpa versions. Often there are small changes 
in the parameter syntax of the run cards from 
one version to the next. 
These changes are documented in our manuals. In addition, 
always use the newer Hadron.dat and Decaydata directories 
(and reapply any changes which you might have applied to the old ones),
see <a href="#Hadron-decays">Hadron decays</a>.
</p> 
<p>The very first step in running Sherpa 
is therefore to adjust all parameters to the needs of the
desired simulation. The details for doing this properly are given in
<a href="#Parameters">Parameters</a>. In this section, the focus is on the main
issues for a successful operation of Sherpa. This is illustrated by
discussing and referring to the parameter settings that come in the run card 
<code>./Examples/V_plus_Jets/LHC_ZJets/Run.dat</code>, cf. <a href="#LHC_005fZJets">Z+jets production</a>.
This is a simple run card
created to show the basics of how to operate Sherpa. <strong>It should be 
stressed that this run-card relies on many of Sherpa&rsquo;s default settings,
and, as such, you should understand those settings before using it to 
look at physics.</strong> For more information on the settings and parameters in 
Sherpa, see <a href="#Parameters">Parameters</a>, and for more 
examples see the <a href="#Examples">Examples</a> section.
</p>
<p><a name="Process-selection-and-initialization"></a>
</p><hr>
<a name="Process-selection-and-initialization-1"></a>
<h3 class="subsection">2.2.1 Process selection and initialization</h3>

<p>Central to any Monte Carlo simulation is the choice of the hard
processes that initiate the events. These hard processes are
described by matrix elements. In Sherpa,
the selection of processes happens in the <code>(processes)</code>
part of the steering file.
Only a few 
2-&gt;2 
reactions have been hard-coded. They are available in the EXTRA_XS module.
The more usual way to compute matrix elements is to employ one of Sherpa&rsquo;s
automated tree-level generators, AMEGIC++ and Comix, see <a href="#Basic-structure">Basic structure</a>.
If no matrix-element generator is selected, using the <a href="#ME_005fSIGNAL_005fGENERATOR">ME_SIGNAL_GENERATOR</a>
tag, then Sherpa will use whichever generator is capable of calculating the 
process, checking Comix first, then AMEGIC++ and then EXTRA_XS. Therefore, 
for some processes, several of the options are used. In this example, 
however, all processes will be calculated by Comix.
</p>
<p>To begin with the example, the Sherpa run has to be started by changing
into the <code>&lt;prefix&gt;/share/SHERPA-MC/Examples/V_plus_Jets/LHC_ZJets/</code>
directory and executing
</p>
<div class="example">
<pre class="example"><code>&lt;prefix&gt;/bin/Sherpa</code> 
</pre></div>

<p>You may also run from an arbitrary directory, employing
<code>&lt;prefix&gt;/bin/Sherpa PATH=&lt;prefix&gt;/share/SHERPA-MC/Examples/V_plus_Jets/LHC_ZJets</code>. 
In the example, the keyword <code>PATH</code> is specified by an absolute path. 
It may also be specified relative to the current working directory. If it is
not specified at all or it is omitted, the current working directory
is understood.
</p>
<p>For good book-keeping, it is highly recommended to reserve different
subdirectories for different simulations as is demonstrated with
the example setups. 
</p>
<p>If AMEGIC++ is used, Sherpa requires an initialization run, where 
C++ source code is written to disk. This code must be compiled into dynamic libraries 
by the user by running the <code>makelibs</code> script in the working directory.
Alternatively, if <a href="http://www.scons.org/">scons</a> is installed,
you may invoke <kbd>&lt;prefix&gt;/bin/make2scons</kbd> and run <kbd>scons install</kbd>.
After this step Sherpa is run again for the actual cross section integrations and event generation.
For more information on and examples of how to run Sherpa using AMEGIC++, see 
<a href="#Running-Sherpa-with-AMEGIC_002b_002b">Running Sherpa with AMEGIC++</a>.
</p>
<p>If the internal hard-coded matrix elements or Comix are used,
and AMEGIC++ is not, an initialization run is not needed, and Sherpa will 
calculate the cross sections and generate events during the first run.
</p>
<p>As the cross sections are integrated, the
integration over phase space is optimized to arrive at an
efficient event generation.
Subsequently events are generated if <code>EVENTS</code> was specified
either on the command line or added to the <code>(run)</code> section
in the <code>Run.dat</code> file. 
</p>
<p>The generated events are not stored into a file by
default; for details on how to store the events see 
<a href="#Event-output-formats">Event output formats</a>. Note that the computational effort to
go through this procedure of generating, compiling and integrating the
matrix elements of the hard processes depends on the complexity of the
parton-level final states. For low multiplicities (
2-&gt;2,3,4 
), of course, it can be followed instantly.
</p>
<p><a name="Results-directory"></a>
Usually more than one generation run is wanted. As long as the
parameters that affect the matrix-element integration are not changed,
it is advantageous to store the cross sections obtained during the
generation run for later use. This saves CPU time especially for large
final-state multiplicities of the matrix elements. Per default, Sherpa 
stores these integration results in a directory called <code>Results/</code>.
The name of the output directory can be customised via 
</p>
<div class="example">
<pre class="example"><code>&lt;prefix&gt;/bin/Sherpa RESULT_DIRECTORY=&lt;result&gt;/</code>
</pre></div>

<p>see <a href="#RESULT_005fDIRECTORY">RESULT_DIRECTORY</a>. The storage of the integration results can 
be prevented by either using 
</p>
<div class="example">
<pre class="example"><code>&lt;prefix&gt;/bin/Sherpa GENERATE_RESULT_DIRECTORY=0</code>
</pre></div>

<p>or the command line option &lsquo;<samp>-g</samp>&rsquo; can be invoked, see <a href="#Command-line">Command line options</a>. 
</p>

<p>If physics parameters change, the cross sections have to be recomputed. 
The new results should either be stored in a new directory or the 
<code>&lt;result&gt;</code> directory may be re-used once it has been emptied.
Parameters which require a recomputation are any parameters affecting 
the <a href="#Models">Models</a>, <a href="#Matrix-Elements">Matrix elements</a> or <a href="#Selectors">Selectors</a>.
Standard examples are changing the magnitude of couplings,
renormalisation or factorisation scales, changing the PDF or
centre-of-mass energy, or, applying different cuts at the parton
level. If unsure whether a recomputation is required, a simple
test is to remove the
<code>RESULT_DIRECTORY</code> option from the run command and check
whether the new integration numbers (statistically) comply with the
stored ones.
</p>
<p>A warning on the validity of the
process libraries is in order here: it is absolutely mandatory to
generate new library files, whenever the physics model is altered,
i.e. particles are added or removed and hence new or existing
diagrams may or may not anymore contribute to the same final states.
Also, when particle masses are switched on or off, new library files
must be generated (however, masses may be changed between non-zero
values keeping the same process libraries). The best recipe is to 
create a new and separate setup directory in such cases. Otherwise the 
<code>Process</code> and <code>Results</code> directories have to be erased:
</p>
<div class="example">
<pre class="example"><code>rm -rf Process/ Results/</code>
</pre></div>

<p>In either case one has to start over with the whole initialization 
procedure to prepare for the generation of events.
</p>


<hr>
<a name="The-example-set_002dup_003a-Z_002bJets-at-the-LHC"></a>
<h3 class="subsection">2.2.2 The example set-up: Z+Jets at the LHC</h3>

<p>The setup file ( <code>Run.dat</code> ) provided in <code>./Examples/V_plus_Jets/LHC_ZJets/</code> 
can be considered as a standard example to illustrate the generation of fully hadronised 
events in Sherpa, cf. <a href="#LHC_005fZJets">Z+jets production</a>. Such events will include effects from
parton showering, hadronisation into primary hadrons and their subsequent 
decays into stable hadrons. Moreover, the example chosen here nicely 
demonstrates how Sherpa is used in the context of merging matrix elements 
and parton showers [<a href="#Hoeche2009rj">Hoe09</a>]. In addition to the aforementioned 
corrections, this simulation of inclusive Drell-Yan production 
(electron-positron channel) will then include higher-order jet corrections
at the tree level. As a result the transverse-momentum distribution of
the Drell-Yan pair and the individual jet multiplicities as measured by the 
ATLAS and CMS collaborations at the LHC can be well described.
</p>
<p>Before event generation, the initialization procedure as described in
<a href="#Process-selection-and-initialization">Process selection and initialization</a> has to be completed. The matrix-element processes
included in the setup are the following:
</p><div class="example">
<pre class="example">  proton proton -&gt; parton parton -&gt; electron positron + up to four partons
</pre></div>

<p>In the <code>(processes)</code> part of the steering file this translates into
</p><pre class="verbatim">  Process 93 93 -&gt; 11 -11 93{4}
  Order (*,2);
  CKKW sqr(30/E_CMS)
  End process;
</pre><p>The physics model for these processes is the Standard Model (&lsquo;<samp>SM</samp>&rsquo;) 
which is the default setting of the parameter <code>MODEL</code> and is therefore 
not set explicitly. Fixing the order of electroweak couplings to &lsquo;<samp>2</samp>&rsquo;, 
matrix elements of all partonic subprocesses for Drell-Yan production without 
any and with up to two extra QCD parton emissions will be generated.
Proton&ndash;proton collisions are considered at beam energies of 3.5 TeV. 
The default PDF used by Sherpa is CT10. Model parameters and couplings can 
be set in section <code>(run)</code> of <code>Run.dat</code>. Similarly, the way 
couplings are treated can be defined. As no options are set the default 
parameters and scale setting procedures are used. 
</p>
<p>The QCD radiation matrix elements have to be
regularised to obtain meaningful cross sections. This is achieved by
specifying &lsquo;<samp>CKKW sqr(30/E_CMS)</samp>&rsquo; in the <code>(processes)</code> part of
<code>Run.dat</code>. Simultaneously, this tag initiates the ME-PS merging procedure.
To eventually obtain fully hadronized events, the <code>FRAGMENTATION</code> tag
has been left on it&rsquo;s default setting &lsquo;<samp>Ahadic</samp>&rsquo; (and therefore been 
omitted from the run card), which will run Sherpa&rsquo;s cluster hadronisation, 
and the tag <code>DECAYMODEL</code> has it&rsquo;s default setting &lsquo;<samp>Hadrons</samp>&rsquo;, 
which will run Sherpa&rsquo;s hadron decays. Additionally corrections owing to 
photon emissions are taken into account.
</p>
<p>To run this example set-up, use the 
</p><div class="example">
<pre class="example"><code>&lt;prefix&gt;/bin/Sherpa</code> 
</pre></div>
<p>command as descibed in <a href="#Running-Sherpa">Running Sherpa</a>. Sherpa displays some output 
as it runs. At the start of the run, Sherpa initializes the relevant model, 
and displays a table of particles, with their <a href="#PDG-codes">PDG codes</a> and some 
properties. It also displays the <a href="#Particle-containers">Particle containers</a>, and their 
contents. The other relevant parts of Sherpa are initialized, including 
the matrix element generator(s). The Sherpa output will look like:
</p>
<div class="smallformat">
<pre class="verbatim">Initialized the beams Monochromatic*Monochromatic
PDF set 'ct10' loaded for beam 1 (P+).
PDF set 'ct10' loaded for beam 2 (P+).
Initialized the ISR: (SF)*(SF)
Initialize the Standard Model from  / Model.dat
One_Running_AlphaS::One_Running_AlphaS() {
  Setting \alpha_s according to PDF
  perturbative order 1
  \alpha_s(M_Z) = 0.118
}
One_Running_AlphaS::One_Running_AlphaS() {
  Setting \alpha_s according to PDF
  perturbative order 1
  \alpha_s(M_Z) = 0.118
}
Initialized the Soft_Collision_Handler.
Init shower for 1.
CS_Shower::CS_Shower(): Set core m_T mode 0
Shower::Shower(asfacs: IS = 0.73, FS = 1.38)
Init shower for 2.
CS_Shower::CS_Shower(): Set core m_T mode 0
Shower::Shower(asfacs: IS = 0.73, FS = 1.38)
Initialized the Shower_Handler.
+----------------------------------+
|                                  |
|      CCC  OOO  M   M I X   X     |
|     C    O   O MM MM I  X X      |
|     C    O   O M M M I   X       |
|     C    O   O M   M I  X X      |
|      CCC  OOO  M   M I X   X     |
|                                  |
+==================================+
|  Color dressed  Matrix Elements  |
|     http://comix.freacafe.de     |
|   please cite  JHEP12(2008)039   |
+----------------------------------+
Matrix_Element_Handler::BuildProcesses(): Looking for processes . done ( 23252 kB, 0s ).
Matrix_Element_Handler::InitializeProcesses(): Performing tests . done ( 23252 kB, 0s ).
Initialized the Matrix_Element_Handler for the hard processes.
Initialized the Beam_Remnant_Handler.
Hadron_Init::Init(): Initializing kf table for hadrons.
Initialized the Fragmentation_Handler.
Initialized the Soft_Photon_Handler.
Hadron_Decay_Map::Read:   Initializing HadronDecays.dat. This may take some time.
Initialized the Hadron_Decay_Handler, Decay model = Hadrons
R</pre></div>

<p>Then Sherpa will start to integrate the cross sections. The output will look 
like:
</p><div class="smallformat">
<pre class="verbatim">Process_Group::CalculateTotalXSec(): Calculate xs for '2_2__j__j__e-__e+' (Comix)
Starting the calculation at 11:58:56. Lean back and enjoy ... .
822.035 pb +- ( 16.9011 pb = 2.05601 % ) 5000 ( 11437 -&gt; 43.7 % )
full optimization:  ( 0s elapsed / 22s left ) [11:58:56]   
841.859 pb +- ( 11.6106 pb = 1.37916 % ) 10000 ( 18153 -&gt; 74.4 % )
full optimization:  ( 0s elapsed / 21s left ) [11:58:57]   
...
</pre></div>
<p>The first line here displays the process which is being calculated. In this 
example, the integration is for the 2-&gt;2 process, parton, parton -&gt; electron, 
positron. The matrix element generator used is displayed after the process. 
As the integration progresses, summary lines are displayed, like the one 
shown above. The current estimate of the cross section is displayed, 
along with its statistical error estimate. The number of phase space points
calculated is displayed after this (&lsquo;<samp>10000</samp>&rsquo; in this example), and the 
efficiency is displayed after that. On the line below, the time elapsed is
shown, and an estimate of the total time till the optimisation is complete. 
In square brackets is an output of the system clock.
</p>
<p>When the integration is complete, the output will look like:
</p>
<div class="smallformat">
<pre class="verbatim">...
852.77 pb +- ( 0.337249 pb = 0.0395475 % ) 300000 ( 313178 -&gt; 98.8 % )
integration time:  ( 19s elapsed / 0s left ) [12:01:35]   
852.636 pb +- ( 0.330831 pb = 0.038801 % ) 310000 ( 323289 -&gt; 98.8 % )
integration time:  ( 19s elapsed / 0s left ) [12:01:35]   
2_2__j__j__e-__e+ : 852.636 pb +- ( 0.330831 pb = 0.038801 % )  exp. eff: 13.4945 %
  reduce max for 2_2__j__j__e-__e+ to 0.607545 ( eps = 0.001 ) 
</pre></div>
<p>with the final cross section result and its statistical error displayed.
</p>
<p>Sherpa will then move on to integrate the other processes specified in the
run card.
</p>
<p>When the integration is complete, the event generation will start. 
As the events are being generated, Sherpa will display a summary line stating
how many events have been generated, and an estimate of how long it will take.
When the event generation is complete, Sherpa&rsquo;s 
output looks like:
</p>
<div class="smallformat">
<pre class="verbatim">...
Event 10000 ( 58 s total )                                         
In Event_Handler::Finish : Summarizing the run may take some time.
+----------------------------------------------------+
|                                                    |
|  Total XS is 900.147 pb +- ( 8.9259 pb = 0.99 % )  |
|                                                    |
+----------------------------------------------------+
</pre></div>

<p>A summary of the number of events generated is displayed, with the 
total cross section for the process. 
</p>
<p>The generated events are not stored into a file by
default; for details on how to store the events see 
<a href="#Event-output-formats">Event output formats</a>.
</p>

<hr>
<a name="Parton_002dlevel-event-generation-with-Sherpa-1"></a>
<h3 class="subsection">2.2.3 Parton-level event generation with Sherpa</h3>
<p><a name="Parton_002dlevel-event-generation-with-Sherpa"></a>
</p>
<p>Sherpa has its own tree-level matrix-element generators called AMEGIC++ and Comix. 
Furthermore, with the module PHASIC++, sophisticated and
robust tools for phase-space integration are provided. Therefore
Sherpa obviously can be used as a cross-section integrator. Because
of the way Monte Carlo integration is accomplished, this immediately
allows for parton-level event generation. Taking the <code>LHC_ZJets</code>
setup, users have to modify just a few settings in <code>Run.dat</code> and
would arrive at a parton-level generation for the process gluon down-quark to electron 
positron and down-quark, to name an example. When, for instance, the
options &ldquo;<code>EVENTS=0 OUTPUT=2</code>&rdquo; are added to the command line,
a pure cross-section integration for that process would be obtained
with the results plus integration errors written to the screen.
</p>
<p>For the example, the <code>(processes)</code> section alters to
</p><pre class="verbatim">  Process : 21 1 -&gt; 11 -11 1
  Order (*,2);
  End process
</pre><p>and under the assumption to start afresh, the initialization procedure has
to be followed as before.
Picking the same collider environment as in the previous
example there are only two more changes before the <code>Run.dat</code> file
is ready for the calculation of the hadronic cross section of the
process g d to e- e+ d at LHC and subsequent
parton-level event generation with Sherpa. These changes read
<code>SHOWER_GENERATOR=None</code>, to switch off parton showering, 
<code>FRAGMENTATION=Off</code>, to do so for the hadronisation effects, 
<code>MI_HANDLER=None</code>, to switch off multiparton interactions, and
<code>ME_QED=Off</code>, to switch off resummed QED corrections onto the 
Z -&gt; e- e+ decay. Additionally, the non-perturbative intrinsic transverse 
momentum may be wished to not be taken into account, therefore set 
<code>BEAM_REMNANTS=0;</code>.
</p>
<hr>
<a name="Multijet-merged-event-generation-with-Sherpa-1"></a>
<h3 class="subsection">2.2.4 Multijet merged event generation with Sherpa</h3>
<p><a name="Multijet-merged-event-generation-with-Sherpa"></a>
</p>
<p>For a large fraction of LHC final states, the application of
reconstruction algorithms leads to the identification of several
hard jets. Calculations therefore need to describe as accurately as 
possible both the hard jet production as well as the subsequent 
evolution and the interplay of multiple such topologies. Several 
scales determine the evolution of the event. 
</p>
<p>Various such merging schemes have been proposed: 
[<a href="#Catani2001cc">Cat01a</a>], [<a href="#Lonnblad2001iq">Lon01</a>], [<a href="#Mangano2001xp">Man01</a>], 
[<a href="#Krauss2002up">Kra02</a>], [<a href="#Mangano2006rw">Man06</a>], [<a href="#Lavesson2008ah">Lav08</a>], 
[<a href="#Hoeche2009rj">Hoe09</a>], [<a href="#Hamilton2009ne">Ham09a</a>], [<a href="#Hamilton2010wh">Ham10</a>],
[<a href="#Hoeche2010kg">Hoe10</a>], [<a href="#Lonnblad2011xx">Lon11</a>], [<a href="#Hoeche2012yf">Hoe12a</a>], 
[<a href="#Gehrmann2012yg">Geh12</a>], [<a href="#Lonnblad2012ng">Lon12b</a>], [<a href="#Lonnblad2012ix">Lon12a</a>]. 
Comparisons of the older approaches can be found e.g. in [<a href="#Hoche2006ph">Hoc06</a>],
[<a href="#Alwall2007fs">Alw07</a>]. The currently most advanced treatment at tree-level, 
detailed in [<a href="#Hoeche2009rj">Hoe09</a>], [<a href="#Hoeche2009xc">Hoe09a</a>], [<a href="#Carli2009cg">Car09</a>], 
is implemented in Sherpa.
</p>
<p>How to setup a multijet merged calculation is detailed in most <a href="#Examples">Examples</a>, 
eg. <a href="#LHC_005fWJets">W+jets production</a>, <a href="#LHC_005fZJets">Z+jets production</a> or <a href="#TopsJets">Top quark (pair) + jets production</a>.
</p>


<hr>
<a name="Running-Sherpa-with-AMEGIC_002b_002b-1"></a>
<h3 class="subsection">2.2.5 Running Sherpa with AMEGIC++</h3>
<p><a name="Running-Sherpa-with-AMEGIC_002b_002b"></a>
</p>
<p>When Sherpa is run using the matrix element generator
AMEGIC++, it is necessary to run it twice. During the first run 
(the initialization run) Feynman diagrams for the hard processes are 
constructed and translated into helicity amplitudes. Furthermore 
suitable phase-space mappings are produced. The amplitudes and 
corresponding integration channels are written to disk as C++ 
sourcecode, placed in a subdirectory called <code>Process</code>. The 
initialization run is started using the standard Sherpa executable, 
as decribed in <a href="#Running-Sherpa">Running Sherpa</a>. The relevant command is
</p>
<div class="example">
<pre class="example"><code>&lt;prefix&gt;/bin/Sherpa</code> 
</pre></div>

<p>The initialization run stops with the message &quot;New libraries created. Please 
compile.&quot;, which is nothing but the request to carry
out the compilation and linking procedure for the generated
matrix-element libraries. The <code>makelibs</code> script, provided for this
purpose and created in the working directory, must be invoked by the user
(see <code>./makelibs -h</code> for help):
</p>
<div class="example">
<pre class="example">./makelibs
</pre></div>

<p>Note that the following tools have to be available for this step:
<code>autoconf</code>, <code>automake</code> and <code>libtool</code>.
</p>
<p>Alternatively, if <a href="http://www.scons.org/">scons</a> is installed, 
you may invoke <kbd>&lt;prefix&gt;/bin/make2scons</kbd> and run <kbd>scons install</kbd>. 
If scons was detected during the compilation of Sherpa, also makelibs uses 
<code>scons</code> per default (can be forced to use <code>autotools</code> by 
<kbd>./makelibs -s</kbd>.
</p>
<p>Afterwards Sherpa can be restarted using the same command as
before. In this run (the generation run) the cross sections of the hard
processes are evaluated. Simultaneously the
integration over phase space is optimized to arrive at an
efficient event generation.
</p>
<hr>
<a name="Cross-section-determination"></a>
<a name="Cross-section-determination-1"></a>
<h2 class="section">2.3 Cross section determination</h2>

<p>To determine the total cross section, in particular in the context of
multijet merging with Sherpa, the final output of the event generation
run should be used, e.g.
</p><pre class="verbatim">+-----------------------------------------------------+
|                                                     |
|  Total XS is 1612.17 pb +- ( 8.48908 pb = 0.52 % )  |
|                                                     |
+-----------------------------------------------------+
</pre><p>Note that the Monte Carlo error quoted for the total cross section is
determined during event generation. It, therefore, might differ
substantially from the errors quoted during the integration step,
and it can be reduced simply by generating more events.
</p>
<p>In contrast to plain fixed order results, Sherpa&rsquo;s total cross section 
in multijet merging setups (MEPS, MENLOPS, MEPS@NLO) 
is composed of values from various fixed order processes, namely
those which are combined by applying the multijet merging, see 
<a href="#Multijet-merged-event-generation-with-Sherpa">Multijet merged event generation with Sherpa</a>. In this context, it 
is important to note:
</p>
<p><b>The higher multiplicity tree-level cross sections determined during the
   integration step are meaningless by themselves, only the inclusive cross 
   section printed at the end of the event generation run is to be used.</b>
</p>
<p><b>Sherpa total cross sections have leading order accuracy when the generator
   is run in LO merging mode (MEPS), in NLO merging (MENLOPS, MEPS@NLO) mode 
   they have NLO accuracy.</b>
</p>

<hr>
<a name="Differential-cross-sections-from-single-events"></a>
<h3 class="subsection">2.3.1 Differential cross sections from single events</h3>

<p>To calculate the expectation value of an observable defined through a series 
of cuts and requirements each event produced by Sherpa has to be evaluated 
whether it meets the required criteria. The expectation value is then given 
by
</p><pre class="verbatim">&lt;O&gt; = 1/N_trial * \sum_i^n w_i(\Phi_i) O(\Phi_i) .
</pre><p>Therein the <code>w_i(\Phi_i)</code> are the weight of the event with the phase 
space configuration <code>\Phi_i</code> and <code>O(\Phi_i)</code> is the value of 
the observable at this point. <code>N_trial = \sum_i^n n_trial,i</code> is the sum 
of number of trials <code>n_trial,i</code> of all events. A good cross check is 
to reproduce the inclusive cross section as quoted by Sherpa (see above).
</p>
<p>In case of unweighted events one might want to rescale the uniform 
event weight to unity using <code>w_norm</code>. The above equation then reads
</p><pre class="verbatim">&lt;O&gt; = w_norm/N_trial * \sum_i^n w_i(\Phi_i)/w_norm O(\Phi_i) .
</pre><p>wherein <code>w_i(\Phi_i)/w_norm = 1</code>, ie. the sum simply counts 
how many events pass the observable&rsquo;s selection criteria. If however, 
<code>PartiallyUnweighted</code> event weights or <code>Enhance_Factor</code> or 
<code>Enhance_Observable</code> are used, this is no longer the case and the 
full form needs to be used.
</p>
<p>All required quantities, <code>w_i</code>, <code>w_norm</code> and <code>n_trial,i</code>, 
accompany each event and are written e.g. into the HepMC output 
(cf. <a href="#Event-output-formats">Event output formats</a>).
</p>

<hr>
<a name="Command-line"></a>
<a name="Command-line-options"></a>
<h1 class="chapter">3 Command line options</h1>

<p>The available command line options for Sherpa.
</p>
<dl compact="compact">
<dt>&lsquo;<samp>-f &lt;file&gt;</samp>&rsquo;</dt>
<dd><p>Read input from file &lsquo;<samp>&lt;file&gt;</samp>&rsquo;.
</p>
</dd>
<dt>&lsquo;<samp>-p &lt;path&gt;</samp>&rsquo;</dt>
<dd><p>Read input file from path &lsquo;<samp>&lt;path&gt;</samp>&rsquo;.
</p>
</dd>
<dt>&lsquo;<samp>-L &lt;path&gt;</samp>&rsquo;</dt>
<dd><p>Set Sherpa library path to &lsquo;<samp>&lt;path&gt;</samp>&rsquo;,
see <a href="#SHERPA_005fCPP_005fPATH">SHERPA_CPP_PATH</a>.
</p>
</dd>
<dt>&lsquo;<samp>-e &lt;events&gt;</samp>&rsquo;</dt>
<dd><p>Set number of events to generate &lsquo;<samp>&lt;events&gt;</samp>&rsquo;,
see <a href="#EVENTS">EVENTS</a>.
</p>
</dd>
<dt>&lsquo;<samp>-t &lt;events&gt;</samp>&rsquo;</dt>
<dd><p>Set the event type to &lsquo;<samp>&lt;events&gt;</samp>&rsquo;,
see <a href="#EVENT_005fTYPE">EVENT_TYPE</a>.
</p>
</dd>
<dt>&lsquo;<samp>-r &lt;results&gt;</samp>&rsquo;</dt>
<dd><p>Set the result directory to &lsquo;<samp>&lt;results&gt;</samp>&rsquo;,
see <a href="#RESULT_005fDIRECTORY">RESULT_DIRECTORY</a>.
</p>
</dd>
<dt>&lsquo;<samp>-R &lt;seed&gt;</samp>&rsquo;</dt>
<dd><p>Set the seed of the random number generator to &lsquo;<samp>&lt;seed&gt;</samp>&rsquo;,
see <a href="#RANDOM_005fSEED">RANDOM_SEED</a>.
</p>
</dd>
<dt>&lsquo;<samp>-m &lt;generators&gt;</samp>&rsquo;</dt>
<dd><p>Set the matrix element generator list to &lsquo;<samp>&lt;generators&gt;</samp>&rsquo;,
see <a href="#ME_005fSIGNAL_005fGENERATOR">ME_SIGNAL_GENERATOR</a>.
</p>
</dd>
<dt>&lsquo;<samp>-w &lt;mode&gt;</samp>&rsquo;</dt>
<dd><p>Set the event generation mode to &lsquo;<samp>&lt;mode&gt;</samp>&rsquo;,
see <a href="#EVENT_005fGENERATION_005fMODE">EVENT_GENERATION_MODE</a>.
</p>
</dd>
<dt>&lsquo;<samp>-s &lt;generator&gt;</samp>&rsquo;</dt>
<dd><p>Set the parton shower generator to &lsquo;<samp>&lt;generator&gt;</samp>&rsquo;,
see <a href="#SHOWER_005fGENERATOR">SHOWER_GENERATOR</a>.
</p>
</dd>
<dt>&lsquo;<samp>-F &lt;module&gt;</samp>&rsquo;</dt>
<dd><p>Set the fragmentation module to &lsquo;<samp>&lt;module&gt;</samp>&rsquo;,
see <a href="#Fragmentation">Fragmentation</a>.
</p>
</dd>
<dt>&lsquo;<samp>-D &lt;module&gt;</samp>&rsquo;</dt>
<dd><p>Set the hadron decay module to &lsquo;<samp>&lt;module&gt;</samp>&rsquo;,
see <a href="#Hadron-decays">Hadron decays</a>.
</p>
</dd>
<dt>&lsquo;<samp>-a &lt;analyses&gt;</samp>&rsquo;</dt>
<dd><p>Set the analysis handler list to &lsquo;<samp>&lt;analyses&gt;</samp>&rsquo;,
see <a href="#ANALYSIS">ANALYSIS</a>.
</p>
</dd>
<dt>&lsquo;<samp>-A &lt;path&gt;</samp>&rsquo;</dt>
<dd><p>Set the analysis output path to &lsquo;<samp>&lt;path&gt;</samp>&rsquo;,
see <a href="#ANALYSIS_005fOUTPUT">ANALYSIS_OUTPUT</a>.
</p>
</dd>
<dt>&lsquo;<samp>-O &lt;level&gt;</samp>&rsquo;</dt>
<dd><p>Set general output level &lsquo;<samp>&lt;level&gt;</samp>&rsquo;, see <a href="#OUTPUT">OUTPUT</a>.
</p>
</dd>
<dt>&lsquo;<samp>-o &lt;level&gt;</samp>&rsquo;</dt>
<dd><p>Set output level for event generation &lsquo;<samp>&lt;level&gt;</samp>&rsquo;, see <a href="#OUTPUT">OUTPUT</a>.
</p>
</dd>
<dt>&lsquo;<samp>-l &lt;logfile&gt;</samp>&rsquo;</dt>
<dd><p>Set log file name &lsquo;<samp>&lt;logfile&gt;</samp>&rsquo;, see <a href="#LOG_005fFILE">LOG_FILE</a>.
</p>
</dd>
<dt>&lsquo;<samp>-g</samp>&rsquo;</dt>
<dd><p>Do not create result directory, see <a href="#RESULT_005fDIRECTORY">RESULT_DIRECTORY</a>.
</p>
</dd>
<dt>&lsquo;<samp>-b</samp>&rsquo;</dt>
<dd><p>Switch to non-batch mode, see <a href="#BATCH_005fMODE">BATCH_MODE</a>.
</p>
</dd>
<dt>&lsquo;<samp>-V</samp>&rsquo;</dt>
<dd><p>Print extended version information at startup.
</p>
</dd>
<dt>&lsquo;<samp>-v, --version</samp>&rsquo;</dt>
<dd><p>Print versioning information.
</p>
</dd>
<dt>&lsquo;<samp>-h, --help</samp>&rsquo;</dt>
<dd><p>Print a help message.
</p>
</dd>
<dt>&lsquo;<samp>PARAMETER=VALUE</samp>&rsquo;</dt>
<dd><p>Set the value of a parameter, see <a href="#Parameters">Parameters</a>.
</p>
</dd>
<dt>&lsquo;<samp>TAG:=VALUE</samp>&rsquo;</dt>
<dd><p>Set the value of a tag, see <a href="#Tags">Tags</a>.
</p>
</dd>
</dl>

<hr>
<a name="Input-structure"></a>
<a name="Input-structure-1"></a>
<h1 class="chapter">4 Input structure</h1>
<a name="index-PATH"></a>
<a name="index-RUNDATA"></a>

<p>A Sherpa setup is steered by various parameters, associated with the
different components of event generation.
</p>
<p>These have to be specified in a
run-card which by default is named &ldquo;Run.dat&rdquo; in the current working directory.
If you want to use a different setup directory for your Sherpa run, you have to
specify it on the command line as &lsquo;<samp>-p &lt;dir&gt;</samp>&rsquo; or &lsquo;<samp>PATH=&lt;dir&gt;</samp>&rsquo;.
To read parameters from a run-card with a different name, you may specify
&lsquo;<samp>-f &lt;file&gt;</samp>&rsquo; or &lsquo;<samp>RUNDATA=&lt;file&gt;</samp>&rsquo;.
</p>
<p>Sherpa&rsquo;s parameters are grouped according to the different aspects
of event generation, e.g. the beam parameters in the group &lsquo;<samp>(beam)</samp>&rsquo; and
the fragmentation parameters in the group &lsquo;<samp>(fragmentation)</samp>&rsquo;.
In the run-card this looks like:
</p><pre class="verbatim">  (beam){
    BEAM_ENERGY_1 = 7000.
    ...
  }(beam)
</pre>
<p>Each of these groups is described in detail in another chapter of this
manual, see <a href="#Parameters">Parameters</a>.
</p>
<p>If such a section or file does not exist in the setup directory,
a Sherpa-wide fallback mechanism is employed, searching the file
in various locations in the following order (where $SHERPA_DAT_PATH is an
optionally set environment variable):
</p><ul>
<li>
&lsquo;<samp>$SHERPA_DAT_PATH/&lt;PATH&gt;/</samp>&rsquo;

</li><li>
&lsquo;<samp>$SHERPA_DAT_PATH/</samp>&rsquo;

</li><li>
&lsquo;<samp>$prefix/share/SHERPA-MC/&lt;PATH&gt;/</samp>&rsquo;

</li><li>
&lsquo;<samp>$prefix/share/SHERPA-MC/</samp>&rsquo;

</li></ul>

<p>All parameters can be overwritten on the command line, i.e.
command-line input has the highest priority.
The syntax is
</p><pre class="verbatim">  &lt;prefix&gt;/bin/Sherpa  KEYWORD1=value1 KEYWORD2=value2 ...
</pre>
<p>To change, e.g., the default number of events, the corresponding
command line reads
</p><pre class="verbatim">  &lt;prefix&gt;/bin/Sherpa  EVENTS=10000
</pre>
<p>All over Sherpa, particles are defined by the particle code proposed by the
PDG. These codes and the particle properties will be listed during each run with
&lsquo;<samp>OUTPUT=2</samp>&rsquo; for the elementary particles and &lsquo;<samp>OUTPUT=4</samp>&rsquo; for the hadrons.
In both cases, antiparticles are characterized by a minus sign in front of their
code, e.g. a mu- has code &lsquo;<samp>13</samp>&rsquo;, while a mu+ has &lsquo;<samp>-13</samp>&rsquo;.
</p>
<p>All quantities have to be specified in units of GeV and millimeter. The same
units apply to all numbers in the event output (momenta, vertex positions).
Scattering cross sections are denoted in pico-barn in the output.
</p>
<p>There are a few extra features for an easier handling of the parameter
file(s), namely global tag replacement, see <a href="#Tags">Tags</a>, and algebra
interpretation, see <a href="#Interpreter">Interpreter</a>.
</p>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Interpreter">4.1 Interpreter</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">      How to use the internal interpreter
</td></tr>
<tr><td align="left" valign="top"><a href="#Tags">4.2 Tags</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">             How to use tags
</td></tr>
</table>

<hr>
<a name="Interpreter"></a>
<a name="Interpreter-1"></a>
<h2 class="section">4.1 Interpreter</h2>

<p>Sherpa has a built-in interpreter for algebraic expressions, like &lsquo;<samp>cos(5/180*M_PI)</samp>&rsquo;.
This interpreter is employed when reading integer and floating point numbers from
input files, such that certain parameters can be written in a more convenient fashion.
For example it is possible to specify the factorisation scale as &lsquo;<samp>sqr(91.188)</samp>&rsquo;.
<br>
There are predefined tags to alleviate the handling
</p>
<dl compact="compact">
<dt>&lsquo;<samp>M_PI</samp>&rsquo;</dt>
<dd><p>Ludolph&rsquo;s Number to a precision of 12 digits.
</p></dd>
<dt>&lsquo;<samp>M_C</samp>&rsquo;</dt>
<dd><p>The speed of light in the vacuum.
</p></dd>
<dt>&lsquo;<samp>E_CMS</samp>&rsquo;</dt>
<dd><p>The total centre of mass energy of the collision.
</p>
</dd>
</dl>
<p>The expression syntax is in general C-like, except for the extra function &lsquo;<samp>sqr</samp>&rsquo;,
which gives the square of its argument. Operator precedence is the same as in C.
The interpreter can handle functions with an arbitrary list of parameters, such as
&lsquo;<samp>min</samp>&rsquo; and &lsquo;<samp>max</samp>&rsquo;.
<br>
The interpreter can be employed to construct arbitrary variables from four momenta,
like e.g. in the context of a parton level selector, see <a href="#Selectors">Selectors</a>.
The corresponding functions are
</p>
<dl compact="compact">
<dt>&lsquo;<samp>Mass(<var>v</var>)</samp>&rsquo;</dt>
<dd><p>The invariant mass of <var>v</var> in GeV.
</p></dd>
<dt>&lsquo;<samp>Abs2(<var>v</var>)</samp>&rsquo;</dt>
<dd><p>The invariant mass squared of <var>v</var> in GeV^2.
</p></dd>
<dt>&lsquo;<samp>PPerp(<var>v</var>)</samp>&rsquo;</dt>
<dd><p>The transverse momentum of <var>v</var> in GeV.
</p></dd>
<dt>&lsquo;<samp>PPerp2(<var>v</var>)</samp>&rsquo;</dt>
<dd><p>The transverse momentum squared of <var>v</var> in GeV^2.
</p></dd>
<dt>&lsquo;<samp>MPerp(<var>v</var>)</samp>&rsquo;</dt>
<dd><p>The transverse mass of <var>v</var> in GeV.
</p></dd>
<dt>&lsquo;<samp>MPerp2(<var>v</var>)</samp>&rsquo;</dt>
<dd><p>The transverse mass squared of <var>v</var> in GeV^2.
</p></dd>
<dt>&lsquo;<samp>Theta(<var>v</var>)</samp>&rsquo;</dt>
<dd><p>The polar angle of <var>v</var> in radians.
</p></dd>
<dt>&lsquo;<samp>Eta(<var>v</var>)</samp>&rsquo;</dt>
<dd><p>The pseudorapidity of <var>v</var>.
</p></dd>
<dt>&lsquo;<samp>Y(<var>v</var>)</samp>&rsquo;</dt>
<dd><p>The rapidity of <var>v</var>.
</p></dd>
<dt>&lsquo;<samp>Phi(<var>v</var>)</samp>&rsquo;</dt>
<dd><p>The azimuthal angle of <var>v</var> in radians.
</p>
</dd>
<dt>&lsquo;<samp>Comp(<var>v</var>,<var>i</var>)</samp>&rsquo;</dt>
<dd><p>The <var>i</var>&rsquo;th component of the vector <var>v</var>. <var>i</var>=0 is the 
energy/time component, <var>i</var>=1, 2, and 3 are the x, y, and z 
components.
</p></dd>
<dt>&lsquo;<samp>PPerpR(<var>v1</var>,<var>v2</var>)</samp>&rsquo;</dt>
<dd><p>The relative transverse momentum between <var>v1</var> and <var>v2</var> in GeV.
</p></dd>
<dt>&lsquo;<samp>ThetaR(<var>v1</var>,<var>v2</var>)</samp>&rsquo;</dt>
<dd><p>The relative angle between <var>v1</var> and <var>v2</var> in radians.
</p></dd>
<dt>&lsquo;<samp>DEta(<var>v1</var>,<var>v2</var>)</samp>&rsquo;</dt>
<dd><p>The pseudo-rapidity difference between <var>v1</var> and <var>v2</var>.
</p></dd>
<dt>&lsquo;<samp>DY(<var>v1</var>,<var>v2</var>)</samp>&rsquo;</dt>
<dd><p>The rapidity difference between <var>v1</var> and <var>v2</var>.
</p></dd>
<dt>&lsquo;<samp>DPhi(<var>v1</var>,<var>v2</var>)</samp>&rsquo;</dt>
<dd><p>The relative polar angle between <var>v1</var> and <var>v2</var> in radians.
</p>
</dd>
</dl>


<hr>
<a name="Tags"></a>
<a name="Tags-1"></a>
<h2 class="section">4.2 Tags</h2>

<p>Tag replacement in Sherpa is performed through the data
reading routines, which means that it can be performed for
virtually all inputs.
Specifying a tag on the command line using the syntax
&lsquo;<samp>&lt;Tag&gt;:=&lt;Value&gt;</samp>&rsquo; will replace every occurrence of &lsquo;<samp>&lt;Tag&gt;</samp>&rsquo; in all files
during read-in. An example tag definition could read
</p><pre class="verbatim">  &lt;prefix&gt;/bin/Sherpa QCUT:=20 NJET:=3
</pre>
<p>and then be used in the (me) and (processes) sections like
</p><pre class="verbatim">  (me){
    RESULT_DIRECTORY Result_QCUT;
  }(me)
  (processes){
    Process 93 93 -&gt; 11 -11 93{NJET};
    Order (*,2);
    CKKW sqr(QCUT/E_CMS);
    End process;
  }(processes)
</pre><hr>
<a name="Parameters"></a>
<a name="Parameters-1"></a>
<h1 class="chapter">5 Parameters</h1>

<p>A Sherpa setup is steered by various parameters, associated with the
different components of event generation. These are set in 
Sherpa&rsquo;s
run-card, see <a href="#Input-structure">Input structure</a> for more details. Tag replacements may be
performed in all inputs, see <a href="#Tags">Tags</a>.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Run-Parameters">5.1 Run parameters</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">    List of general parameters
</td></tr>
<tr><td align="left" valign="top"><a href="#Beam-Parameters">5.2 Beam parameters</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">   List of beam parameters
</td></tr>
<tr><td align="left" valign="top"><a href="#ISR-Parameters">5.3 ISR parameters</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">    List of initial state radiation parameters
</td></tr>
<tr><td align="left" valign="top"><a href="#Models">5.4 Models</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            Interaction models for the hard process
</td></tr>
<tr><td align="left" valign="top"><a href="#Matrix-Elements">5.5 Matrix elements</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">   Matrix element related settings
</td></tr>
<tr><td align="left" valign="top"><a href="#Processes">5.6 Processes</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         Syntax of the process setup
</td></tr>
<tr><td align="left" valign="top"><a href="#Selectors">5.7 Selectors</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         Syntax of parton level cuts
</td></tr>
<tr><td align="left" valign="top"><a href="#Integration">5.8 Integration</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">       List of integration parameters
</td></tr>
<tr><td align="left" valign="top"><a href="#Hard-decays">5.9 Hard decays</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">       List of paramters to steer hard/inclusive decays
</td></tr>
<tr><td align="left" valign="top"><a href="#Shower-Parameters">5.10 Parton showers</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"> List of shower parameters
</td></tr>
<tr><td align="left" valign="top"><a href="#MPI-Parameters">5.11 Multiple interactions</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">    List of multiple parton interaction parameters
</td></tr>
<tr><td align="left" valign="top"><a href="#Hadronization">5.12 Hadronization</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">     List of hadronization parameters
</td></tr>
<tr><td align="left" valign="top"><a href="#QED-Corrections">5.13 QED corrections</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">   List of QED correction parameters
</td></tr>
<tr><td align="left" valign="top"><a href="#Minimum-Bias">5.14 Minimum bias events</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">      List of minimum bias simulation parameters
</td></tr>
</table>

<hr>
<a name="Run-Parameters"></a>
<a name="Run-parameters"></a>
<h2 class="section">5.1 Run parameters</h2>

<p>The following parameters describe general run information. They may be set in the <code>(run)</code> section of the run-card, see <a href="#Input-structure">Input structure</a>.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#EVENTS">5.1.1 EVENTS</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            Number of events to generate.
</td></tr>
<tr><td align="left" valign="top"><a href="#EVENT_005fTYPE">5.1.2 EVENT_TYPE</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">        Type of events to generate.
</td></tr>
<tr><td align="left" valign="top"><a href="#SHERPA_005fVERSION">5.1.3 SHERPA_VERSION</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">    Sherpa version that can run this run card.
</td></tr>
<tr><td align="left" valign="top"><a href="#TUNE">5.1.4 TUNE</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">              Parameter tunes.
</td></tr>
<tr><td align="left" valign="top"><a href="#OUTPUT">5.1.5 OUTPUT</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            Screen output level.
</td></tr>
<tr><td align="left" valign="top"><a href="#LOG_005fFILE">5.1.6 LOG_FILE</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Log file.
</td></tr>
<tr><td align="left" valign="top"><a href="#RANDOM_005fSEED">5.1.7 RANDOM_SEED</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">       Seed for random number generator.
</td></tr>
<tr><td align="left" valign="top"><a href="#EVENT_005fSEED_005fMODE">5.1.8 EVENT_SEED_MODE</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">   Setting predefined seeds.
</td></tr>
<tr><td align="left" valign="top"><a href="#ANALYSIS">5.1.9 ANALYSIS</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Switch internal analysis on or off.
</td></tr>
<tr><td align="left" valign="top"><a href="#ANALYSIS_005fOUTPUT">5.1.10 ANALYSIS_OUTPUT</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">   Directory for generated analysis histogram files.
</td></tr>
<tr><td align="left" valign="top"><a href="#TIMEOUT">5.1.11 TIMEOUT</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Run time limitation.
</td></tr>
<tr><td align="left" valign="top"><a href="#RLIMIT_005fAS">5.1.12 RLIMIT_AS</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         Memory limitation and leak detection.
</td></tr>
<tr><td align="left" valign="top"><a href="#BATCH_005fMODE">5.1.13 BATCH_MODE</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">        Batch mode settings.
</td></tr>
<tr><td align="left" valign="top"><a href="#NUM_005fACCURACY">5.1.14 NUM_ACCURACY</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">      Accuracy for gauge tests.
</td></tr>
<tr><td align="left" valign="top"><a href="#SHERPA_005fCPP_005fPATH">5.1.15 SHERPA_CPP_PATH</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">   The C++ code generation path.
</td></tr>
<tr><td align="left" valign="top"><a href="#SHERPA_005fLIB_005fPATH">5.1.16 SHERPA_LIB_PATH</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">   The runtime library path.
</td></tr>
<tr><td align="left" valign="top"><a href="#Event-output-formats">5.1.17 Event output formats</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">     Event output in different formats.
</td></tr>
<tr><td align="left" valign="top"><a href="#Scale-and-PDF-variations">5.1.18 Scale and PDF variations</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"> On-the-fly scale and PDF variations.
</td></tr>
<tr><td align="left" valign="top"><a href="#MPI-parallelization">5.1.19 MPI parallelization</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">      MPI parallelization with Sherpa.
</td></tr>
</table>


<hr>
<a name="EVENTS"></a>
<a name="EVENTS-1"></a>
<h3 class="subsection">5.1.1 EVENTS</h3>
<a name="index-EVENTS"></a>
<p>This parameter specifies the number of events to be generated.
<br>
It can alternatively be set on the command line through option
&lsquo;<samp>-e</samp>&rsquo;, see <a href="#Command-line">Command line options</a>.
</p>
<hr>
<a name="EVENT_005fTYPE"></a>
<a name="EVENT_005fTYPE-1"></a>
<h3 class="subsection">5.1.2 EVENT_TYPE</h3>
<a name="index-EVENT_005fTYPE"></a>
<p>This parameter specifies the kind of events to be generated.  
It can alternatively be set on the command line through option
&lsquo;<samp>-t</samp>&rsquo;, see <a href="#Command-line">Command line options</a>.
</p><ul>
<li>
        The default event type is <code>StandardPerturbative</code>, which will 
        generate a hard event through exact matrix elements matched and/or 
        merged with the paerton shower, eventually including hadronization, 
        hadron decays, etc..
</li></ul>
<p>Alternatively there are two more specialised modes, namely:
</p><ul>
<li>
        <code>MinimumBias</code>, which generates minimum bias events through the
        SHRIMPS model implemented in Sherpa, see <a href="#Minimum-Bias">Minimum bias events</a>
</li><li>
        <code>HadronDecay</code>, which allows to simulate the decays of a specific
        hadron.          
</li></ul>

<hr>
<a name="SHERPA_005fVERSION"></a>
<a name="SHERPA_005fVERSION-1"></a>
<h3 class="subsection">5.1.3 SHERPA_VERSION</h3>
<a name="index-SHERPA_005fVERSION"></a>
<p>This parameter ties a run card to a specific Sherpa version, e.g.
<code>2.2.0</code>. If two parameters are given they are interpreted as
a range of Sherpa versions.
</p>
<hr>
<a name="TUNE"></a>
<a name="TUNE-1"></a>
<h3 class="subsection">5.1.4 TUNE</h3>
<a name="index-TUNE"></a>
<p>This parameter specifies which tune is to be used. Setting different 
tunes using this parameter ensures, that consistent settings are 
employed. This affects mostly <a href="#MPI-Parameters">Multiple interactions</a> and
<a href="#Intrinsic-Transverse-Momentum">Intrinsic Transverse Momentum</a> parameters. Possible values are:
</p><ul>
<li>
<code>None</code> The current version does not include alternative tunes.
</li></ul>

<hr>
<a name="OUTPUT"></a>
<a name="OUTPUT-1"></a>
<h3 class="subsection">5.1.5 OUTPUT</h3>
<a name="index-OUTPUT"></a>
<a name="index-EVT_005fOUTPUT"></a>
<p>This parameter specifies the screen output level (verbosity) of the program.
If you are looking for event file output options please refer to section
<a href="#Event-output-formats">Event output formats</a>.
<br>
It can alternatively be set on the command line through option
&lsquo;<samp>-O</samp>&rsquo;, see <a href="#Command-line">Command line options</a>. A different output level can be 
specified for the event generation step through &lsquo;<samp>EVT_OUTPUT</samp>&rsquo;
or command line option &lsquo;<samp>-o</samp>&rsquo;, see <a href="#Command-line">Command line options</a>
</p>
<p>The value can be any sum of the following:
</p><ul>
<li>
0: Error messages (-&gt; always displayed).
</li><li>
1: Event display.
</li><li>
2: Informational messages during the run.
</li><li>
4: Tracking messages (lots of output).
</li><li>
8: Debugging messages (even more output).
</li></ul>

<p>E.g. &lsquo;<samp>OUTPUT=3</samp>&rsquo; would display information, events and errors.
</p>
<hr>
<a name="LOG_005fFILE"></a>
<a name="LOG_005fFILE-1"></a>
<h3 class="subsection">5.1.6 LOG_FILE</h3>
<a name="index-LOG_005fFILE"></a>
<p>This parameter specifies the log file. If set, the standard output 
from Sherpa is written to the specified file, but output from child
processes is not redirected. This option is particularly useful to produce
clean log files when running the code in MPI mode, see <a href="#MPI-parallelization">MPI parallelization</a>.
A file name can alternatively be specified on the command line through option
&lsquo;<samp>-l</samp>&rsquo;, see <a href="#Command-line">Command line options</a>.
</p>
<hr>
<a name="RANDOM_005fSEED"></a>
<a name="RANDOM_005fSEED-1"></a>
<h3 class="subsection">5.1.7 RANDOM_SEED</h3>
<a name="index-RANDOM_005fSEED"></a>
<p>Sherpa uses different random-number generators. The default is the Ran3 
generator described in [<a href="http://www.nr.com/">ISBN-10:0521880688</a>].
Alternatively, a combination of George Marsaglias KISS and SWB 
[<a href="http://dx.doi.org/10.1214/aoap/1177005878">Ann.Appl.Probab.1,3(1991)462</a>]
can be employed, see <a href="http://groups.google.co.uk/group/sci.stat.math/msg/edcb117233979602">this</a> 
<a href="http://groups.google.co.uk/group/sci.math.num-analysis/msg/eb4ddde782b17051">website</a>.
The integer-valued seeds of the generators are specified by 
&lsquo;<samp>RANDOM_SEED=A .. D</samp>&rsquo;. They can also be set directly using 
&lsquo;<samp>RANDOM_SEED1=A</samp>&rsquo; through &lsquo;<samp>RANDOM_SEED4=D</samp>&rsquo;. The Ran3 generator 
takes only one argument. This value can also be set using the command line 
option &lsquo;<samp>-R</samp>&rsquo;, see <a href="#Command-line">Command line options</a>.
</p>
<hr>
<a name="EVENT_005fSEED_005fMODE"></a>
<a name="EVENT_005fSEED_005fMODE-1"></a>
<h3 class="subsection">5.1.8 EVENT_SEED_MODE</h3>
<p>The tag &lsquo;<samp>EVENT_SEED_MODE</samp>&rsquo; can be used to enforce the same seeds in different
runs of the generator. When set to 1, existing random seed files are read and the seed is set to the
next available value in the file before each event. When set to 2, seed files are written to disk.
These files are gzip compressed, if Sherpa was compiled with option &lsquo;<samp>--enable-gzip</samp>&rsquo;.
When set to 3, Sherpa uses an internal bookkeeping mechanism to advance to the next predefined seed.
No seed files are written out or read in.
</p>
<hr>
<a name="ANALYSIS"></a>
<a name="ANALYSIS-1"></a>
<h3 class="subsection">5.1.9 ANALYSIS</h3>
<a name="index-ANALYSIS"></a>
<p>Analysis routines can be switched on or off by setting the ANALYSIS flag.
The default is no analysis, corresponding to option &lsquo;<samp>0</samp>&rsquo;.
This parameter can also be specified on the command line using option
&lsquo;<samp>-a</samp>&rsquo;, see <a href="#Command-line">Command line options</a>.
</p>
<p>The following analysis handlers are currently available
</p><dl compact="compact">
<dt>&lsquo;<samp>Internal</samp>&rsquo;</dt>
<dd><p>Sherpa&rsquo;s internal analysis handler.
<br>
To use this option, the package must be configured with option &lsquo;<samp>--enable-analysis</samp>&rsquo;.
<br>
An output directory can be specified using <a href="#ANALYSIS_005fOUTPUT">ANALYSIS_OUTPUT</a>.
</p></dd>
<dt>&lsquo;<samp>Rivet</samp>&rsquo;</dt>
<dd><p>The Rivet package, see <a href="http://projects.hepforge.org/rivet/">Rivet Website</a>.
<br>
To enable it, Rivet and HepMC have to be installed and Sherpa must be configured
as described in <a href="#Rivet-analyses">Rivet analyses</a>.
</p></dd>
<dt>&lsquo;<samp>HZTool</samp>&rsquo;</dt>
<dd><p>The HZTool package, see <a href="http://hztool.hepforge.org/">HZTool Website</a>.
<br>
To enable it, HZTool and CERNLIB have to be installed and Sherpa must be configured
as described in <a href="#HZTool-analyses">HZTool analyses</a>.
</p></dd>
</dl>

<p>Multiple options can be combined using a comma, e.g. &lsquo;<samp>ANALYSIS=Internal,Rivet</samp>&rsquo;.
</p>
<hr>
<a name="ANALYSIS_005fOUTPUT"></a>
<a name="ANALYSIS_005fOUTPUT-1"></a>
<h3 class="subsection">5.1.10 ANALYSIS_OUTPUT</h3>
<a name="index-ANALYSIS_005fOUTPUT"></a>
<p>Name of the directory for histogram files when using the internal analysis
and name of the Aida file when using Rivet, see <a href="#ANALYSIS">ANALYSIS</a>. 
The directory / file will be created w.r.t. the working directory. The default
value is &lsquo;<samp>Analysis/</samp>&rsquo;. This parameter can also be specified on the 
command line using option &lsquo;<samp>-A</samp>&rsquo;, see <a href="#Command-line">Command line options</a>.
</p>
<hr>
<a name="TIMEOUT"></a>
<a name="TIMEOUT-1"></a>
<h3 class="subsection">5.1.11 TIMEOUT</h3>
<a name="index-TIMEOUT"></a>
<p>A run time limitation can be given in user CPU seconds through TIMEOUT. This option is of
some relevance when running SHERPA on a batch system. Since in many cases jobs are just
terminated, this allows to interrupt a run, to store all relevant information and to restart
it without any loss. This is particularly useful when carrying out long integrations.
Alternatively, setting the TIMEOUT variable to -1, which is the default setting, translates into
having no run time limitation at all. The unit is seconds.
</p>
<hr>
<a name="RLIMIT_005fAS"></a>
<a name="RLIMIT_005fAS-1"></a>
<h3 class="subsection">5.1.12 RLIMIT_AS</h3>
<a name="index-RLIMIT_005fAS"></a>
<a name="index-RLIMIT_005fBY_005fCPU"></a>
<a name="index-MEMLEAK_005fWARNING_005fTHRESHOLD"></a>
<p>A memory limitation can be given to prevent Sherpa to crash the system it is 
running on as it continues to build up matrix elements and loads additional 
libraries at run time. Per default the maximum RAM of the system is determined 
and set as the memory limit. This can be changed by giving 
&lsquo;<samp>RLIMIT_AS=&lt;size&gt;</samp>&rsquo; where the size is given in the format <code>500 MB</code>, 
<code>4 GB</code>, or <code>10 %</code>. The space between number and unit is mandatory. 
When running with <a href="#MPI-parallelization">MPI parallelization</a> it might be necessary to divide 
the total maximum by the number of cores. This can be done by setting 
<code>RLIMIT_BY_CPU=1</code>.
</p>
<p>Sherpa checks for memory leaks during integration and event generation. 
If the allocated memory after start of integration or event generation exceeds
the parameter &lsquo;<samp>MEMLEAK_WARNING_THRESHOLD</samp>&rsquo;, a warning is printed. 
Like &lsquo;<samp>RLIMIT_AS</samp>&rsquo;, &lsquo;<samp>MEMLEAK_WARNING_THRESHOLD</samp>&rsquo; can be set 
using units. However, no spaces are allowed between the number and the unit.
The warning threshold defaults to <code>16MB</code>.
</p>
<hr>
<a name="BATCH_005fMODE"></a>
<a name="BATCH_005fMODE-1"></a>
<h3 class="subsection">5.1.13 BATCH_MODE</h3>
<a name="index-BATCH_005fMODE"></a>
<a name="index-EVENT_005fDISPLAY_005fINTERVAL"></a>
<p>Whether or not to run Sherpa in batch mode. The default is &lsquo;<samp>1</samp>&rsquo;, 
meaning Sherpa does not attempt to save runtime information when catching 
a signal or an exception. On the contrary, if option &lsquo;<samp>0</samp>&rsquo; is used, 
Sherpa will store potential integration information and analysis results, 
once the run is terminated abnormally. All possible settings are:
</p><ul>
<li> <var>0</var> Sherpa attempts to write out integration and analysis 
results when catching an exception.
</li><li> <var>1</var> Sherpa does not attempt to write out integration and 
analysis results when catching an exception.
</li><li> <var>2</var> Sherpa outputs the event counter continously, instead 
of overwriting the previous one (default when using <a href="#LOG_005fFILE">LOG_FILE</a>).
</li><li> <var>4</var> Sherpa increases the on-screen event counter in constant 
steps of 100 instead of an increase relative to the current event 
number. The interval length can be adjusted with <code>EVENT_DISPLAY_INTERVAL</code>.
</li></ul>
<p>The settings are additive such that multiple settings can be employed 
at the same time.
</p>
<p><em>Note that when running the code on a cluster or in a grid environment, BATCH_MODE should always contain setting 1 (i.e. BATCH_MODE=[1|3|5|7]).</em>
</p>
<p>The command line option &lsquo;<samp>-b</samp>&rsquo; should therefore not be used in this case, see
<a href="#Command-line">Command line options</a>.
</p>
<hr>
<a name="NUM_005fACCURACY"></a>
<a name="NUM_005fACCURACY-1"></a>
<h3 class="subsection">5.1.14 NUM_ACCURACY</h3>
<a name="index-NUM_005fACCURACY"></a>
<p>The targeted numerical accuracy can be specified through NUM ACCURACY, e.g. for comparing
two numbers. This might have to be reduced if gauge tests fail for numerical reasons.
</p>
<hr>
<a name="SHERPA_005fCPP_005fPATH"></a>
<a name="SHERPA_005fCPP_005fPATH-1"></a>
<h3 class="subsection">5.1.15 SHERPA_CPP_PATH</h3>
<a name="index-SHERPA_005fCPP_005fPATH"></a>
<p>The path in which Sherpa will eventually store dynamically created C++ source code.
If not specified otherwise, sets &lsquo;<samp>SHERPA_LIB_PATH</samp>&rsquo; to 
&lsquo;<samp>$SHERPA_CPP_PATH/Process/lib</samp>&rsquo;. This value can also be set using the command line 
option &lsquo;<samp>-L</samp>&rsquo;, see <a href="#Command-line">Command line options</a>.
</p>
<hr>
<a name="SHERPA_005fLIB_005fPATH"></a>
<a name="SHERPA_005fLIB_005fPATH-1"></a>
<h3 class="subsection">5.1.16 SHERPA_LIB_PATH</h3>
<a name="index-SHERPA_005fLIB_005fPATH"></a>
<p>The path in which Sherpa looks for dynamically linked libraries from previously created
C++ source code, cf. <a href="#SHERPA_005fCPP_005fPATH">SHERPA_CPP_PATH</a>.
</p>

<hr>
<a name="Event-output-formats"></a>
<a name="Event-output-formats-1"></a>
<h3 class="subsection">5.1.17 Event output formats</h3>
<a name="index-HepMC_005fGenEvent"></a>
<a name="index-HepMC_005fShort"></a>
<a name="index-HEPEVT"></a>
<a name="index-LHEF"></a>
<a name="index-Root"></a>
<a name="index-Delphes"></a>
<a name="index-FILE_005fSIZE"></a>
<a name="index-EVT_005fFILE_005fPATH"></a>
<a name="index-OUTPUT_005fPRECISION"></a>
<a name="index-EVENT_005fOUTPUT"></a>
<a name="index-EVENT_005fINPUT"></a>

<p>Sherpa provides the possibility to output events in various formats, 
e.g. the HepEVT common block structure or the HepMC format.
The authors of Sherpa assume that the user is sufficiently acquainted with 
these formats when selecting them.
</p>
<p>If the events are to be written to file, the parameter &lsquo;<samp>EVENT_OUTPUT</samp>&rsquo;
must be specified together with a file name. An example would be
<code>EVENT_OUTPUT=HepMC_GenEvent[MyFile]</code>, where <code>MyFile</code> stands
for the desired file base name. The following formats are currently available:
</p>
<dl compact="compact">
<dt>&lsquo;<samp>HepMC_GenEvent</samp>&rsquo;</dt>
<dd><p>Generates output in HepMC::IO_GenEvent format. The HepMC::GenEvent::m_weights 
weight vector stores the following items: <code>[0]</code> event weight, <code>[1]</code> 
combined matrix element and PDF weight (missing only phase space weight
information, thus directly suitable for evaluating the matrix element value of
the given configuration), <code>[2]</code> event weight
normalisation (in case of unweighted events event weights of ~ +/-1 
can be obtained by (event weight)/(event weight normalisation)), and 
<code>[3]</code> number of trials. The total cross section of the simulated event sample
can be computed as the sum of event weights divided by the sum of the number of trials.
This value must agree with the total cross section quoted by Sherpa at the end of
the event generation run, and it can serve as a cross-check on the consistency
of the HepMC event file.  Note that Sherpa conforms to the Les Houches 2013
suggestion (<a href="http://phystev.in2p3.fr/wiki/2013:groups:tools:hepmc">http://phystev.in2p3.fr/wiki/2013:groups:tools:hepmc</a>) 
of indicating interaction types through the GenVertex type-flag.  Multiple
event weights can also be enabled with HepMC versions &gt;2.06, cf. 
<a href="#Scale-and-PDF-variations">Scale and PDF variations</a>. The following additional customisations 
can be used
</p>
<p><code>HEPMC_USE_NAMED_WEIGHTS=&lt;0|1&gt;</code> 
Enable filling weights with an associated name. The nominal event weight 
has the key <code>Weight</code>. <code>MEWeight</code>, <code>WeightNormalisation</code> and 
<code>NTrials</code> provide additional information for each event as described 
above. Needs HepMC version &gt;2.06.
</p>
<p><code>HEPMC_EXTENDED_WEIGHTS=&lt;0|1&gt;</code>
Write additional event weight information needed for a posteriori reweighting 
into the WeightContainer, cf. <a href="#A-posteriori-scale-and-PDF-variations-using-the-HepMC-GenEvent-Output">A posteriori scale and PDF variations using the HepMC GenEvent Output</a>. Necessitates 
the use of <code>HEPMC_USE_NAMED_WEIGHTS</code>.
</p>
<p><code>HEPMC_TREE_LIKE=&lt;0|1&gt;</code>
Force the event record to be stricly tree-like. Please note that this removes 
some information from the matrix-element-parton-shower interplay which would 
be otherwise stored.
</p>
</dd>
<dt>&lsquo;<samp>HepMC_Short</samp>&rsquo;</dt>
<dd><p>Generates output in HepMC::IO_GenEvent format, however, only incoming beams and 
outgoing particles are stored. Intermediate and decayed particles are not 
listed. The event weights stored as the same as above, and 
<code>HEPMC_USE_NAMED_WEIGHTS</code> and <code>HEPMC_EXTENDED_WEIGHTS</code> can be used to 
customise.
</p>
</dd>
<dt>&lsquo;<samp>HepMC3_GenEvent</samp>&rsquo;</dt>
<dd><p>Generates output using HepMC3 library. The format of the output is set with  <code>HEPMC3_IO_TYPE=&lt;0|1|2|3|4&gt;</code> tag.
The default value is 0 and corresponds to ASCII GenEvent. Other available options are 
1: HepEvt 2: ROOT file with every event written as an object of class GenEvent. 3: ROOT file with GenEvent objects writen into TTree.
Otherwise similar to  <code>HepMC_GenEvent</code>.
</p>
</dd>
<dt>&lsquo;<samp>Delphes_GenEvent</samp>&rsquo;</dt>
<dd><p>Generates output in <a href="http://root.cern.ch">Root</a> format, which can be passed to
<a href="http://cp3.irmp.ucl.ac.be/projects/delphes">Delphes</a> for analyses.
Input events are taken from the HepMC interface. Storage space can be reduced
by up to 50% compared to gzip compressed HepMC. This output format is available 
only if Sherpa was configured and installed with options &lsquo;<samp>--enable-root</samp>&rsquo; 
and &lsquo;<samp>--enable-delphes=/path/to/delphes</samp>&rsquo;.
</p></dd>
<dt>&lsquo;<samp>Delphes_Short</samp>&rsquo;</dt>
<dd><p>Generates output in <a href="http://root.cern.ch">Root</a> format, which can be passed to
<a href="http://cp3.irmp.ucl.ac.be/projects/delphes">Delphes</a> for analyses.
Only incoming beams and outgoing particles are stored.
</p></dd>
<dt>&lsquo;<samp>PGS</samp>&rsquo;</dt>
<dd><p>Generates output in <a href="http://cepa.fnal.gov/psm/stdhep">StdHEP</a> format, which can be 
passed to <a href="http://www.physics.ucdavis.edu/~conway/research/software/pgs/pgs4-general.htm">PGS</a> 
for analyses. This output format is available only if Sherpa was configured and installed 
with options &lsquo;<samp>--enable-hepevtsize=4000</samp>&rsquo; and &lsquo;<samp>--enable-pgs=/path/to/pgs</samp>&rsquo;.
Please refer to the PGS documentation for how to pass StdHEP event files on to PGS.
If you are using the LHC olympics executeable, you may run
&lsquo;<samp>./olympics --stdhep events.lhe &lt;other options&gt;</samp>&rsquo;.
</p>
</dd>
<dt>&lsquo;<samp>PGS_Weighted</samp>&rsquo;</dt>
<dd><p>Generates output in <a href="http://cepa.fnal.gov/psm/stdhep">StdHEP</a> format, which can be 
passed to <a href="http://www.physics.ucdavis.edu/~conway/research/software/pgs/pgs4-general.htm">PGS</a> 
for analyses. Event weights in the HEPEV4 common block are stored in the event file.
</p></dd>
<dt>&lsquo;<samp>HEPEVT</samp>&rsquo;</dt>
<dd><p>Generates output in HepEvt format.
</p></dd>
<dt>&lsquo;<samp>LHEF</samp>&rsquo;</dt>
<dd><p>Generates output in Les Houches Event File format. This output format is 
intended for output of <strong>matrix element configurations only</strong>. Since the 
format requires PDF information to be written out in the outdated 
PDFLIB/LHAGLUE enumeration format this is only available automatically if 
LHAPDF is used, the identification numbers otherwise have to be given 
explicitly via <code>LHEF_PDF_NUMBER</code> (<code>LHEF_PDF_NUMBER_1</code> and 
<code>LHEF_PDF_NUMBER_2</code> if both beams carry different structure functions). 
This format currently outputs matrix element information only, no information 
about the large-Nc colour flow is given as the LHEF output format is not 
suited to communicate enough information for meaningful parton showering 
on top of multiparton final states.
</p></dd>
<dt>&lsquo;<samp>Root</samp>&rsquo;</dt>
<dd><p>Generates output in ROOT ntuple format <strong>for NLO event generation only</strong>. 
For details on the ntuple format, see <a href="#A-posteriori-scale-and-PDF-variations-using-the-ROOT-NTuple-Output">A posteriori scale and PDF variations using the ROOT NTuple Output</a>.
This output option is available only if Sherpa was linked to ROOT during 
installation by using the configure option <code>--enable-root=/path/to/root</code>.
ROOT ntuples can be read back into Sherpa and analyzed using the option
&lsquo;<samp>EVENT_INPUT</samp>&rsquo;. This feature is described in <a href="#NTuple-production">Production of NTuples</a>.
</p></dd>
</dl>

<p>The output can be further customized using the following options:
</p>
<dl compact="compact">
<dt>&lsquo;<samp>FILE_SIZE</samp>&rsquo;</dt>
<dd><p>Number of events per file (default: unlimited).
</p></dd>
<dt>&lsquo;<samp>NTUPLE_SIZE</samp>&rsquo;</dt>
<dd><p>File size per NTuple file (default: unlimited).
This option is deprecated. It may lead to errors in the subsequent 
processing of NTuple files. Please use &lsquo;<samp>FILE_SIZE</samp>&rsquo; instead.
</p></dd>
<dt>&lsquo;<samp>EVT_FILE_PATH</samp>&rsquo;</dt>
<dd><p>Directory where the files will be stored.
</p></dd>
<dt>&lsquo;<samp>OUTPUT_PRECISION</samp>&rsquo;</dt>
<dd><p>Steers the precision of all numbers written to file.
</p></dd>
</dl>

<p>For all output formats except ROOT and Delphes, events can be written directly 
to gzipped files instead of plain text. The option &lsquo;<samp>--enable-gzip</samp>&rsquo; 
must be given during installation to enable this feature.
</p>
<hr>
<a name="Scale-and-PDF-variations"></a>
<a name="Scale-and-PDF-variations-1"></a>
<h3 class="subsection">5.1.18 Scale and PDF variations</h3>
<p>Sherpa can compute alternative event weights for different scale and 
PDF choices on-the-fly, resulting in alternative weights for the generated 
event. The can be evoked with the following syntax
</p><pre class="verbatim">SCALE_VARIATIONS &lt;muR-fac-1&gt;,&lt;muF-fac-1&gt;[,&lt;PDF-1&gt;[,&lt;associated-contrib-1&gt;]]  &lt;muR-fac-1&gt;,&lt;muF-fac-1&gt;[,&lt;PDF-1&gt;[,&lt;associated-contrib-1&gt;]] ...
</pre><p>The key word <code>SCALE_VARIATIONS</code> takes a space separated list of 
variation factors for the nominal renormalisation and factorisation scale, 
an associated PDF set and associated approximate NLO EW and sub-leading order
contributions. Any set present in any of the PDF library interfaces
loaded through <code>PDF_LIBRARY</code> can be used. If no PDF set is given it 
defaults to the nominal one. Specific PDF members can be 
specified by appending the PDF set name with <code>/&lt;member-id&gt;</code>. The 
short-hand appendix <code>[all]</code> will provide the variations for all 
members of the given set (only works with LHAPDF6 sets or the internal default
set).  Please note: scales are, as always in Sherpa, given in their quadratic
form.  Thus, a variation of factor 4 of the squared scale [GeV^2] means a
variation of factor 2 on the scale itself [GeV].
</p>
<p>PDF variations on their own can also be invoked by giving the list of 
PDF sets to be reweighted to to <code>PDF_VARIATIONS</code>.
</p>
<p>Thus, a complete variation using the PDF4LHC convention would read
</p><pre class="verbatim">  SCALE_VARIATIONS 0.25,0.25 0.25,1. 1.,0.25 1.,1. 1.,4. 4.,1. 4.,4.;
  PDF_VARIATIONS CT10nlo[all] MMHT2014nlo68cl[all] NNPDF30_nlo_as_0118[all];
</pre><p>Please note, this syntax will create 7+53+51+101=212 additional weights
for each event.
</p>
<p>Similarly, the associated NLO EW and sub-leading order contributions can 
be included orthogonally to scale and PDF variations through
</p><pre class="verbatim">  ASSOCIATED_CONTRIBUTIONS_VARIATIONS EW EW|LO1 EW|LO1|LO2 EW|LO1|LO2|LO3;
</pre>
<p>The additional event weights can then be written into the event output. 
However, this is currently only supported for <code>HepMC_GenEvent</code> and 
<code>HepMC_Short</code> with versions &gt;2.06 and <code>HEPMC_USE_NAMED_WEIGHTS=1</code>. 
The alternative event weights follow the Les Houches naming convention 
for such variations, ie. they are named <code>MUR&lt;fac&gt;_MUF&lt;fac&gt;_PDF&lt;id&gt;</code>. 
In case associated NLO EW and sub-leading order contributions are used, 
this convention is extended to <code>MUR&lt;fac&gt;_MUF&lt;fac&gt;_PDF&lt;id&gt;_ASS&lt;contrib&gt;</code>.
</p>
<p>When using Sherpa&rsquo;s interface to Rivet, <a href="#Rivet-analyses">Rivet analyses</a>, separate 
instances of Rivet, one for each alternative event weight in addition to 
the nominal one, are instantiated leading to one set of histograms each.
They are again named using the <code>MUR&lt;fac&gt;_MUF&lt;fac&gt;_PDF&lt;id&gt;</code> convention.
</p>
<p>The user must also be aware that, of course, the cross section of the 
event sample, changes when using an alternative event weight as compared 
to the nominal one. Any histograming therefore has to account for this 
and recompute the total cross section as the sum of weights devided by the 
number of trials, cf. <a href="#Cross-section-determination">Cross section determination</a>.
</p>
<p>The on-the-fly reweighting works for all event generation modes (weighted or
(partially) unweighted) and all calculation types (LO, LOPS, NLO, NLOPS,
MEPS@LO, MEPS@NLO and MENLOPS).
However, the reweighting of parton shower emissions has to be enabled explicitly,
using <code>CSS_REWEIGHT=1</code>.  This should work out of the box for both scale
and PDF variations.  If numerical issues are encountered, one can try to
increase &lsquo;<samp>CSS_REWEIGHT_SCALE_CUTOFF</samp>&rsquo; (default: 5).
This disables shower variations for emissions at scales below the value.  An
improved accuracy for shower variations at very low scales can be achieved by
using <code>CSS_ALPHAS_FREEZE_MODE=1</code>, see <a href="#CS-Shower-options">CS Shower options</a>.
An additional safeguard against rare spuriously large shower variation
weights is implemented as <code>CSS_MAX_REWEIGHT_FACTOR</code> (default: 1e3).
Any variation weights accumulated during an event and larger than this factor
will be ignored and reset to 1.
</p>
<hr>
<a name="MPI-parallelization"></a>
<a name="MPI-parallelization-1"></a>
<h3 class="subsection">5.1.19 MPI parallelization</h3>
<p>MPI parallelization in Sherpa can be enabled using the configuration
option &lsquo;<samp>--enable-mpi</samp>&rsquo;. Sherpa supports
<a href="http://www.open-mpi.org/">OpenMPI</a>
and
<a href="http://www.mcs.anl.gov/research/projects/mpich2/">MPICH2</a>
. For detailed instructions on how to run a parallel program, please refer
to the documentation of your local cluster resources or the many excellent 
introductions on the internet. MPI parallelization is mainly intended to speed up
the integration process, as event generation can be parallelized trivially 
by starting multiple instances of Sherpa with different random seed, cf.
<a href="#RANDOM_005fSEED">RANDOM_SEED</a>. However, both the internal analysis module and the Root
NTuple writeout can be used with MPI. Note that these require substantial 
data transfer.
</p>
<p>Please note that the process information contained in the <code>Process</code>
directory for both Amegic and Comix needs to be generated without
MPI parallelization first. Therefore, first run
</p><pre class="verbatim">Sherpa -f &lt;run-card&gt; INIT_ONLY=1
</pre><p>and, in case of using Amegic, compile the libraries. Then start your
parallized integration, e.g.
</p><pre class="verbatim">mpirun -n &lt;n&gt; Sherpa -f &lt;run-card&gt;
</pre><hr>
<a name="Beam-Parameters"></a>
<a name="Beam-parameters"></a>
<h2 class="section">5.2 Beam parameters</h2>
<a name="index-BEAM_005f1"></a>
<a name="index-BEAM_005f2"></a>
<a name="index-BEAM_005fENERGY_005f1"></a>
<a name="index-BEAM_005fENERGY_005f2"></a>

<p>The setup of the colliding beams is covered by the <code>(beam)</code>
section of the steering file or the beam data file <code>Beam.dat</code>,
respectively, see <a href="#Input-structure">Input structure</a>. The <em>mandatory settings</em> to be made are
</p>
<ul>
<li> The initial beam particles specified through 
&lsquo;<samp>BEAM_1</samp>&rsquo; and &lsquo;<samp>BEAM_2</samp>&rsquo;, given by their PDG 
particle number. For (anti)protons and (positrons) electrons, 
for example, these are given by (-)2212 or (-)11, respectively. 
The code for photons is 22. 
</li><li> The energies of both incoming beams, defined through 
&lsquo;<samp>BEAM_ENERGY_1</samp>&rsquo; and &lsquo;<samp>BEAM_ENERGY_2</samp>&rsquo;, 
given in units of GeV. Beam energies may also be specified
as a second argument to &lsquo;<samp>BEAM_1</samp>&rsquo; and &lsquo;<samp>BEAM_2</samp>&rsquo;.
</li></ul>

<p>More options related to beamstrahlung and intrinsic transverse momentum can
be found in the following subsections.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Beam-Spectra">5.2.1 Beam Spectra</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">  Options related to beamstrahlung
</td></tr>
<tr><td align="left" valign="top"><a href="#Intrinsic-Transverse-Momentum">5.2.2 Intrinsic Transverse Momentum</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"> Options related to primordial transverse momentum
</td></tr>
</table>

<hr>
<a name="Beam-Spectra"></a>
<a name="Beam-Spectra-1"></a>
<h3 class="subsection">5.2.1 Beam Spectra</h3>
<a name="index-BEAM_005fSPECTRUM_005f1"></a>
<a name="index-BEAM_005fSPECTRUM_005f2"></a>
<a name="index-SPECTRUM_005fFILE_005f1"></a>
<a name="index-SPECTRUM_005fFILE_005f2"></a>
<a name="index-BEAM_005fSMIN"></a>
<a name="index-BEAM_005fSMAX"></a>

<p>If desired, you can also specify spectra for beamstrahlung through
<code>BEAM_SPECTRUM_1</code> and <code>BEAM_SPECTRUM_2</code>. The possible values are
Possible values are
</p><dl compact="compact">
<dt>&lsquo;<samp>Monochromatic</samp>&rsquo;</dt>
<dd><p>The beam energy is unaltered and the beam particles remain unchanged. 
That is the default and corresponds to ordinary hadron-hadron or 
lepton-lepton collisions.
</p></dd>
<dt>&lsquo;<samp>Laser_Backscattering</samp>&rsquo;</dt>
<dd><p>This can be used to describe the backscattering of a laser beam
off initial leptons. The energy distribution of the emerging 
photon beams is modelled by the CompAZ parametrization, see
[<a href="#Zarnecki2002qr">Zar02</a>].
Note that this parametrization is valid only for the proposed 
TESLA photon collider, as various assumptions about the laser 
parameters and the initial lepton beam energy have been made.
See details below.
</p></dd>
<dt>&lsquo;<samp>Simple_Compton</samp>&rsquo;</dt>
<dd><p>This corresponds to a simple light backscattering 
off the initial lepton beam and produces initial-state 
photons with a corresponding energy spectrum.  See details below.
</p></dd>
<dt>&lsquo;<samp>EPA</samp>&rsquo;</dt>
<dd><p>This enables the equivalent photon approximation for
colliding protons, see [<a href="#Archibald2008aa">Arc08</a>]. The resulting beam particles are photons that 
follow a dipole form factor parametrization, cf. [<a href="#Budnev1974de">Bud74</a>].
The authors would like to thank T. Pierzchala for his help in
implementing and testing the corresponding code. See details below.
</p></dd>
<dt>&lsquo;<samp>Spectrum_Reader</samp>&rsquo;</dt>
<dd><p>A user defined spectrum is used to describe the energy spectrum
of the assumed new beam particles. The name of the corresponding
spectrum file needs to be given through the keywords
<code>SPECTRUM_FILE_1</code> and <code>SPECTRUM_FILE_2</code>.
</p></dd>
</dl>

<p>The <code>BEAM_SMIN</code> and <code>BEAM_SMAX</code> parameters may be used to specify the
minimum/maximum fraction of cms energy
squared after Beamstrahlung. The reference value is the total centre
of mass energy squared of the collision, <em>not</em> the 
centre of mass energy after eventual Beamstrahlung.
<br>
The parameter can be specified using the internal interpreter, see
<a href="#Interpreter">Interpreter</a>, e.g. as &lsquo;<samp>BEAM_SMIN sqr(20/E_CMS)</samp>&rsquo;.
</p>
<hr>
<a name="Laser-Backscattering"></a>
<h4 class="subsubsection">5.2.1.1 Laser Backscattering</h4>
<a name="index-E_005fLASER_005f"></a>
<a name="index-E_005fLASER_005f-1"></a>
<a name="index-P_005fLASER_005f"></a>
<a name="index-P_005fLASER_005f-1"></a>
<a name="index-LASER_005fMODE"></a>
<a name="index-LASER_005fANGLES"></a>
<a name="index-LASER_005fNONLINEARITY"></a>
<p>The energy distribution of the photon beams is modelled by the CompAZ
parametrisation, see [<a href="#Zarnecki2002qr">Zar02</a>], with various assumptions
valid only for the proposed TESLA photon collider. The laser energies
can be set by <code>E_LASER_1/2</code> for the respective beam. <code>P_LASER_1/2</code>
sets their polarisations, defaulting to <code>0.</code>. The <code>LASER_MODE</code>
takes the values <code>-1</code>, <code>0</code>, and <code>1</code>, defaulting to <code>0</code>.
<code>LASER_ANGLES</code> and <code>LASER_NONLINEARITY</code> take the values <code>On</code>
and <code>Off</code>, both defaulting to <code>Off</code>.
</p>
<hr>
<a name="Simple-Compton"></a>
<h4 class="subsubsection">5.2.1.2 Simple Compton</h4>
<p>This corresponds to a simple light backscattering off the initial lepton
beam and produces initial-state photons with a corresponding energy spectrum.
It is a special case of the above Laser Backscattering with
<code>LASER_MODE=-1</code>.
</p>
<hr>
<a name="EPA"></a>
<h4 class="subsubsection">5.2.1.3 EPA</h4>
<a name="index-EPA_005fq2Max_005f1"></a>
<a name="index-EPA_005fq2Max_005f2"></a>
<a name="index-EPA_005fptMin_005f1"></a>
<a name="index-EPA_005fptMin_005f2"></a>
<a name="index-EPA_005fForm_005fFactor_005f1"></a>
<a name="index-EPA_005fForm_005fFactor_005f2"></a>
<a name="index-EPA_005fAlphaQED"></a>

<p>The equivalent photon approximation,
cf. [<a href="#Archibald2008aa">Arc08</a>], [<a href="#Budnev1974de">Bud74</a>],
has a few free parameters:
</p><dl compact="compact">
<dt>&lsquo;<samp>EPA_q2Max_1/2</samp>&rsquo;</dt>
<dd><p>Parameter of the EPA spectrum of the respective beam, defaults to <code>2.</code>
in units of GeV squared.
</p></dd>
<dt>&lsquo;<samp>EPA_ptMin_1/2</samp>&rsquo;</dt>
<dd><p>Infrared regulator to EPA spectrum. Given in GeV, the value must be
between <code>0.</code> and <code>1.</code> for EPA approximation to hold.
Defaults to <code>0.</code>, i.e. the spectrum
has to be regulated by cuts on the observable, cf <a href="#Selectors">Selectors</a>.
</p></dd>
<dt>&lsquo;<samp>EPA_Form_Factor_1/2</samp>&rsquo;</dt>
<dd><p>Form factor model to be used on the respective beam. The options are
<code>0</code> (pointlike), <code>1</code> (homogeneously charged sphere,
<code>2</code> (gaussian shaped nucleus), and <code>3</code> (homogeneously charged
sphere, smoothed at low and high x). Applicable only to heavy ion beams.
Defaults to <code>0</code>.
</p></dd>
<dt>&lsquo;<samp>EPA_AlphaQED</samp>&rsquo;</dt>
<dd><p>Value of alphaQED to be used in the EPA. Defaults to <code>0.0072992701</code>.
</p></dd>
</dl>

<hr>
<a name="Intrinsic-Transverse-Momentum"></a>
<a name="Intrinsic-Transverse-Momentum-1"></a>
<h3 class="subsection">5.2.2 Intrinsic Transverse Momentum</h3>
<a name="index-K_005fPERP_005fMEAN_005f1"></a>
<a name="index-K_005fPERP_005fMEAN_005f2"></a>
<a name="index-K_005fPERP_005fSIGMA_005f1"></a>
<a name="index-K_005fPERP_005fSIGMA_005f2"></a>
<a name="index-BEAM_005fREMNANTS"></a>

<dl compact="compact">
<dt>&lsquo;<samp>K_PERP_MEAN_1</samp>&rsquo;</dt>
<dd><p>This parameter specifies the mean intrinsic transverse
momentum for the first (left) beam in case of hadronic 
beams, such as protons.
<br>
The default value for protons is 0.8 GeV.
</p>
</dd>
<dt>&lsquo;<samp>K_PERP_MEAN_2</samp>&rsquo;</dt>
<dd><p>This parameter specifies the mean intrinsic transverse
momentum for the second (right) beam in case of hadronic 
beams, such as protons.
<br>
The default value for protons is 0.8 GeV.
</p>
</dd>
<dt>&lsquo;<samp>K_PERP_SIGMA_1</samp>&rsquo;</dt>
<dd><p>This parameter specifies the width of the Gaussian distribution
of intrinsic transverse momentum for the first (left) beam in 
case of hadronic beams, such as protons.
<br>
The default value for protons is 0.8 GeV.
</p>
</dd>
<dt>&lsquo;<samp>K_PERP_SIGMA_2</samp>&rsquo;</dt>
<dd><p>This parameter specifies the width of the Gaussian distribution
of intrinsic transverse momentum for the first (left) beam in 
case of hadronic beams, such as protons.
<br>
The default value for protons is 0.8 GeV.
</p>
</dd>
</dl>

<p>If the option &lsquo;<samp>BEAM_REMNANTS=0</samp>&rsquo; is specified, pure parton-level
events are simulated, i.e. no beam remnants are generated. Accordingly,
partons entering the hard scattering process do not acquire primordial
transverse momentum.
</p><hr>
<a name="ISR-Parameters"></a>
<a name="ISR-parameters"></a>
<h2 class="section">5.3 ISR parameters</h2>
<a name="index-BUNCH_005f1"></a>
<a name="index-BUNCH_005f2"></a>
<a name="index-ISR_005fSMIN"></a>
<a name="index-ISR_005fSMAX"></a>
<a name="index-ISR_005fE_005fORDER"></a>
<a name="index-ISR_005fE_005fSCHEME"></a>
<a name="index-PDF_005fLIBRARY"></a>
<a name="index-PDF_005fLIBRARY_005f1"></a>
<a name="index-PDF_005fLIBRARY_005f2"></a>
<a name="index-PDF_005fSET"></a>
<a name="index-PDF_005fSET_005f1"></a>
<a name="index-PDF_005fSET_005f2"></a>
<a name="index-PDF_005fSET_005fVERSION"></a>
<a name="index-SHOW_005fPDF_005fSETS"></a>

<p>The following parameters are used to steer the setup of beam substructure and
initial state radiation (ISR). They may be set in the
<code>(isr)</code> section of the run-card, see <a href="#Input-structure">Input structure</a>.
</p>
<dl compact="compact">
<dt><code>BUNCH_1/BUNCH_2</code></dt>
<dd><p>Specify the PDG ID of the first
(left) and second (right) bunch particle, i.e. the particle after eventual 
Beamstrahlung specified through the beam parameters, see <a href="#Beam-Parameters">Beam parameters</a>.
Per default these are taken to be identical to the parameters 
<code>BEAM_1</code>/<code>BEAM_2</code>, assuming the default beam spectrum is
Monochromatic. In case the Simple Compton or Laser Backscattering spectra are
enabled the bunch particles would have to be set to 22, the PDG code of the
photon.
</p>
</dd>
<dt><code>ISR_SMIN/ISR_SMAX</code></dt>
<dd><p>This parameter specifies the minimum fraction of cms energy
squared after ISR. The reference value is the total centre
of mass energy squared of the collision, <em>not</em> the 
centre of mass energy after eventual Beamstrahlung.
<br>
The parameter can be specified using the internal interpreter,
see <a href="#Interpreter">Interpreter</a>, e.g. as &lsquo;<samp>ISR_SMIN=sqr(20/E_CMS)</samp>&rsquo;.
</p></dd>
</dl>

<p>Sherpa provides access to a variety of structure functions.
They can be configured with the following parameters.
</p>
<dl compact="compact">
<dt><code>PDF_LIBRARY</code></dt>
<dd><p>Takes a space separated list of PDF interfaces to load. If the two colliding beams
are of different type, e.g. protons and electrons or photons and electrons,
it is possible to specify two different PDF libraries using <a name="PDF_005fLIBRARY_005f1"></a>
&lsquo;<samp>PDF_LIBRARY_1</samp>&rsquo; and <a name="PDF_005fLIBRARY_005f2"></a> &lsquo;<samp>PDF_LIBRARY_2</samp>&rsquo;. 
The following options are distributed with Sherpa:
</p><dl compact="compact">
<dt><code>LHAPDFSherpa</code></dt>
<dd><p>Use PDF&rsquo;s from LHAPDF [<a href="#Whalley2005nh">Wha05</a>]. The interface is only
available if Sherpa has been compiled with support for LHAPDF, see
<a href="#Installation">Installation</a>.
</p></dd>
<dt><code>CT12Sherpa</code></dt>
<dd><p>Built-in library for some PDF sets from the CTEQ collaboration, cf.
[<a href="#Gao2013xoa">Gao13</a>].
</p></dd>
<dt><code>CT10Sherpa</code></dt>
<dd><p>Built-in library for some PDF sets from the CTEQ collaboration, cf.
[<a href="#Lai2010vv">Lai10</a>]. This is the
default, if Sherpa has not been compiled with LHAPDF support.
</p></dd>
<dt><code>CTEQ6Sherpa</code></dt>
<dd><p>Built-in library for some PDF sets from the CTEQ collaboration, cf.
[<a href="#Nadolsky2008zw">Nad08</a>].
</p></dd>
<dt><code>MSTW08Sherpa</code></dt>
<dd><p>Built-in library for PDF sets from the MSTW group, cf. [<a href="#Martin2009iq">Mar09a</a>].
</p></dd>
<dt><code>MRST04QEDSherpa</code></dt>
<dd><p>Built-in library for photon PDF sets from the MRST group, cf. [<a href="#Martin2004dh">Mar04</a>].
</p></dd>
<dt><code>MRST01LOSherpa</code></dt>
<dd><p>Built-in library for the 2001 leading-order PDF set from the MRST group, cf. [<a href="#Martin2001es">Mar01</a>].
</p></dd>
<dt><code>MRST99Sherpa</code></dt>
<dd><p>Built-in library for the 1999 PDF sets from the MRST group, cf. [<a href="#Martin1999ww">Mar99</a>].
</p></dd>
<dt><code>GRVSherpa</code></dt>
<dd><p>Built-in library for the GRV photon PDF [<a href="#Gluck1991jc">Glu91a</a>], [<a href="#Gluck1991ee">Glu91</a>]
</p></dd>
<dt><code>PDFESherpa</code></dt>
<dd><p>Built-in library for the electron structure function.
The perturbative order of the fine structure constant can be set using the
parameter <a name="ISR_005fE_005fORDER"></a> <code>ISR_E_ORDER</code> (default: 1). The
switch <a name="ISR_005fE_005fSCHEME"></a> <code>ISR_E_SCHEME</code> allows
to set the scheme of respecting non-leading terms. Possible options are 0
(&quot;mixed choice&quot;), 1 (&quot;eta choice&quot;), or 2 (&quot;beta choice&quot;, default).
</p></dd>
<dt><code>None</code></dt>
<dd><p>No PDF. Fixed beam energy.
</p></dd>
</dl>
<br>
<p>Furthermore it is simple to build an external interface to an arbitrary PDF
and load that dynamically in the Sherpa run. See <a href="#External-PDF">External PDF</a> for
instructions.
</p></dd>
<dt><code>PDF_SET</code></dt>
<dd><p>Specifies the PDF set for hadronic bunch particles. All sets available in the
chosen <code>PDF_LIBRARY</code> can be figured by running Sherpa with the parameter
<code>SHOW_PDF_SETS=1</code>, e.g.:
</p><pre class="verbatim">  Sherpa PDF_LIBRARY=CTEQ6Sherpa SHOW_PDF_SETS=1
</pre><p>If the two colliding beams are of different type, e.g. protons and electrons
or photons and electrons, it is possible to specify two different PDF sets using 
<a name="PDF_005fSET_005f1"></a> &lsquo;<samp>PDF_SET_1</samp>&rsquo; and <a name="PDF_005fSET_005f2"></a> &lsquo;<samp>PDF_SET_2</samp>&rsquo;.
</p></dd>
<dt><code>PDF_SET_VERSION</code></dt>
<dd><p>This parameter allows to eventually select a specific version (member)
within the chosen PDF set. Specifying a negative value, e.g.
</p><pre class="verbatim">  PDF_LIBRARY LHAPDFSherpa;
  PDF_SET NNPDF12_100.LHgrid; PDF_SET_VERSION -100;
</pre><p>results in Sherpa sampling all sets 1..100, which can be used to obtain 
the averaging required when employing PDF&rsquo;s from the NNPDF 
collaboration [<a href="#Ball2008by">Bal08</a>], [<a href="#Ball2009mk">Bal09</a>].
</p></dd>
</dl>
<hr>
<a name="Models"></a>
<a name="Models-1"></a>
<h2 class="section">5.4 Models</h2>
<a name="index-MODEL"></a>

<p>The main switch <code>MODEL</code> in the <code>(run){...}(run)</code> section of
the run card sets the model that Sherpa uses throughout the simulation
run. The default is &lsquo;<samp>SM</samp>&rsquo;, the built-in Standard Model
implementation of Sherpa. For BSM simulations, Sherpa offers an option
to use the Universal FeynRules Output Format (UFO)
[<a href="#Degrande2011ua">Deg11</a>].
</p>
<p>Please note: AMEGIC can only be used for the built-in models (SM and
HEFT). For anything else, please use Comix.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Built_002din-Models">5.4.1 Built-in Models</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">    SM and Higgs Effective Theory
</td></tr>
<tr><td align="left" valign="top"><a href="#UFO-Model-Interface">5.4.2 UFO Model Interface</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Generic Interface for BSM models in the UFO format
</td></tr>
</table>

<hr>
<a name="Built_002din-Models"></a>
<a name="Built_002din-Models-1"></a>
<h3 class="subsection">5.4.1 Built-in Models</h3>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#SM">5.4.1.1 Standard Model</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#HEFT">5.4.1.2 Effective Higgs Couplings</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Higgs Effective Coupling
</td></tr>
</table>

<hr>
<a name="SM"></a>
<a name="Standard-Model"></a>
<h4 class="subsubsection">5.4.1.1 Standard Model</h4>
<a name="index-1_002fALPHAQED_00280_0029"></a>
<a name="index-SIN2THETAW"></a>
<a name="index-VEV"></a>
<a name="index-LAMBDA"></a>
<a name="index-EW_005fSCHEME"></a>
<a name="index-CKMORDER"></a>
<a name="index-CABIBBO"></a>
<a name="index-A"></a>
<a name="index-ETA"></a>
<a name="index-RHO"></a>
<a name="index-ALPHAS_0028MZ_0029"></a>
<a name="index-ALPHAQED_005fDEFAULT_005fSCALE"></a>
<a name="index-ORDER_005fALPHAS"></a>
<a name="index-USE_005fPDF_005fALPHAS"></a>
<a name="index-WIDTH_005fSCHEME"></a>
<a name="index-MASS_005b_003cid_003e_005d"></a>
<a name="index-MASSIVE_005b_003cid_003e_005d"></a>
<a name="index-WIDTH_005b_003cid_003e_005d"></a>
<a name="index-ACTIVE_005b_003cid_003e_005d"></a>
<a name="index-STABLE_005b_003cid_003e_005d"></a>
<a name="index-YUKAWA_005b_003cid_003e_005d"></a>

<p>The SM inputs for the electroweak sector can be given in four different 
schemes, that correspond to different choices of which SM physics 
parameters are considered fixed and which are derived from the given 
quantities. The input schemes are selected through the <code>EW_SCHEME</code> 
parameter, whose default is &lsquo;<samp>1</samp>&rsquo;. The following options are provided:
</p><ul>
<li>  Case <code>0</code>:
  
<p>    all EW parameters are explicitly given.
    Here the W, Z and Higgs masses are taken as inputs, and
    the parameters <code>1/ALPHAQED(0)</code>, <code>SIN2THETAW</code>, <code>VEV</code>
    and <code>LAMBDA</code> have to be specified. The fine structure constant
    does not run by default. It is evaluated at scale <code>ALPHAQED_DEFAULT_SCALE</code>,
    which defaults to the Z mass squared (note that this scale has to be specified
    in GeV squared). The parameters <code>SIN2THETAW</code>, 
    <code>VEV</code>, and <code>LAMBDA</code> thereby specify the weak mixing angle,
    the Higgs field vacuum expectation value, and the Higgs quartic
    coupling respectively.
</p>
<p>    Note that this mode allows to violate the tree-level relations between
    some of the parameters and can thus not be used with the complex mass
    scheme (cf. below).
  </p></li><li>  Case <code>1</code>:
  
<p>    all EW parameters are calculated from the W, Z and Higgs masses and
    <code>1/ALPHAQED(0)</code> using tree-level relations.
  </p></li><li>  Case <code>3</code>:
  
<p>    this choice corresponds to the G_mu-scheme. The EW parameters are 
    calculated out of the weak gauge boson masses M_W, M_Z, the Higgs
    boson mass M_H and the Fermi constant <code>GF</code> using tree-level relations.
  </p></li></ul>

<p>The electro-weak coupling is by default not running. If its running has been
enabled (cf. <a href="#COUPLINGS">COUPLINGS</a>), one can specify its value at zero momentum
transfer as input value by <code>1/ALPHAQED(0)</code>.
</p>
<p>To account for quark mixing the CKM matrix elements have to be assigned. 
For this purpose the Wolfenstein parametrization [<a href="#Wolfenstein1983yz">Wol83</a>] is
employed. The order of expansion in the lambda parameter is defined
through <code>CKMORDER</code>, with default &lsquo;<samp>0</samp>&rsquo; corresponding to a unit matrix.
The parameter convention for higher expansion terms reads:
</p>
<ul>
<li>  <code>CKMORDER = 1</code>, the <code>CABIBBO</code> parameter has to be set,
it parametrizes lambda and has the default value &lsquo;<samp>0.2272</samp>&rsquo;.
</li><li>  <code>CKMORDER = 2</code>, in addition the value of <code>A</code> has to
be set, its default is &lsquo;<samp>0.818</samp>&rsquo;. 
</li><li>  <code>CKMORDER = 3</code>, the order lambda^3 expansion, <code>ETA</code>
and <code>RHO</code> have to be specified. Their default values are &lsquo;<samp>0.349</samp>&rsquo; 
and &lsquo;<samp>0.227</samp>&rsquo;, respectively.
</li></ul>


<p>The remaining parameter to fully specify the Standard Model 
is the strong coupling constant at the Z-pole, given through
<code>ALPHAS(MZ)</code>. Its default value is &lsquo;<samp>0.118</samp>&rsquo;. If the setup
at hand involves hadron collisions and thus PDFs, the value of the
strong coupling constant is automatically set consistent with the PDF fit
and can not be changed by the user. If Sherpa is compiled with LHAPDF
support, it is also possible to use the alphaS evolution provided
in LHAPDF by specifying <code>USE_PDF_ALPHAS=1</code>. The perturbative order
of the running of the strong coupling can be set via <code>ORDER_ALPHAS</code>,
where the default &lsquo;<samp>0</samp>&rsquo; corresponds to one-loop running and 
<code>1</code>,<code>2</code>,<code>3</code> to 2,3,4-loops, respectively. If the setup
at hand involves PDFs, this parameter is set consistent with the information
provided by the PDF set.
</p>
<p>If unstable particles (e.g. W/Z bosons) appear as intermediate propagators
in the process, Sherpa uses the complex mass scheme to construct MEs
in a gauge-invariant way. For full consistency with this scheme,
by default the dependent EW parameters are also calculated from the complex
masses (&lsquo;<samp>WIDTH_SCHEME=CMS</samp>&rsquo;), yielding complex values e.g. for
the weak mixing angle.
To keep the parameters real one can set &lsquo;<samp>WIDTH_SCHEME=Fixed</samp>&rsquo;. This may
spoil gauge invariance though.
</p>
<p>With the following switches it is possible to change the properties of
all fundamental particles:
</p>
<dl compact="compact">
<dt><code>MASS[&lt;id&gt;]</code></dt>
<dd><p>Sets the mass (in GeV) of the particle with PDG id &lsquo;<samp>&lt;id&gt;</samp>&rsquo;.
<br>
Masses of particles and corresponding anti-particles are always set
simultaneously.
<br>
For particles with Yukawa couplings, those are enabled/disabled consistent with the
mass (taking into account the MASSIVE flag) by default, but that can be modified
using the &lsquo;<samp>YUKAWA[&lt;id&gt;]</samp>&rsquo; parameter. Note that by default the Yukawa
couplings are treated as running, cf. <a href="#YUKAWA_005fMASSES">YUKAWA_MASSES</a>.
</p>
</dd>
<dt><code>MASSIVE[&lt;id&gt;]</code></dt>
<dd><p>Specifies whether the finite mass of particle with PDG id &lsquo;<samp>&lt;id&gt;</samp>&rsquo;
is to be considered in matrix-element calculations or not.
</p>
</dd>
<dt><code>WIDTH[&lt;id&gt;]</code></dt>
<dd><p>Sets the width (in GeV) of the particle with PDG id &lsquo;<samp>&lt;id&gt;</samp>&rsquo;.
</p>
</dd>
<dt><code>ACTIVE[&lt;id&gt;]</code></dt>
<dd><p>Enables/disables the particle with PDG id &lsquo;<samp>&lt;id&gt;</samp>&rsquo;.
</p>
</dd>
<dt><code>STABLE[&lt;id&gt;]</code></dt>
<dd><p>Sets the particle with PDG id &lsquo;<samp>&lt;id&gt;</samp>&rsquo; either stable or unstable according
to the following options:
</p><dl compact="compact">
<dt>&lsquo;<samp>0</samp>&rsquo;</dt>
<dd><p>Particle and anti-particle are unstable
</p></dd>
<dt>&lsquo;<samp>1</samp>&rsquo;</dt>
<dd><p>Particle and anti-particle are stable
</p></dd>
<dt>&lsquo;<samp>2</samp>&rsquo;</dt>
<dd><p>Particle is stable, anti-particle is unstable
</p></dd>
<dt>&lsquo;<samp>3</samp>&rsquo;</dt>
<dd><p>Particle is unstable, anti-particle is stable
</p></dd>
</dl>
<p>This option applies to decays of hadrons (cf. <a href="#Hadron-decays">Hadron decays</a>) as well
as particles produced in the hard scattering (cf. <a href="#Hard-decays">Hard decays</a>).
For the latter, alternatively the decays can be specified explicitly in the
process setup (see <a href="#Processes">Processes</a>) to avoid the narrow-width approximation.
</p>
</dd>
<dt><code>PRIORITY[&lt;id&gt;]</code></dt>
<dd><p>Allows to overwrite the default automatic flavour sorting in a process by specifying a priority for the given flavour. This way one can identify certain particles which are part of a container (e.g. massless b-quarks), such that their position can be used reliably in selectors and scale setters.
</p>
</dd>
</dl>

<p>Note: To set properties of hadrons, you can use the same switches (except for
<code>MASSIVE</code>) in the fragmentation section, see <a href="#Hadronization">Hadronization</a>.
</p><hr>
<a name="HEFT"></a>
<a name="Effective-Higgs-Couplings"></a>
<h4 class="subsubsection">5.4.1.2 Effective Higgs Couplings</h4>
<a name="index-FINITE_005fTOP_005fMASS"></a>
<a name="index-FINITE_005fW_005fMASS"></a>
<a name="index-DEACTIVATE_005fPPH"></a>
<a name="index-DEACTIVATE_005fGGH"></a>

<p>The HEFT describes the effective coupling of gluons and photons to Higgs bosons
via a top-quark loop, and a W-boson loop in case of photons. This supplement 
to the Standard Model can be invoked by specifying <code>MODEL = HEFT</code> in 
the <code>(model)</code> section of the run card.
</p>
<p>The effective coupling of gluons to the Higgs boson, g_ggH, can be
calculated either for a finite top-quark mass or in the limit of an
infinitely heavy top using the switch <code>FINITE_TOP_MASS=1</code> or
<code>FINITE_TOP_MASS=0</code>, respectively. Similarily, the
photon-photon-Higgs coupling, g_ppH, can be calculated both for finite
top and/or W masses or in the infinite mass limit using the switches
<code>FINITE_TOP_MASS</code> and <code>FINITE_W_MASS</code>. The default choice for
both is the infinite mass limit in either case. Note that these switches
affect only the calculation of the value of the effective coupling
constants. Please refer to the example setup <a href="#LHC_005fHJets_005fFiniteMt">H+jets production in gluon fusion with finite top mass effects</a>
for information on how to include finite top quark mass effects on a
differential level.
</p>
<p>Either one of these couplings can be switched off using the 
<code>DEACTIVATE_GGH=1</code> and <code>DEACTIVATE_PPH=1</code> switches. 
Both default to 0.
</p>

<hr>
<a name="UFO-Model-Interface"></a>
<a name="UFO-Model-Interface-1"></a>
<h3 class="subsection">5.4.2 UFO Model Interface</h3>
<a name="index-UFO_005fPARAM_005fCARD"></a>

<p>To use a model generated by the FeynRules package
[<a href="#Christensen2008py">Chr08</a>],[<a href="#Christensen2009jx">Chr09</a>], the model must be
made available to Sherpa by running
</p><pre class="verbatim">  &lt;prefix&gt;/bin/Sherpa-generate-model &lt;path-to-ufo-model&gt;
</pre><p>where &lt;path-to-ufo-model&gt; specifies the location of the directory where
the UFO model can be found. UFO support must be enabled using the
&lsquo;<samp>--enable-ufo</samp>&rsquo; option of the configure script, as described in
<a href="#Installation">Installation</a>. This requires Python version 2.6 or later and an
installation of SCons.
</p>
<p>The above command generates source code for the UFO model, compiles it,
and installs the corresponding library, making it available for event
generation. Python, SCons, and the UFO model directory are not required
for event generation once the above command has finished. Note that the
installation directory for the created library and the paths to Sherpa
libraries and headers are predetermined automatically durin the
installation of Sherpa. If the Sherpa installation is moved afterwards
or if the user does not have the necessary permissions to install the
new library in the predetermined location, these paths can be set
manually. Pleas run
</p><pre class="verbatim">  &lt;prefix&gt;/bin/Sherpa-generate-model --help
</pre><p>for information on the relevan command line arguments.
</p>
<p>An example run card will be written to the working directory while the
model is generated with <code>Sherpa-generate-model</code>. This run card
shows the syntax for the respective model parameters and can be used as
a template. It is also possible to use an external parameter card by
specifying the path to the card with the switch &lsquo;<samp>UFO_PARAM_CARD</samp>&rsquo;
in the <code>(run){...}(run)</code> section of the run card. Relative and
absolute file paths are allowed. This option allows it to use the native
UFO parameter cards, as used by MadGraph for example.
</p>
<p>Note that the use of the SM switches &lsquo;<samp>MASS[&lt;id&gt;]</samp>&rsquo;,
&lsquo;<samp>MASSIVE[&lt;id&gt;]</samp>&rsquo;, &lsquo;<samp>WIDTH[&lt;id&gt;]</samp>&rsquo;, and &lsquo;<samp>STABLE[&lt;id&gt;]</samp>&rsquo;
is discouraged when using UFO models as the UFO model completely defines
all particle properties and their relation to the independent model
parameters. These model parameters should be set using the standard UFO
parameter syntax as shown in the example run card generated by the
<code>Sherpa-generate-model</code> command. 
</p>
<p>For parts of the simulation other than the hard process (hadronization,
underlying event, running of the SM couplings) Sherpa uses internal
default values for the Standard Model fermion masses if they are
massless in the UFO model. This is necessary for a meaningful
simulation. In the hard process however, the UFO model masses are always
respected.
</p>
<p>For an example UFO setup, see <a href="#MSSM_002fUFO">Event generation in the MSSM using UFO</a>. For more details on the
Sherpa interface to FeynRules please consult
[<a href="#Christensen2009jx">Chr09</a>],[<a href="#Hoeche2014kca">Hoe14c</a>].
</p>
<p>Please note that AMEGIC can only be used for the built-in models (SM and
HEFT). The use of UFO models is only supported by Comix.
</p>



<hr>
<a name="Matrix-Elements"></a>
<a name="Matrix-elements"></a>
<h2 class="section">5.5 Matrix elements</h2>

<p>The setup of matrix elements is covered by the &lsquo;(me)&rsquo; section of
the steering file or the ME data file &lsquo;ME.dat&rsquo;, respectively.
There are no mandatory settings to be made.
</p>
<p>The following parameters are used to steer the matrix element setup.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#ME_005fSIGNAL_005fGENERATOR">5.5.1 ME_SIGNAL_GENERATOR</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">     The matrix element generator(s).
</td></tr>
<tr><td align="left" valign="top"><a href="#RESULT_005fDIRECTORY">5.5.2 RESULT_DIRECTORY</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">        The directory to store integration results.
</td></tr>
<tr><td align="left" valign="top"><a href="#EVENT_005fGENERATION_005fMODE">5.5.3 EVENT_GENERATION_MODE</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">   The event generation mode.
</td></tr>
<tr><td align="left" valign="top"><a href="#SCALES">5.5.4 SCALES</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                  How to compute scales. 
</td></tr>
<tr><td align="left" valign="top"><a href="#COUPLING_005fSCHEME">5.5.5 COUPLING_SCHEME</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         Running of SM gauge couplings.
</td></tr>
<tr><td align="left" valign="top"><a href="#COUPLINGS">5.5.6 COUPLINGS</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">               How to evaluate couplings.
</td></tr>
<tr><td align="left" valign="top"><a href="#KFACTOR">5.5.7 KFACTOR</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                 Whether and how to apply a K-factor.
</td></tr>
<tr><td align="left" valign="top"><a href="#YUKAWA_005fMASSES">5.5.8 YUKAWA_MASSES</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Running of Yukawa couplings.
</td></tr>
<tr><td align="left" valign="top"><a href="#Dipole-subtraction">5.5.9 Dipole subtraction</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">      Parameters for calculations with dipole subtraction.
</td></tr>
</table>


<hr>
<a name="ME_005fSIGNAL_005fGENERATOR"></a>
<a name="ME_005fSIGNAL_005fGENERATOR-1"></a>
<h3 class="subsection">5.5.1 ME_SIGNAL_GENERATOR</h3>
<a name="index-ME_005fSIGNAL_005fGENERATOR"></a>
<p>The list of matrix element generators to be employed during the run.
When setting up hard processes from the &lsquo;<samp>(processes)</samp>&rsquo; section of the 
input file (see <a href="#Processes">Processes</a>), Sherpa calls these generators in order
to check whether either one is capable of generating the corresponding
matrix element. This parameter can also be set on the command line using
option &lsquo;<samp>-m</samp>&rsquo;, see <a href="#Command-line">Command line options</a>.
</p>
<p>The built-in generators are
</p>
<dl compact="compact">
<dt>&lsquo;<samp>Internal</samp>&rsquo;</dt>
<dd><p>Simple matrix element library, implementing a variety of 2-&gt;2 processes.
</p></dd>
<dt>&lsquo;<samp>Amegic</samp>&rsquo;</dt>
<dd><p>The AMEGIC++ generator published under [<a href="#Krauss2001iv">Kra01</a>]
</p></dd>
<dt>&lsquo;<samp>Comix</samp>&rsquo;</dt>
<dd><p>The <a href="http://comix.freacafe.de">Comix</a> generator published under
[<a href="#Gleisberg2008fv">Gle08</a>]
</p></dd>
</dl>

<p>It is possible to employ an external matrix element generator within Sherpa.
For advice on this topic please contact the authors, <a href="#Authors">Authors</a>.
</p>

<hr>
<a name="RESULT_005fDIRECTORY"></a>
<a name="RESULT_005fDIRECTORY-1"></a>
<h3 class="subsection">5.5.2 RESULT_DIRECTORY</h3>
<a name="index-RESULT_005fDIRECTORY"></a>
<p>This parameter specifies the name of the directory
which is used by Sherpa to store integration results
and phasespace mappings. The default is &lsquo;<samp>Results/</samp>&rsquo;.
It can also be set using the command line parameter &lsquo;<samp>-r</samp>&rsquo;,
see <a href="#Command-line">Command line options</a>. The directory will be created automatically,
unless the option &lsquo;<samp>GENERATE_RESULT_DIRECTORY=0</samp>&rsquo; is specified.
Its location is relative to a potentially specified input path,
see <a href="#Command-line">Command line options</a>.
</p>

<hr>
<a name="EVENT_005fGENERATION_005fMODE"></a>
<a name="EVENT_005fGENERATION_005fMODE-1"></a>
<h3 class="subsection">5.5.3 EVENT_GENERATION_MODE</h3>
<a name="index-EVENT_005fGENERATION_005fMODE"></a>
<a name="index-OVERWEIGHT_005fTHRESHOLD"></a>
<p>This parameter specifies the event generation mode.
It can also be set on the command line
using option &lsquo;<samp>-w</samp>&rsquo;, see <a href="#Command-line">Command line options</a>.
The three possible options are:
</p>
<dl compact="compact">
<dt>&lsquo;<samp>Weighted</samp>&rsquo;</dt>
<dd><p>(shortcut &lsquo;<samp>W</samp>&rsquo;) Weighted events.
</p></dd>
<dt>&lsquo;<samp>Unweighted</samp>&rsquo;</dt>
<dd><p>(shortcut &lsquo;<samp>U</samp>&rsquo;)
Events with constant weight, which have been unweighted
against the maximum determined during phase space integration.
In case of rare events with <code>w &gt; max</code> the parton level event
is repeated <code>floor(w/max)</code> times and the remainder is unweighted.
While this leads to unity weights for all events it can be misleading since
the statistical impact of a high-weight event is not accounted for. In the
extreme case this can lead to a high-weight event looking like a significant
bump in distributions (in particular after the effects of the parton shower).
</p></dd>
<dt>&lsquo;<samp>PartiallyUnweighted</samp>&rsquo;</dt>
<dd><p>(shortcut &lsquo;<samp>P</samp>&rsquo;)
Identical to &lsquo;<samp>Unweighted</samp>&rsquo; events, but if the weight exceeds the maximum
determined during the phase space integration, the event will carry a weight
of <code>w/max</code> to correct for that. This is the recommended option to
generate unweighted events and the default setting in Sherpa.
</p></dd>
</dl>

<p>For &lsquo;<samp>Unweighted</samp>&rsquo; and &lsquo;<samp>PartiallyUnweighted</samp>&rsquo; events the user may
set &lsquo;<samp>OVERWEIGHT_THRESHOLD=&lt;maxweight&gt;</samp>&rsquo; to cap the maximal over-weight
<code>w/max</code> taken into account.
</p>
<hr>
<a name="SCALES"></a>
<a name="SCALES-1"></a>
<h3 class="subsection">5.5.4 SCALES</h3>
<a name="index-SCALES"></a>
<p>This parameter specifies how to compute the renormalization and
factorization scale and potential additional scales.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Scale-setters">5.5.4.1 Scale setters</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Custom-scale-implementation">5.5.4.2 Custom scale implementation</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Predefined-scale-tags">5.5.4.3 Predefined scale tags</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Scale-schemes-for-NLO-calculations">5.5.4.4 Scale schemes for NLO calculations</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Explicit-scale-variations">5.5.4.5 Explicit scale variations</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#METS-scale-setting-with-multiparton-core-processes">5.5.4.6 METS scale setting with multiparton core processes</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<p>Sherpa provides several built-in scale setting schemes. For each scheme 
the scales are then set using expressions understood by the <a href="#Interpreter">Interpreter</a>. 
Each scale setter&rsquo;s syntax is 
</p><pre class="verbatim">SCALES &lt;scale-setter&gt;{&lt;scale-definition&gt;}
</pre><p>to define a single scale for both the factorisation and renormalisation scale. 
They can be set to different values using
</p><pre class="verbatim">SCALES &lt;scale-setter&gt;{&lt;fac-scale-definition&gt;}{&lt;ren-scale-definition&gt;}
</pre>
<p>In parton shower matched/merged calculations a third perturbative scale
is present, the resummation or parton shower starting scale. It can be
set by the user in the third argument like
</p><pre class="verbatim">SCALES &lt;scale-setter&gt;{&lt;fac-scale-definition&gt;}{&lt;ren-scale-definition&gt;}{&lt;res-scale-definition&gt;}
</pre><p>If the final state of your hard scattering process contains QCD partons,
their kinematics fix the resummation scale for subsequent emissions
(cf. the description of the &lsquo;<samp>METS</samp>&rsquo; scale setter below).  If
instead you want to specify your own resummation scale also in such a
case, you have to set <code>CSS_RESPECT_Q2=1</code> and use the third argument
to specify your resummation scale as above.
</p>
<p><b>Note: for all scales their squares have to be given.</b> See
<a href="#Predefined-scale-tags">Predefined scale tags</a> for some predefined scale tags.
</p>
<p>More than three scales can be set as well to be subsequently used, e.g.
by different couplings, see <a href="#COUPLINGS">COUPLINGS</a>.
</p>


<hr>
<a name="Scale-setters"></a>
<a name="Scale-setters-1"></a>
<h4 class="subsubsection">5.5.4.1 Scale setters</h4>

<p>The scale setter options which are currently available are
</p><dl compact="compact">
<dt>&lsquo;<samp>VAR</samp>&rsquo;</dt>
<dd>
<p>The variable scale setter is the simplest scale setter available. Scales
are simply specified by additional parameters in a form which is understood
by the internal interpreter, see <a href="#Interpreter">Interpreter</a>. If, for example the invariant 
mass of the lepton pair in Drell-Yan production is the desired scale,
the corresponding setup reads
</p><pre class="verbatim">SCALES VAR{Abs2(p[2]+p[3])}
</pre><p>Renormalization and factorization scales can be chosen differently.
For example in Drell-Yan + jet production one could set
</p><pre class="verbatim">SCALES VAR{Abs2(p[2]+p[3])}{MPerp2(p[2]+p[3])}
</pre>
</dd>
<dt>&lsquo;<samp>FASTJET</samp>&rsquo;</dt>
<dd><p>If <a href="http://www.fastjet.fr">FastJet</a> is enabled by including 
<code>--enable-fastjet=/path/to/fastjet</code> in the <code>configure</code> options, 
this scale setter can be used to set a scale based on jet-, rather than 
parton-momenta.
</p>
<p>The final state parton configuration is first clustered using FastJet and 
resulting jet momenta are then added back to the list of non strongly 
interacting particles. The numbering of momenta therefore stays effectively 
the same as in standard Sherpa, except that final state partons are replaced 
with jets, if applicable (a parton might not pass the jet criteria and get 
&quot;lost&quot;). In particular, the indices of the initial state partons and all EW 
particles are uneffected. Jet momenta can then be accessed as described in 
<a href="#Predefined-scale-tags">Predefined scale tags</a> through the identifiers <code>p[i]</code>, 
and the nodal values of the clustering sequence can be used through <code>MU_n2</code>.
The syntax is
</p>
<pre class="verbatim">SCALES FASTJET[&lt;jet-algo-parameter&gt;]{&lt;scale-definition&gt;}
</pre>
<p>Therein the parameters of the jet algorithm to be used to define the jets 
are given as a comma separated list of 
</p>
<ul>
<li> the jet algorithm <code>A:kt,antikt,cambridge,siscone</code> 
      (default <code>antikt</code>)
</li><li> phase space restrictions, i.e. <code>PT:&lt;min-pt&gt;</code>, <code>ET:&lt;min-et&gt;</code>, 
      <code>Eta:&lt;max-eta&gt;</code>, <code>Y:&lt;max-rap&gt;</code> (otherwise unrestricted)
</li><li> radial parameter <code>R:&lt;rad-param&gt;</code> (default <code>0.4</code>)
</li><li> f-parameter for Siscone <code>f:&lt;f-param&gt;</code> (default <code>0.75</code>)
</li><li> recombination scheme <code>C:E,pt,pt2,Et,Et2,BIpt,BIpt2</code> 
      (default <code>E</code>)
</li><li> b-tagging mode <code>B:0,1,2</code> (default <code>0</code>)
      This parameter, if specified different from its default 0, allows
      to use b-tagged jets only, based on the parton-level constituents of the jets.
      There are two options: With <code>B:1</code> both b and anti-b quarks are
      counted equally towards b-jets, while for <code>B:2</code> they are added with a
      relative sign as constituents, i.e. a jet containing b and anti-b is not tagged.
</li><li> scale setting mode <code>M:0,1</code> (default <code>1</code>)
      It is possible to specify multiple scale definition blocks, each enclosed
      in curly brackets. The scale setting mode parameter then determines, how
      those are interpreted:
      In the <code>M:0</code> case, they specify factorisation, renormalisation and
      resummation scale separately in that order.
      In the <code>M:1</code> case, the <code>n</code> given scales are used to calculate a
      mean scale such that <code>alpha_s^n(mu_mean)=alpha_s(mu_1)...alpha_s(mu_n)</code>
      This scale is then used for factorisation, renormalisation and resummation
      scale.
</li></ul>

<p>Consider the example of lepton pair production in association with jets. The 
following scale setter 
</p>
<pre class="verbatim">SCALES FASTJET[A:kt,PT:10,R:0.4,M:0]{sqrt(PPerp2(p[4])*PPerp2(p[5]))}
</pre>
<p>reconstructs jets using the kt-algorithm with R=0.4 and a minimum transverse 
momentum of 10 GeV. The scale of all strong couplings is then set to the 
geometric mean of the hardest and second hardest jet. Note <code>M:0</code>.
</p>
<p>Similarly, in processes with multiple strong couplings, their renormalisation 
scales can be set to different values, e.g.
</p>
<pre class="verbatim">SCALES FASTJET[A:kt,PT:10,R:0.4,M:1]{PPerp2(p[4])}{PPerp2(p[5])}
</pre>
<p>sets the scale of one strong coupling to the transverse momentum of the 
hardest jet, and the scale of the second strong coupling to the transverse 
momentum of second hardest jet. Note <code>M:1</code> in this case.
</p>
<p>The additional tags <var>MU_22</var> .. <var>MU_n2</var>  (n=2..njet+1), hold the nodal 
values of the jet clustering in descending order.
</p>
<p>Please note that currently this type of scale setting can only be done within 
the process block (<a href="#Processes">Processes</a>) and not within the (me) section.
</p>






</dd>
<dt>&lsquo;<samp>METS</samp>&rsquo;</dt>
<dd><p>The matrix element is clustered onto a core 2-&gt;2 configuration using an 
inversion of current parton shower, cf. <a href="#SHOWER_005fGENERATOR">SHOWER_GENERATOR</a>, recombining 
(n+1) particles into n on-shell particles. Their corresponding flavours are 
determined using run-time information from the matrix element generator. 
It defines the three tags <code>MU_F2</code>, <code>MU_R2</code> and <code>MU_Q2</code> 
whose values are assigned through this clustering procedure. While 
<code>MU_F2</code> and <code>MU_Q2</code> are defined as the lowest invariant mass or 
negative virtuality in the core process (for core interactions 
which are pure QCD processes scales are set to the maximum transverse 
mass squared of the outgoing particles), <code>MU_R2</code> is determined using 
this core scale and the individual clustering scales such that
</p><pre class="verbatim">  alpha_s(MU_R2)^{n+k} = alpha_s(core-scale)^k alpha_s(kt_1) ... alpha_s(kt_n)
</pre><p>where k is the order in strong coupling of the core process and k is 
the number of clusterings, kt_i are the relative transverse momenta 
at each clustering.
The tags <code>MU_F2</code>, <code>MU_R2</code> and <code>MU_Q2</code> can then be used 
on equal footing with the tags of <a href="#Predefined-scale-tags">Predefined scale tags</a> to define 
the final scale.
</p>
<p><code>METS</code> is the default scale scheme in Sherpa, since it is employed
for truncated shower merging, see <a href="#Multijet-merged-event-generation-with-Sherpa">Multijet merged event generation with Sherpa</a>, both at 
leading and next-to-leading order. Thus, Sherpa&rsquo;s default is
</p><pre class="verbatim">SCALES METS{MU_F2}{MU_R2}{MU_Q2}
</pre><p>As the tags <code>MU_F2</code>, <code>MU_R2</code> and <code>MU_Q2</code> are predefined by 
the <code>METS</code> scale setter, they may be omitted, i.e.
</p><pre class="verbatim">SCALES METS
</pre><p>leads to an identical scale definition.
</p>
<p>The <code>METS</code> scale setter comes in two variants: <code>STRICT_METS</code> and 
<code>LOOSE_METS</code>. While the former employs the exact inverse of the 
parton shower for the clustering procedure, and therefore is rather time 
consuming for multiparton final state, the latter is a simplified version 
and much faster. Giving <code>METS</code> as the scale setter results in using 
<code>LOOSE_METS</code> for the integration and <code>STRICT_METS</code> during event 
generation. Giving either <code>STRICT_METS</code> or <code>LOOSE_METS</code> as the 
scale setter results in using the respective one during both integration 
and event generation.
</p>
<p>Clusterings onto 2-&gt;n (n&gt;2) configurations is possible, see 
<a href="#METS-scale-setting-with-multiparton-core-processes">METS scale setting with multiparton core processes</a>.
</p>
<p>This scheme might be subject to 
changes to enable further classes of processes for merging in the 
future and should therefore be seen with care. Integration results 
might change slightly between different Sherpa versions.
</p>
<p>Occasionally, users might encounter the warning message
</p><pre class="verbatim">METS_Scale_Setter::CalculateScale(): No CSS history for '&lt;process name&gt;' in &lt;percentage&gt;% of calls. Set \hat{s}.
</pre><p>As long as the percentage quoted here is not too high, this does not pose
a serious problem. The warning occurs when - based on the current colour
configuration and matrix element information - no suitable clustering is
found by the algorithm. In such cases the scale is set to the invariant mass
of the partonic process.
</p>
</dd>
</dl>

<hr>
<a name="Custom-scale-implementation"></a>
<a name="Custom-scale-implementation-1"></a>
<h4 class="subsubsection">5.5.4.2 Custom scale implementation</h4>

<p>When the flexibility of the &lsquo;<samp>VAR</samp>&rsquo; scale setter above is not sufficient,
it is also possible to implement a completely custom scale scheme within Sherpa
as C++ class plugin. For details please refer to the <a href="#Customization">Customization</a>
section.
</p>
<hr>
<a name="Predefined-scale-tags"></a>
<a name="Predefined-scale-tags-1"></a>
<h4 class="subsubsection">5.5.4.3 Predefined scale tags</h4>

<p>There exist a few predefined tags to facilitate commonly used scale 
choices or easily implement a user defined scale.
</p><dl compact="compact">
<dt>&lsquo;<samp>p[n]</samp>&rsquo;</dt>
<dd><p>Access to the four momentum of the nth particle. The initial state particles 
carry n=0 and n=1, the final state momenta start from n=2. Their ordering 
is determined by Sherpa&rsquo;s internal particle ordering and can be read e.g. 
from the process names displayed at run time. Please note, that when building 
jets out of the final state partons first, e.g. through the <code>FASTJET</code> 
scale setter, these parton momenta will be replaced by the jet momenta 
ordered in transverse momenta. For example the process u ub -&gt; e- e+ G G 
will have the electron and the positron at positions <code>p[2]</code> and 
<code>p[3]</code> and the gluons on postions <code>p[4]</code> and <code>p[5]</code>. However, 
when finding jets first, the electrons will still be at <code>p[2]</code> and 
<code>p[3]</code> while the harder jet will be at <code>p[4]</code> and the softer one 
at <code>p[5]</code>.
</p>
</dd>
<dt>&lsquo;<samp>H_T2</samp>&rsquo;</dt>
<dd><p>Square of the scalar sum of the transverse momenta of all final state particles.
</p>
</dd>
<dt>&lsquo;<samp>H_TY2(&lt;factor&gt;,&lt;exponent&gt;)</samp>&rsquo;</dt>
<dd><p>Square of the scalar sum of the transverse momenta of all final state particles 
weighted by their rapidity distance from the final state boost vector. Thus, 
takes the form
</p><pre class="verbatim">  H_T^{(Y)} = sum_i pT_i exp [ fac |y-yboost|^exp ]
</pre><p>Typical values to use would by <code>0.3</code> and <code>1</code>.
</p>

</dd>
<dt>&lsquo;<samp>MU_F2, MU_R2, MU_Q2</samp>&rsquo;</dt>
<dd><p>Tags holding the values of the factorisation, renormalisation scale and 
resummation scale determined through backwards clustering in the 
<code>METS</code> scale setter.
</p>
</dd>
<dt>&lsquo;<samp>MU_22, MU_32, ..., MU_n2</samp>&rsquo;</dt>
<dd><p>Tags holding the nodal values of the jet clustering in the <code>FASTJET</code> 
scale setter, cf. <a href="#Scale-setters">Scale setters</a>.
</p></dd>
</dl>

<p>All of those objects can be operated upon by any operator/function known 
to the <a href="#Interpreter">Interpreter</a>.
</p>

<hr>
<a name="Scale-schemes-for-NLO-calculations"></a>
<a name="Scale-schemes-for-NLO-calculations-1"></a>
<h4 class="subsubsection">5.5.4.4 Scale schemes for NLO calculations</h4>

<p>For next-to-leading order calculations it must be guaranteed that the scale is 
calculated separately for the real correction and the subtraction terms,
such that within the subtraction procedure the same amount is subtracted
and added back. Starting from version 1.2.2 this is the case for all 
scale setters in Sherpa. Also, the definition of the scale must be 
infrared safe w.r.t. to the radiation of an extra parton. Infrared safe 
(for QCD-NLO calculations) are:
</p>
<ul>
<li> any function of momenta of NOT strongly interacting particles
</li><li> sum of transverse quantities of all partons (e.g. <code>H_T2</code>)
</li><li> any quantity refering to jets, constructed by an IR safe
jet algorithm, see below.
</li></ul>

<p>Not infrared safe are
</p>
<ul>
<li> any function of momenta of specific partons
</li><li> for processes with hadrons in the initial state: 
any quantity that depends on parton momenta along the beam axis, 
including the initial state partons itself 
</li></ul>

<p>Since the total number of partons is different for different pieces
of the NLO calculation any explicit reference to a parton momentum
will lead to an inconsistent result.
</p>

<hr>
<a name="Explicit-scale-variations"></a>
<a name="Explicit-scale-variations-1"></a>
<h4 class="subsubsection">5.5.4.5 Explicit scale variations</h4>

<p>The factorisation and renormalisation scales in the fixed-order matrix
elements can be varied separately simply by introducing a prefactor into
the scale definition, e.g.
</p><pre class="verbatim">SCALES VAR{0.25*H_T2}{0.25*H_T2}
</pre><p>for setting both the renormalisation and factorisation scales to H_T/2.
</p>
<p>Similarly, the starting scale of the parton shower resummation in a
ME+PS merged sample can be varied using the METS scale setter&rsquo;s third
argument like:
</p><pre class="verbatim">SCALES METS{MU_F2}{MU_R2}{4.0*MU_Q2}
</pre>

<hr>
<a name="METS-scale-setting-with-multiparton-core-processes"></a>
<a name="METS-scale-setting-with-multiparton-core-processes-1"></a>
<h4 class="subsubsection">5.5.4.6 METS scale setting with multiparton core processes</h4>
<a name="index-CORE_005fSCALE"></a>

<p>The METS scale setter stops clustering when no combination
is found that corresponds to a parton shower branching, or if
two subsequent branchings are unordered in terms of the parton shower
evolution parameter. The core scale of the remaining 2-&gt;n process then 
needs to be defined. This is done by specifying a core scale through
</p><pre class="verbatim">CORE_SCALE &lt;core-scale-setter&gt;{&lt;core-fac-scale-definition&gt;}{&lt;core-ren-scale-definition&gt;}{&lt;core-res-scale-definition&gt;}
</pre><p>As always, for scale setters which define <code>MU_F2</code>, <code>MU_R2</code> 
and <code>MU_Q2</code> the scale definition can be dropped. Possible core 
scale setters are
</p><dl compact="compact">
<dt>&lsquo;<samp>VAR</samp>&rsquo;</dt>
<dd><p>Variable core scale setter. Syntax is identical to variable scale setter.
</p></dd>
<dt>&lsquo;<samp>QCD</samp>&rsquo;</dt>
<dd><p>QCD core scale setter. Scales are set to harmonic mean of s, t and u. Only 
useful for 2-&gt;2 cores as alternatives to the usual core scale of the METS 
scale setter.
</p></dd>
<dt>&lsquo;<samp>TTBar</samp>&rsquo;</dt>
<dd><p>Core scale setter for processes involving top quarks. Implementation details 
are described in Appendix C of [<a href="#Hoeche2013mua">Hoe13</a>].
</p></dd>
<dt>&lsquo;<samp>SingleTop</samp>&rsquo;</dt>
<dd><p>Core scale setter for single-top production in association with one jet.
If the W is in the t-channel (s-channel), the squared scales are set to the
Mandelstam variables <code>t=2*p[0]*p[2]</code> (<code>t=2*p[0]*p[1]</code>).
</p></dd>
</dl>

<hr>
<a name="COUPLING_005fSCHEME"></a>
<a name="COUPLING_005fSCHEME-1"></a>
<h3 class="subsection">5.5.5 COUPLING_SCHEME</h3>
<a name="index-COUPLING_005fSCHEME"></a>

<p>The parameter <code>COUPLING_SCHEME</code> is used to enable the running of the gauge couplings. The 
default setting is <code>COUPLING_SCHEME=Running_alpha_S</code>, assuming only the strong coupling 
as running. The QED coupling is considered running as well by setting 
<code>COUPLING_SCHEME=Running</code>. To solely have a running QED coupling set  
<code>COUPLING_SCHEME=Running_alpha_QED</code>. If not considered running the values specified by 
<code>ALPHAS(default)</code> and <code>1/ALPHAQED(default)</code> are used, respectively. 
</p>
<hr>
<a name="COUPLINGS"></a>
<a name="COUPLINGS-1"></a>
<h3 class="subsection">5.5.6 COUPLINGS</h3>
<a name="index-COUPLINGS"></a>
<p>Within Sherpa, strong and electroweak couplings can be computed at any scale 
specified by a scale setter (cf. <a href="#SCALES">SCALES</a>). The &lsquo;<samp>COUPLINGS</samp>&rsquo; tag 
links the argument of a running coupling to one of the respective scales. 
This is better seen in an example. Assuming the following input
</p><pre class="verbatim">SCALES    VAR{...}{PPerp2(p[2])}{Abs2(p[2]+p[3])}
COUPLINGS Alpha_QCD 1, Alpha_QED 2
</pre><p>Sherpa will compute any strong couplings at scale one, i.e. &lsquo;<samp>PPerp2(p[2])</samp>&rsquo; 
and electroweak couplings at scale two, i.e. &lsquo;<samp>Abs2(p[2]+p[3])</samp>&rsquo;.
Note that counting starts at zero.
</p>
<hr>
<a name="KFACTOR"></a>
<a name="KFACTOR-1"></a>
<h3 class="subsection">5.5.7 KFACTOR</h3>
<a name="index-KFACTOR"></a>
<p>This parameter specifies how to evaluate potential K-factors in the hard
process. This is equivalent to the &lsquo;<samp>COUPLINGS</samp>&rsquo; specification of Sherpa
versions prior to 1.2.2. Currently available options are
</p>
<dl compact="compact">
<dt>&lsquo;<samp>NO</samp>&rsquo;</dt>
<dd><p>No reweighting
</p></dd>
<dt>&lsquo;<samp>VAR</samp>&rsquo;</dt>
<dd><p>Couplings specified by an additional parameter in a form which is understood
by the internal interpreter, see <a href="#Interpreter">Interpreter</a>. The tags <kbd>Alpha_QCD</kbd>
and <kbd>Alpha_QED</kbd> serve as links to the built-in running coupling implementation.
</p>
<p>If for example the process &lsquo;<samp>g g -&gt; h g</samp>&rsquo; in effective theory is computed,
one could think of evaluating two powers of the strong coupling at the Higgs mass scale 
and one power at the transverse momentum squared of the gluon.
Assuming the Higgs mass to be 120 GeV, the corresponding reweighting would read
</p><pre class="verbatim">SCALES    VAR{...}{PPerp2(p[3])}
COUPLINGS Alpha_QCD 1
KFACTOR   VAR{sqr(Alpha_QCD(sqr(120))/Alpha_QCD(MU_12))}
</pre><p>As can be seen from this example, scales are referred to as <kbd>MU_&lt;i&gt;2</kbd>,
where <kbd>&lt;i&gt;</kbd> is replaced with the appropriate number. 
Note that counting starts at zero.
</p></dd>
</dl>

<p>It is possible to implement a dedicated K-factor scheme within Sherpa.
For advice on this topic please contact the authors, <a href="#Authors">Authors</a>.
</p> 
<hr>
<a name="YUKAWA_005fMASSES"></a>
<a name="YUKAWA_005fMASSES-1"></a>
<h3 class="subsection">5.5.8 YUKAWA_MASSES</h3>
<a name="index-YUKAWA_005fMASSES"></a>

<p>This parameter specifies whether the Yukawa couplings are evaluated using
running or fixed quark masses: <code>YUKAWA_MASSES=Running</code> is the default since
version 1.2.2 while <code>YUKAWA_MASSES=Fixed</code> was the default until 1.2.1.
</p>
<hr>
<a name="Dipole-subtraction"></a>
<a name="Dipole-subtraction-1"></a>
<h3 class="subsection">5.5.9 Dipole subtraction</h3>
<a name="index-DIPOLE_005fALPHA"></a>
<a name="index-DIPOLE_005fKAPPA"></a>
<a name="index-DIPOLE_005fNF_005fGSPLIT"></a>
<a name="index-DIPOLE_005fAMIN"></a>
<p>This list of parameters can be used to optimize the performance
when employing the Catani-Seymour dipole subtraction 
[<a href="#Catani1996vz">Cat96b</a>] as implemented in Amegic [<a href="#Gleisberg2007md">Gle07</a>].
</p>
<dl compact="compact">
<dt>&lsquo;<samp>`DIPOLE_ALPHA'</samp>&rsquo;</dt>
<dd><p>Specifies a dipole cutoff in the nonsingular region [<a href="#Nagy2003tz">Nag03</a>].
Changing this parameter shifts contributions from the subtracted real 
correction piece (RS) to the piece including integrated dipole terms (I), 
while their sum remains constant. This parameter can be used to optimize
the integration performance of the individual pieces. 
Also the average calculation time for the subtracted real correction
is reduced with smaller choices of &lsquo;DIPOLE_ALPHA&rsquo; due to the (on average)
reduced number of contributing dipole terms. For most processes
a reasonable choice is between 0.01 and 1 (default). See also
<a href="#Choosing-DIPOLE_005fALPHA">Choosing DIPOLE_ALPHA</a>
</p></dd>
<dt>&lsquo;<samp>`DIPOLE_AMIN'</samp>&rsquo;</dt>
<dd><p>Specifies the cutoff of real correction terms in the infrared reagion
to avoid numerical problems with the subtraction. The default is 1.e-8.
</p></dd>
<dt>&lsquo;<samp>`DIPOLE_NF_GSPLIT'</samp>&rsquo;</dt>
<dd><p>Specifies the number of quark flavours that are produced from 
gluon splittings. This number must be at least the number of massless 
flavours (default). If this number is larger than the number of massless
quarks the massive dipole subtraction [<a href="#Catani2002hc">Cat02</a>] is employed.
</p></dd>
<dt>&lsquo;<samp>`DIPOLE_KAPPA'</samp>&rsquo;</dt>
<dd><p>Specifies the kappa-parameter in the massive dipole subtraction formalism
[<a href="#Catani2002hc">Cat02</a>].
</p></dd>
</dl>
<hr>
<a name="Processes"></a>
<a name="Processes-1"></a>
<h2 class="section">5.6 Processes</h2>

<p>The process setup is covered by the &lsquo;(processes)&rsquo; section of
the steering file or the process data file &lsquo;Processes.dat&rsquo;, respectively.
</p>
<p>The following parameters are used to steer the process setup.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Process">5.6.1 Process</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                 The process setup start tag.
</td></tr>
<tr><td align="left" valign="top"><a href="#Decay">5.6.2 Decay</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                   Tag to add an exclusive decay.
</td></tr>
<tr><td align="left" valign="top"><a href="#DecayOS">5.6.3 DecayOS</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                 Tag to add an exclusive on-shell decay.
</td></tr>
<tr><td align="left" valign="top"><a href="#No_005fDecay">5.6.4 No_Decay</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                Tag to remove resonant diagrams.
</td></tr>
<tr><td align="left" valign="top"><a href="#Scales">5.6.5 Scales</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                  Tag to set a process-specific scale.
</td></tr>
<tr><td align="left" valign="top"><a href="#Couplings">5.6.6 Couplings</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">               Tag to set process-specific couplings.
</td></tr>
<tr><td align="left" valign="top"><a href="#CKKW">5.6.7 CKKW</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                    Tag to setup multijet merging.
</td></tr>
<tr><td align="left" valign="top"><a href="#Selector_005fFile">5.6.8 Selector_File</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Tag to specify a specific selector file.
</td></tr>
<tr><td align="left" valign="top"><a href="#Order">5.6.9 Order</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                   Tag to fix the coupling order.
</td></tr>
<tr><td align="left" valign="top"><a href="#Max_005fOrder">5.6.10 Max_Order</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">               Tag to fix the maximum coupling order.
</td></tr>
<tr><td align="left" valign="top"><a href="#Min_005fOrder">5.6.11 Min_Order</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">               Tag to fix the minimum coupling order.
</td></tr>
<tr><td align="left" valign="top"><a href="#Min_005fN_005fQuarks">5.6.12 Min_N_Quarks</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            Tag to set the minimum number of quarks.
</td></tr>
<tr><td align="left" valign="top"><a href="#Max_005fN_005fQuarks">5.6.13 Max_N_Quarks</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            Tag to set the maximum number of quarks.
</td></tr>
<tr><td align="left" valign="top"><a href="#Min_005fN_005fTChannels">5.6.14 Min_N_TChannels</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         Tag to request a minimum number of t-channels.
</td></tr>
<tr><td align="left" valign="top"><a href="#Max_005fN_005fTChannels">5.6.15 Max_N_TChannels</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         Tag to request a maximum number of t-channels.
</td></tr>
<tr><td align="left" valign="top"><a href="#Print_005fGraphs">5.6.16 Print_Graphs</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            Tag to enable writeout of feynman graphs.
</td></tr>
<tr><td align="left" valign="top"><a href="#Name_005fSuffix">5.6.17 Name_Suffix</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">             Tag to set a unique name suffix.
</td></tr>
<tr><td align="left" valign="top"><a href="#Integration_005fError">5.6.18 Integration_Error</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">       Tag to set a specific integration error.
</td></tr>
<tr><td align="left" valign="top"><a href="#Max_005fEpsilon">5.6.19 Max_Epsilon</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">             Tag to set a specific epsilon for overweighting.
</td></tr>
<tr><td align="left" valign="top"><a href="#Enhance_005fFactor">5.6.20 Enhance_Factor</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Tag to set an enhance factor.
</td></tr>
<tr><td align="left" valign="top"><a href="#RS_005fEnhance_005fFactor">5.6.21 RS_Enhance_Factor</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">       Tag to set an enhance factor for the RS-piece of 
                            an MC@NLO process.
</td></tr>
<tr><td align="left" valign="top"><a href="#Enhance_005fFunction">5.6.22 Enhance_Function</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">        Tag to set an enhance function.
</td></tr>
<tr><td align="left" valign="top"><a href="#Enhance_005fObservable">5.6.23 Enhance_Observable</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">      Tag to set an enhance observable.
</td></tr>
<tr><td align="left" valign="top"><a href="#NLO_005fQCD_005fMode">5.6.24 NLO_QCD_Mode</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            Tag to setup QCD NLO processes.
</td></tr>
<tr><td align="left" valign="top"><a href="#NLO_005fQCD_005fPart">5.6.25 NLO_QCD_Part</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            Tag to refine the setup of QCD NLO processes.
</td></tr>
<tr><td align="left" valign="top"><a href="#NLO_005fEW_005fMode">5.6.26 NLO_EW_Mode</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">             Tag to setup electroweak NLO processes.
</td></tr>
<tr><td align="left" valign="top"><a href="#NLO_005fEW_005fPart">5.6.27 NLO_EW_Part</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">             Tag to refine the setup of electroweak NLO processes.
</td></tr>
<tr><td align="left" valign="top"><a href="#Subdivide_005fVirtual">5.6.28 Subdivide_Virtual</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">       Tag to split virtual contribution into pieces.
</td></tr>
<tr><td align="left" valign="top"><a href="#ME_005fGenerator">5.6.29 ME_Generator</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            Tag to specifiy the tree ME generator.
</td></tr>
<tr><td align="left" valign="top"><a href="#RS_005fME_005fGenerator">5.6.30 RS_ME_Generator</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         Tag to specifiy the real-subtracted ME generator
                            of an MC@NLO process.
</td></tr>
<tr><td align="left" valign="top"><a href="#Loop_005fGenerator">5.6.31 Loop_Generator</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Tag to specifiy the loop ME generator.
</td></tr>
<tr><td align="left" valign="top"><a href="#Integrator">5.6.32 Integrator</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">              Tag to specifiy the integrator.
</td></tr>
<tr><td align="left" valign="top"><a href="#PSI_005fItMin">5.6.33 PSI_ItMin</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">               Tag to set the number of points per optimization step.
</td></tr>
<tr><td align="left" valign="top"><a href="#RS_005fPSI_005fItMin">5.6.34 RS_PSI_ItMin</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            Tag to set the number of points per optimization step
                            in real-minus-subtraction parts.
</td></tr>
<tr><td align="left" valign="top"><a href="#End-process">5.6.35 End process</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">             The process setup end tag.
</td></tr>
</table>


<hr>
<a name="Process"></a>
<a name="Process-1"></a>
<h3 class="subsection">5.6.1 Process</h3>
<p>This tag starts the setup of a process or a set of processes 
with common properties. It must be followed by the specification 
of the (core) process itself. The setup is completed by the
&lsquo;<samp>End process</samp>&rsquo; tag, see <a href="#End-process">End process</a>. The initial and
final state particles are specified by their PDG codes, or by 
particle containers, see <a href="#Particle-containers">Particle containers</a>. Examples are
</p>
<dl compact="compact">
<dt>Process 93 93 -&gt; 11 -11</dt>
<dd><p>Sets up a Drell-Yan process group with light quarks
in the initial state.
</p></dd>
<dt>Process 11 -11 -&gt; 93 93 93{3}</dt>
<dd><p>Sets up jet production in e+e- collisions with up to three
additional jets.
</p></dd>
</dl>

<p>The syntax for specifying processes is explained in the following 
sections:
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#PDG-codes">5.6.1.1 PDG codes</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Particle-containers">5.6.1.2 Particle containers</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Parentheses">5.6.1.3 Parentheses</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Curly-brackets">5.6.1.4 Curly brackets</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<a name="PDG-codes"></a>
<a name="PDG-codes-1"></a>
<h4 class="subsubsection">5.6.1.1 PDG codes</h4>

<p>Initial and final state particles are specified using their 
PDG codes
(cf. <a href="http://pdg.lbl.gov/2009/mcdata/mc_particle_id_contents.html">PDG</a>).
A list of particles with their codes, and some of their properties,
is printed at the start of each Sherpa run, when the <a href="#OUTPUT">OUTPUT</a> is set 
at level &lsquo;<samp>2</samp>&rsquo;.
</p>
<hr>
<a name="Particle-containers"></a>
<a name="Particle-containers-1"></a>
<h4 class="subsubsection">5.6.1.2 Particle containers</h4>

<p>Sherpa contains a set of containers that collect
particles with similar properties, namely
</p>
<ul>
<li>  lepton (carrying number <code>90</code>), 
  </li><li>  neutrino (carrying number <code>91</code>),
  </li><li>  fermion (carrying number <code>92</code>),
  </li><li>  jet (carrying number <code>93</code>),
  </li><li>  quark (carrying number <code>94</code>).
</li></ul>

<p>These containers hold all massless particles and anti-particles 
of the denoted type and allow for a more efficient definition of 
initial and final states to be considered. The jet container consists 
of the gluon and all massless quarks (as set by <code>MASS[..]=0.0</code> or
<code>MASSIVE[..]=0</code>). A list of particle containers
is printed at the start of each Sherpa run, when the <a href="#OUTPUT">OUTPUT</a> is set 
at level &lsquo;<samp>2</samp>&rsquo;. 
</p>
<a name="index-PARTICLE_005fCONTAINER"></a>
<p>It is also possible to define a custom particle container using the keyword 
<code>PARTICLE_CONTAINER</code> either on the command line or in the <code>(run)</code>
section of the input file. The container must be given an unassigned particle 
ID (kf-code) and its name (freely chosen by you) and content must be specified.
An example would be the collection of all down-type quarks, which could be
declared as
</p><pre class="verbatim">  PARTICLE_CONTAINER 98 downs 1 -1 3 -3 5 -5;
</pre><p>Note that, if wanted, you have to add both particles and anti-particles.
</p>


<hr>
<a name="Parentheses"></a>
<a name="Parentheses-1"></a>
<h4 class="subsubsection">5.6.1.3 Parentheses</h4>

<p>The parenthesis notation allows to group a list of processes with different 
flavor content but similar structure. This is most useful in the context of 
simulations containing heavy quarks.
In a setup with massive b-quarks, for example, the b-quark will not be part 
of the jets container. In order to include b-associated processes easily,
the following can be used:
</p><pre class="verbatim">(run){
  ...
  MASSIVE[5] 1; PARTICLE_CONTAINER 98 B 5 -5;
}(run);
(processes){
  Process 11 -11 -&gt; (93,98) (93,98);
  ...
}(processes);
</pre>

<hr>
<a name="Curly-brackets"></a>
<a name="Curly-brackets-1"></a>
<h4 class="subsubsection">5.6.1.4 Curly brackets</h4>

<p>The curly bracket notation when specifying a process allows up to 
a certain number of jets to be included in the final state. This
is easily seen from an example, 
</p><dl compact="compact">
<dt>Process 11 -11 -&gt; 93 93 93{3}</dt>
<dd><p>Sets up jet production in e+e- collisions. The matix element final state may be
2, 3, 4 or 5 light partons or gluons.
</p></dd>
</dl>


<hr>
<a name="Decay"></a>
<a name="Decay-1"></a>
<h3 class="subsection">5.6.2 Decay</h3>
<p>Specifies the exclusive decay of a particle produced in the
matrix element. The virtuality of the decaying particle is sampled
according to a Breit-Wigner distribution.
An example would be
</p><pre class="verbatim">Process 11 -11 -&gt; 6[a] -6[b]
Decay 6[a] -&gt; 5 24[c]
Decay -6[b] -&gt; -5 -24[d]
Decay 24[c] -&gt; -13 14
Decay -24[d] -&gt; 94 94
</pre>

<hr>
<a name="DecayOS"></a>
<a name="DecayOS-1"></a>
<h3 class="subsection">5.6.3 DecayOS</h3>
<p>Specifies the exclusive decay of a particle produced in the
matrix element. The decaying particle is on mass-shell, i.e.
a strict narrow-width approximation is used. This tag can be
specified alternatively as &lsquo;<samp>DecayOS</samp>&rsquo;.
An example would be
</p><pre class="verbatim">Process 11 -11 -&gt; 6[a] -6[b]
DecayOS 6[a] -&gt; 5 24[c]
DecayOS -6[b] -&gt; -5 -24[d]
DecayOS 24[c] -&gt; -13 14
DecayOS -24[d] -&gt; 94 94
</pre>

<hr>
<a name="No_005fDecay"></a>
<a name="No_005fDecay-1"></a>
<h3 class="subsection">5.6.4 No_Decay</h3>
<p>Remove all diagrams associated with the decay of the given flavours.
Serves to avoid resonant contributions in processes like W-associated
single-top production. Note that this method breaks gauge invariance!
At the moment this flag can only be set for Comix.
An example would be
</p><pre class="verbatim">Process 93 93 -&gt; 6[a] -24[b] 93{1}
Decay 6[a] -&gt; 5 24[c]
DecayOS 24[c] -&gt; -13 14
DecayOS -24[b] -&gt; 11 -12
No_Decay -6
</pre>

<hr>
<a name="Scales"></a>
<a name="Scales-1"></a>
<h3 class="subsection">5.6.5 Scales</h3>
<p>Sets a process-specific scale.
For the corresponding syntax see <a href="#SCALES">SCALES</a>.
</p>
<hr>
<a name="Couplings"></a>
<a name="Couplings-1"></a>
<h3 class="subsection">5.6.6 Couplings</h3>
<p>Sets process-specific couplings.
For the corresponding syntax see <a href="#COUPLINGS">COUPLINGS</a>.
</p>
<hr>
<a name="CKKW"></a>
<a name="CKKW-1"></a>
<h3 class="subsection">5.6.7 CKKW</h3>
<p>Sets up multijet merging according to [<a href="#Hoeche2009rj">Hoe09</a>].
The additional argument specifies the separation cut
in the form (Q_{cut}/E_{cms})^2.
It can be given in any form which is understood by the internal
interpreter, see <a href="#Interpreter">Interpreter</a>.
Examples are
</p>
<ul>
<li> CKKW pow(10,-2.5)
</li><li> CKKW sqr(20/E_CMS)
</li></ul>


<hr>
<a name="Selector_005fFile"></a>
<a name="Selector_005fFile-1"></a>
<h3 class="subsection">5.6.8 Selector_File</h3>
<p>Sets a process-specific selector file name.
</p>

<hr>
<a name="Order"></a>
<a name="Order-1"></a>
<h3 class="subsection">5.6.9 Order</h3>
<p>Sets a process-specific coupling order.
Orders are counted at the amplitude level. 
For example, the process 1 -1 -&gt; 2 -2 would have
orders (2,0), (1,1) and (0,2). The first number always
refers to QCD, the second to electroweak. The third
and following numbers are model specific. Half-integer
orders are so far supported only by Comix.
An asterisk can be used as a wildcard.
</p>
<p>Note that for decay chains this setting applies to
the full process, see <a href="#Decay">Decay</a> and <a href="#DecayOS">DecayOS</a>.
</p>

<hr>
<a name="Max_005fOrder"></a>
<a name="Max_005fOrder-1"></a>
<h3 class="subsection">5.6.10 Max_Order</h3>
<p>Sets a process-specific maximum coupling order.
Orders are counted at the amplitude level. 
For example, the process 1 -1 -&gt; 2 -2 would have
orders (2,0), (1,1) and (0,2). The first number always
refers to QCD, the second to electroweak. The third
and following numbers are model specific. Half-integer
orders are so far supported only by Comix.
</p>
<p>Note that for decay chains this setting applies to
the full process, see <a href="#Decay">Decay</a> and <a href="#DecayOS">DecayOS</a>.
</p>

<hr>
<a name="Min_005fOrder"></a>
<a name="Min_005fOrder-1"></a>
<h3 class="subsection">5.6.11 Min_Order</h3>
<p>Sets a process-specific minimum coupling order.
Orders are counted at the amplitude level. 
For example, the process 1 -1 -&gt; 2 -2 would have
orders (2,0), (1,1) and (0,2). The first number always
refers to QCD, the second to electroweak. The third
and following numbers are model specific. Half-integer
orders are so far supported only by Comix.
</p>
<p>Note that for decay chains this setting applies to
the full process, see <a href="#Decay">Decay</a> and <a href="#DecayOS">DecayOS</a>.
</p>

<hr>
<a name="Min_005fN_005fQuarks"></a>
<a name="Min_005fN_005fQuarks-1"></a>
<h3 class="subsection">5.6.12 Min_N_Quarks</h3>
<p>Limits the minimum number of quarks in the process to the
given value.
</p>

<hr>
<a name="Max_005fN_005fQuarks"></a>
<a name="Max_005fN_005fQuarks-1"></a>
<h3 class="subsection">5.6.13 Max_N_Quarks</h3>
<p>Limits the maximum number of quarks in the process to the
given value.
</p>

<hr>
<a name="Min_005fN_005fTChannels"></a>
<a name="Min_005fN_005fTChannels-1"></a>
<h3 class="subsection">5.6.14 Min_N_TChannels</h3>
<p>Limits the minimum number of t-channel propagators in the process 
to the given value.
</p>
<hr>
<a name="Max_005fN_005fTChannels"></a>
<a name="Max_005fN_005fTChannels-1"></a>
<h3 class="subsection">5.6.15 Max_N_TChannels</h3>
<p>Limits the maximum number of t-channel propagators in the process 
to the given value.
</p>
<hr>
<a name="Print_005fGraphs"></a>
<a name="Print_005fGraphs-1"></a>
<h3 class="subsection">5.6.16 Print_Graphs</h3>
<p>Writes out Feynman graphs in LaTeX format. The parameter specifies a 
directory name in which the diagram information is stored. This directory 
is created automatically by Sherpa. The LaTeX source files can be compiled 
using the command
</p><pre class="verbatim">  ./plot_graphs &lt;graphs directory&gt;
</pre><p>which creates an html page in the graphs directory that can be viewed 
in a web browser.
</p>
<hr>
<a name="Name_005fSuffix"></a>
<a name="Name_005fSuffix-1"></a>
<h3 class="subsection">5.6.17 Name_Suffix</h3>
<p>Defines a unique name suffix for the process.
</p>
<hr>
<a name="Integration_005fError"></a>
<a name="Integration_005fError-1"></a>
<h3 class="subsection">5.6.18 Integration_Error</h3>
<p>Sets a process-specific relative integration error target.
</p>
<p>For multijet processes, this parameter can be specified
per final state multiplicity. An example would be
</p><pre class="verbatim">Process 93 93 -&gt; 93 93 93{2}
Integration_Error 0.02 {3,4}
</pre>
<p>Here, the integration error target is set to 2% for
2-&gt;3 and 2-&gt;4 processes.
</p>

<hr>
<a name="Max_005fEpsilon"></a>
<a name="Max_005fEpsilon-1"></a>
<h3 class="subsection">5.6.19 Max_Epsilon</h3>
<p>Sets epsilon for maximum weight reduction.
The key idea is to allow weights larger than
the maximum during event generation,
as long as the fraction of the cross section
represented by corresponding events is
at most the epsilon factor times the total
cross section. In other words, the relative
contribution of overweighted events to the
inclusive cross section is at most epsilon.
</p>

<hr>
<a name="Enhance_005fFactor"></a>
<a name="Enhance_005fFactor-1"></a>
<h3 class="subsection">5.6.20 Enhance_Factor</h3>
<p>Sets a process specific enhance factor.
</p>
<p>For multijet processes, this parameter can be specified
per final state multiplicity. An example would be
</p><pre class="verbatim">Process 93 93 -&gt; 93 93 93{2}
Enhance_Factor 4 {3}
Enhance_Factor 16 {4}
</pre>
<p>Here, 3-jet processes are enhanced by a factor of 4,
4-jet processes by a factor of 16.
</p>
<hr>
<a name="RS_005fEnhance_005fFactor"></a>
<a name="RS_005fEnhance_005fFactor-1"></a>
<h3 class="subsection">5.6.21 RS_Enhance_Factor</h3>
<p>Sets an enhance factor for the RS-piece of an MC@NLO process.
</p>
<p>For multijet processes, this parameter can be specified
per final state multiplicity. An example would be
</p><pre class="verbatim">Process 93 93 -&gt; 90 91 93{3};
NLO_QCD_Mode MC@NLO {2,3};
RS_Enhance_Factor 10 {2};
RS_Enhance_Factor 20 {3};
</pre>
<p>Here, the RS-pieces of the MC@NLO subprocesses of the 2 particle final 
state processes are enhanced by a factor of 10, while those of the 3 
particle final state processes are enhanced by a factor of 20.
</p>
<hr>
<a name="Enhance_005fFunction"></a>
<a name="Enhance_005fFunction-1"></a>
<h3 class="subsection">5.6.22 Enhance_Function</h3>
<p>Sets a process specific enhance function.
</p>
<p><em>This feature can only be used when generating weighted events.</em>
</p>
<p>For multijet processes, the parameter can be specified
per final state multiplicity. An example would be
</p><pre class="verbatim">Process 93 93 -&gt; 11 -11 93{1}
Enhance_Function VAR{PPerp2(p[4])} {3}
</pre>
<p>Here, the 1-jet process is enhanced with the
transverse momentum squared of the jet.
</p>
<p>Note that the convergence of the Monte Carlo integration can be worse
if enhance functions are employed and therefore the integration can take
significantly longer. The reason is that the default phase space
mapping, which is constructed according to diagrammatic information from
hard matrix elements, is not suited for event generation including
enhancement. It must first be adapted, which, depending on the enhance
function and the final state multiplicity, can be an intricate task.
</p>
<p><em>If Sherpa cannot achieve an integration error target due to the use
 of enhance functions, it might be appropriate to locally redefine this
 error target</em>, see <a href="#Integration_005fError">Integration_Error</a>.
</p>
<hr>
<a name="Enhance_005fObservable"></a>
<a name="Enhance_005fObservable-1"></a>
<h3 class="subsection">5.6.23 Enhance_Observable</h3>

<p>Allows for the specification of a ME-level observable in which the event
generation should be flattened. Of course, this induces an appropriate weight
for each event. This option is available for both weighted and unweighted event
generation, but for the latter as mentioned above the weight stemming from the
enhancement is introduced.
For multijet processes, the parameter can be specified
per final state multiplicity.
</p>
<p>An example would be
</p><pre class="verbatim">Process 93 93 -&gt; 11 -11 93{1}
Enhance_Observable VAR{log10(PPerp(p[2]+p[3]))}|1|3 {3}
</pre>
<p>Here, the 1-jet process is flattened with respect to the logarithmic transverse
momentum of the lepton pair in the limits 1.0 (10 GeV) to 3.0 (1 TeV).
For the calculation of the observable one can use any function available in
the algebra interpreter (see <a href="#Interpreter">Interpreter</a>).
</p>
<p>Note that the convergence of the Monte Carlo integration can be worse
if enhance observables are employed and therefore the integration can take
significantly longer. The reason is that the default phase space 
mapping, which is constructed according to diagrammatic information from
hard matrix elements, is not suited for event generation including
enhancement. It must first be adapted, which, depending on the enhance 
function and the final state multiplicity, can be an intricate task. 
</p>
<p><em>If Sherpa cannot achieve an integration error target due to the use
 of enhance functions, it might be appropriate to locally redefine this
 error target</em>, see <a href="#Integration_005fError">Integration_Error</a>.
</p>

<hr>
<a name="NLO_005fQCD_005fMode"></a>
<a name="NLO_005fQCD_005fMode-1"></a>
<h3 class="subsection">5.6.24 NLO_QCD_Mode</h3>

<p>This setting specifies whether and in which mode an QCD NLO calculation 
should be performed. Possible values are:
</p>
<ul>
<li> <code>Fixed_Order</code> ... perform a fixed-order next-to-leading order 
                             calculation
</li><li> <code>MC@NLO</code> ... perform an MC@NLO-type matching of a fixed-order 
                         next-to-leading order calculation to the resummation 
                         of the parton shower
</li></ul>

<p>The usual multiplicity identifier apply to this switch as well.
Note that this setting implies <code>NLO_QCD_Part BVIRS</code> for the relevant 
multiplicities. This can be overridden by setting <code>NLO_QCD_Part</code> 
explicitly in case of fixed-order calculations.
</p>
<p>Note that Sherpa includes only a very limited selection of one-loop 
corrections. For processes not included external codes can be interfaced, 
see <a href="#External-one_002dloop-ME">External one-loop ME</a>
</p>
<hr>
<a name="NLO_005fQCD_005fPart"></a>
<a name="NLO_005fQCD_005fPart-1"></a>
<h3 class="subsection">5.6.25 NLO_QCD_Part</h3>

<p>In case of fixed-order NLO calculations this switch specifies which pieces 
of a QCD NLO calculation are computed. Possible choices are
</p>
<ul>
<li> B  ... born term
</li><li> V  ... virtual (one-loop) correction
</li><li> I  ... integrated subtraction terms
</li><li> RS ... real correction, regularized using Catani-Seymour subtraction terms
</li></ul>

<p>Different pieces can be combined in one processes setup. Only pieces with the 
same number of final state particles and the same order in alpha_S can be 
treated as one process, otherwise they will be automatically split up.
</p>
<hr>
<a name="NLO_005fEW_005fMode"></a>
<a name="NLO_005fEW_005fMode-1"></a>
<h3 class="subsection">5.6.26 NLO_EW_Mode</h3>

<p>This setting specifies whether and in which mode an electroweak NLO calculation 
should be performed. Possible values are:
</p>
<ul>
<li> <code>Fixed_Order</code> ... perform a fixed-order next-to-leading order 
                             calculation
</li></ul>

<hr>
<a name="NLO_005fEW_005fPart"></a>
<a name="NLO_005fEW_005fPart-1"></a>
<h3 class="subsection">5.6.27 NLO_EW_Part</h3>

<p>In case of fixed-order NLO calculations this switch specifies which pieces 
of a electroweak NLO calculation are computed. Possible choices are
</p>
<ul>
<li> B  ... born term
</li><li> V  ... virtual (one-loop) correction
</li><li> I  ... integrated subtraction terms
</li><li> RS ... real correction, regularized using Catani-Seymour subtraction terms
</li></ul>

<p>Different pieces can be combined in one processes setup. Only pieces with the 
same number of final state particles and the same order in alpha_QED can be 
treated as one process, otherwise they will be automatically split up.
</p>
<hr>
<a name="Subdivide_005fVirtual"></a>
<a name="Subdivide_005fVirtual-1"></a>
<h3 class="subsection">5.6.28 Subdivide_Virtual</h3>

<p>Allows to split the virtual contribution to the total cross section into pieces.
Currently supported options when run with <a href="http://projects.hepforge.org/blackhat">BlackHat</a>
are &lsquo;<samp>LeadingColor</samp>&rsquo; and &lsquo;<samp>FullMinusLeadingColor</samp>&rsquo;. For high-multiplicity
calculations these settings allow to adjust the relative number of points in the
sampling to reduce the overall computation time.
</p>
<hr>
<a name="ME_005fGenerator"></a>
<a name="ME_005fGenerator-1"></a>
<h3 class="subsection">5.6.29 ME_Generator</h3>
<p>Set a process specific nametag for the desired
tree-ME generator, see <a href="#ME_005fSIGNAL_005fGENERATOR">ME_SIGNAL_GENERATOR</a>.
</p>
<hr>
<a name="RS_005fME_005fGenerator"></a>
<a name="RS_005fME_005fGenerator-1"></a>
<h3 class="subsection">5.6.30 RS_ME_Generator</h3>
<p>Set a process specific nametag for the desired
ME generator used for the real minus subtraction part
of NLO calculations. See also <a href="#ME_005fSIGNAL_005fGENERATOR">ME_SIGNAL_GENERATOR</a>.
</p>
<hr>
<a name="Loop_005fGenerator"></a>
<a name="Loop_005fGenerator-1"></a>
<h3 class="subsection">5.6.31 Loop_Generator</h3>
<p>Set a process specific nametag for the desired
loop-ME generator. The only Sherpa-native option is <code>Internal</code> with a few 
hard coded loop matrix elements.
</p>
<hr>
<a name="BlackHat-Interface"></a>
<h4 class="subsubsection">5.6.31.1 BlackHat Interface</h4>
<a name="index-BH_005fSETTINGS_005fFILE"></a>

<p>Another source for loop matrix elements is <a href="http://projects.hepforge.org/blackhat">BlackHat</a>.
To use this Sherpa has to be linked to BlackHat during installation by using the configure option 
<code>--enable-blackhat=/path/to/blackhat</code>. The BlackHat settings file can be specified using
&lsquo;<samp>BH_SETTINGS_FILE</samp>&rsquo;.
</p>

<hr>
<a name="Integrator"></a>
<a name="Integrator-1"></a>
<h3 class="subsection">5.6.32 Integrator</h3>
<p>Sets a process-specific integrator, see <a href="#INTEGRATOR">INTEGRATOR</a>.
</p>
<hr>
<a name="PSI_005fItMin"></a>
<a name="PSI_005fItMin-1"></a>
<h3 class="subsection">5.6.33 PSI_ItMin</h3>
<p>Sets the number of points per optimization step, see <a href="#PSI_005fITMIN">PSI_ITMIN</a>.
</p>
<hr>
<a name="RS_005fPSI_005fItMin"></a>
<a name="RS_005fPSI_005fItMin-1"></a>
<h3 class="subsection">5.6.34 RS_PSI_ItMin</h3>
<p>Sets the number of points per optimization step in real-minus-subtraction
parts of fixed-order and MC@NLO calculations, see <a href="#PSI_005fITMIN">PSI_ITMIN</a>.
</p>
<hr>
<a name="End-process"></a>
<a name="End-process-1"></a>
<h3 class="subsection">5.6.35 End process</h3>
<p>Completes the setup of a process or a list of processes
with common properties.
</p>
<hr>
<a name="Selectors"></a>
<a name="Selectors-1"></a>
<h2 class="section">5.7 Selectors</h2>

<p>The setup of cuts at the matrix element level is covered
by the &lsquo;(selector)&rsquo; section of the steering file or the 
selector data file &lsquo;Selector.dat&rsquo;, respectively.
</p>
<p>Sherpa provides the following selectors
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#One-particle-selectors">5.7.1 One particle selectors</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">    one particle selectors
</td></tr>
<tr><td align="left" valign="top"><a href="#Two-particle-selectors">5.7.2 Two particle selectors</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">    two particle selectors
</td></tr>
<tr><td align="left" valign="top"><a href="#Decay-selectors">5.7.3 Decay selectors</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           decay selectors
</td></tr>
<tr><td align="left" valign="top"><a href="#Jet-finders">5.7.4 Jet finders</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">               cuts on QCD partons
</td></tr>
<tr><td align="left" valign="top"><a href="#Universal-selector">5.7.5 Universal selector</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">        user-defined cuts
</td></tr>
<tr><td align="left" valign="top"><a href="#Minimum-selector">5.7.6 Minimum selector</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          cuts that are inclusive for several selectors
</td></tr>
<tr><td align="left" valign="top"><a href="#NLO-selectors">5.7.7 NLO selectors</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">             selectors for NLO QCD calculations
</td></tr>
<tr><td align="left" valign="top"><a href="#Fastjet-selector">5.7.8 Fastjet selector</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          selector using jets built by Fastjet
</td></tr>
</table>

<hr>
<a name="One-particle-selectors"></a>
<a name="One-particle-selectors-1"></a>
<h3 class="subsection">5.7.1 One particle selectors</h3>

<p>The selectors listed here implement cuts on the
matrix element level, based on single particle kinematics.
The corresponding  syntax in &lsquo;<tt>Selector.dat</tt>&rsquo; is 
</p><pre class="verbatim">&lt;keyword&gt; &lt;flavour code&gt; &lt;min value&gt; &lt;max value&gt;
</pre>
<p>&lsquo;<samp>&lt;min value&gt;</samp>&rsquo; and &lsquo;<samp>&lt;max value&gt;</samp>&rsquo; are floating point
numbers, which can also be given in a form that is understood
by the internal algebra interpreter, see <a href="#Interpreter">Interpreter</a>.
The selectors act on <em>all</em> possible particles with 
the given flavour. Their respective keywords are
</p>
<dl compact="compact">
<dt>&lsquo;<samp>Energy</samp>&rsquo;</dt>
<dd><p>energy cut
</p></dd>
<dt>&lsquo;<samp>ET</samp>&rsquo;</dt>
<dd><p>transverse energy cut
</p></dd>
<dt>&lsquo;<samp>PT</samp>&rsquo;</dt>
<dd><p>transverse momentum cut
</p></dd>
<dt>&lsquo;<samp>Rapidity</samp>&rsquo;</dt>
<dd><p>rapidity cut
</p></dd>
<dt>&lsquo;<samp>PseudoRapidity</samp>&rsquo;</dt>
<dd><p>pseudorapidity cut
</p></dd>
<dt>&lsquo;<samp>PZIN</samp>&rsquo;</dt>
<dd><p>cut on the z-component of the momentum, acts on initial-state flavours only
(commonly used in DIS analyses)
</p></dd>
</dl>


<hr>
<a name="Two-particle-selectors"></a>
<a name="Two-particle-selectors-1"></a>
<h3 class="subsection">5.7.2 Two particle selectors</h3>

<p>The selectors listed here implement cuts on the
matrix element level, based on two particle kinematics.
The corresponding  syntax in &lsquo;<tt>Selector.dat</tt>&rsquo; is 
</p><pre class="verbatim">&lt;keyword&gt; &lt;flavour1 code&gt; &lt;flavour2 code&gt; &lt;min value&gt; &lt;max value&gt;
</pre>
<p>&lsquo;<samp>&lt;min value&gt;</samp>&rsquo; and &lsquo;<samp>&lt;max value&gt;</samp>&rsquo; are floating point
numbers, which can also be given in a form that is understood
by the internal algebra interpreter, see <a href="#Interpreter">Interpreter</a>.
The selectors act on <em>all</em> possible particles with 
the given flavour. Their respective keywords are
</p>
<dl compact="compact">
<dt>&lsquo;<samp>Mass</samp>&rsquo;</dt>
<dd><p>invariant mass
</p></dd>
<dt>&lsquo;<samp>Angle</samp>&rsquo;</dt>
<dd><p>angular separation (rad)
</p></dd>
<dt>&lsquo;<samp>BeamAngle</samp>&rsquo;</dt>
<dd><p>angular separation w.r.t. beam
</p>
<p>(&lsquo;<samp>&lt;flavour2 code&gt;</samp>&rsquo; is 0 or 1, referring to beam 1 or 2)
</p></dd>
<dt>&lsquo;<samp>DeltaEta</samp>&rsquo;</dt>
<dd><p>pseudorapidity separation
</p></dd>
<dt>&lsquo;<samp>DeltaY</samp>&rsquo;</dt>
<dd><p>rapidity separation
</p></dd>
<dt>&lsquo;<samp>DeltaPhi</samp>&rsquo;</dt>
<dd><p>azimuthal angle separation (rad)
</p></dd>
<dt>&lsquo;<samp>DeltaR</samp>&rsquo;</dt>
<dd><p>R separation
</p></dd>
<dt>&lsquo;<samp>INEL</samp>&rsquo;</dt>
<dd><p>inelasticity, one of the flavours must be in the initial-state (commonly used
in DIS analyses)
</p></dd>
</dl>


<hr>
<a name="Decay-selectors"></a>
<a name="Decay-selectors-1"></a>
<h3 class="subsection">5.7.3 Decay selectors</h3>

<p>The selectors listed here implement cuts on the matrix element level, 
based on particle decays, see <a href="#Decay">Decay</a> and <a href="#DecayOS">DecayOS</a>.
</p>
<dl compact="compact">
<dt>&lsquo;<samp>DecayMass</samp>&rsquo;</dt>
<dd><p>Invariant mass of a decaying particle. The syntax is
</p><pre class="verbatim">DecayMass &lt;flavour code&gt; &lt;min value&gt; &lt;max value&gt;
</pre></dd>
<dt>&lsquo;<samp>Decay</samp>&rsquo;</dt>
<dd><p>Any kinematic variable of a decaying particle. The syntax is
</p><pre class="verbatim">Decay(&lt;expression&gt;) &lt;flavour code&gt; &lt;min value&gt; &lt;max value&gt;
</pre><p>where <code>&lt;expression&gt;</code> is an expression handled by the
internal interpreter, see <a href="#Interpreter">Interpreter</a>. 
</p></dd>
<dt>&lsquo;<samp>Decay2</samp>&rsquo;</dt>
<dd><p>Any kinematic variable of a pair of decaying particles. The syntax is
</p><pre class="verbatim">  Decay2(&lt;expression&gt;) &lt;flavour1 code&gt; &lt;flavour2 code&gt; &lt;min value&gt; &lt;max value&gt;
</pre><p>where <code>&lt;expression&gt;</code> is an expression handled by the
internal interpreter, see <a href="#Interpreter">Interpreter</a>. 
</p></dd>
</dl>
<p>Particles are identified by flavour, i.e. the cut is applied 
on <em>all</em> decaying particles that match &lsquo;<samp>&lt;flavour code&gt;</samp>&rsquo;.
&lsquo;<samp>&lt;min value&gt;</samp>&rsquo; and &lsquo;<samp>&lt;max value&gt;</samp>&rsquo; are floating point
numbers, which can also be given in a format that is understood
by the internal algebra interpreter, see <a href="#Interpreter">Interpreter</a>.
</p>

<hr>
<a name="Jet-finders"></a>
<a name="Jet-finders-1"></a>
<h3 class="subsection">5.7.4 Jet finders</h3>

<p>There are three different types of jet finders
</p>
<dl compact="compact">
<dt>&lsquo;<samp>JetFinder</samp>&rsquo;</dt>
<dd><p>k_T-algorithm
</p></dd>
<dt>&lsquo;<samp>ConeFinder</samp>&rsquo;</dt>
<dd><p>cone-algorithm
</p></dd>
<dt>&lsquo;<samp>NJetFinder</samp>&rsquo;</dt>
<dd><p>k_T-type algorithm to select on a given number of jets
</p></dd>
</dl>

<p>Their respective syntax is 
</p><pre class="verbatim">JetFinder  &lt;ycut&gt;[&lt;ycut decay 1&gt;[&lt;ycut decay 11&gt;...]...]... &lt;D parameter&gt;
ConeFinder &lt;min R&gt; 
NJetFinder &lt;n&gt; &lt;ptmin&gt; &lt;etmin&gt; &lt;D parameter&gt; [&lt;exponent&gt;] [&lt;eta max&gt;] [&lt;mass max&gt;]
FastjetFinder &lt;algorithm&gt; &lt;n&gt; &lt;ptmin&gt; &lt;etmin&gt; &lt;dr&gt; [&lt;f(siscone)&gt;=0.75] [&lt;eta-max&gt;] [&lt;y-max&gt;] [&lt;nb&gt;] [&lt;nb2&gt;]
</pre>
<p>For &lsquo;<samp>JetFinder</samp>&rsquo;, it is possible to give different values
of ycut in individual subprocesses of a production-decay chain.
The square brackets are then used to denote the decays.
In case only one uniform set of ycut is to be used, the square brackets
are left out.
</p>
<p>&lsquo;<samp>&lt;ycut&gt;</samp>&rsquo;, &lsquo;<samp>&lt;min R&gt;</samp>&rsquo; and &lsquo;<samp>&lt;D parameter&gt;</samp>&rsquo; are
floating point numbers, which can also be given in a form that is
understood by the internal algebra interpreter, see <a href="#Interpreter">Interpreter</a>.
</p>
<p>The &lsquo;<samp>NJetFinder</samp>&rsquo; allows to select for kinematic configurations with
at least &lsquo;<samp>&lt;n&gt;</samp>&rsquo; jets that satisfy both, the &lsquo;<samp>&lt;ptmin&gt;</samp>&rsquo; and
the &lsquo;<samp>&lt;etmin&gt;</samp>&rsquo; minimum requirements and that are in a PseudoRapidity region
|eta|&lt;&lsquo;<samp>&lt;eta max&gt;</samp>&rsquo;. The &lsquo;<samp>&lt;exponent&gt;</samp>&rsquo; allows to apply a kt-algorithm
(1) or an anti-kt algorithm (-1). As only massless partons are clustered by 
default, the &lsquo;<samp>&lt;mass max&gt;</samp>&rsquo; allows to also include partons with a mass 
up to the specified values. This is useful e.g. in calculations with massive 
b-quarks which shall nonetheless satisfy jet criteria.
</p>
<p>The final option &lsquo;<samp>FastjetFinder</samp>&rsquo; allows to use the 
<a href="http://www.fastjet.fr">FastJet</a> plugin if enabled during configuration(*). 
</p>
<p>It takes the following mandatory arguments:
<code>&lt;algorithm&gt;</code> can take the values <code>kt,antikt,cambridge,siscone</code>, 
<code>&lt;n&gt;</code> is the minimum number of jets to be found, <code>&lt;ptmin&gt;</code> and 
<code>&lt;etmin&gt;</code> are the minimum transverse momentum and/or energy, 
<code>&lt;dr&gt;</code> is the radial parameter. Optional arguments are: 
<code>&lt;f(siscone)&gt;</code> (default 0.75), <code>&lt;eta-max&gt;</code> and <code>&lt;y-max&gt;</code> as 
maximal absolute (pseudo-)rapidity (default infinity),
<code>&lt;nb&gt;</code> and <code>&lt;nb2&gt;</code> set the number of required b-jets, where for the
former both b and anti-b quarks are counted equally towards b-jets, while for
the latter they are added with a relative sign as constituents, i.e. a jet
containing b and anti-b is not tagged.
</p>
<hr>
<a name="Universal-selector"></a>
<a name="Universal-selector-1"></a>
<h3 class="subsection">5.7.5 Universal selector</h3>
<a name="index-SHOW_005fVARIABLE_005fSYNTAX"></a>

<p>The universal selector is intended to implement non-standard cuts
on the matrix element level. Its syntax is
</p><pre class="verbatim">&quot;&lt;variable&gt;&quot; &lt;kf1&gt;,..,&lt;kfn&gt; &lt;min1&gt;,&lt;max1&gt;:..:&lt;minn&gt;,&lt;maxn&gt; [&lt;order1&gt;,...,&lt;orderm&gt;]
</pre>
<p><em>No additional white spaces are allowed</em>
</p>
<p>The first word has to be double-quoted, and contains the name
of the variable to cut on. The keywords for available predefined
&lt;variable&gt;s can be figured by running Sherpa &lsquo;<samp>SHOW_VARIABLE_SYNTAX=1</samp>&rsquo;.
Or alternatively, an arbitrary cut variable can be constructed using
the internal interpreter, see <a href="#Interpreter">Interpreter</a>. This is invoked
with the command &lsquo;<samp>Calc(...)</samp>&rsquo;. In the formula specified there
you have to use place holders for the momenta of the particles: 
&lsquo;<samp>p[0]</samp>&rsquo; ... &lsquo;<samp>p[n]</samp>&rsquo; hold the momenta of the respective particles 
&lsquo;<samp>kf1</samp>&rsquo; ... &lsquo;<samp>kfn</samp>&rsquo;. A list of available vector functions and
operators can be found here <a href="#Interpreter">Interpreter</a>.
</p>
<p>&lsquo;<samp>&lt;kf1&gt;,..,&lt;kfn&gt;</samp>&rsquo; specify the PDG codes of the particles
the variable has to be calculated from. In case this choice is
not unique in the final state, you have to specify multiple cut ranges
(&lsquo;<samp>&lt;min1&gt;,&lt;max1&gt;:..:&lt;minn&gt;,&lt;maxn&gt;</samp>&rsquo;) for all (combinations
of) particles you want to cut on, separated by semicolons.
</p>
<p>If no fourth argument is given, the order of cuts is determined
internally, according to Sherpa&rsquo;s process classification scheme.
This then has to be matched if you want to have different cuts
on certain different particles in the matrix element. To do this,
you should put enough (for the possible number of combinations 
of your particles) arbitrary ranges at first and run Sherpa 
with debugging output for the universal selector:
&lsquo;<samp>Sherpa OUTPUT=2[Variable_Selector::Trigger|15]</samp>&rsquo;.
This will start to produce lots of output during integration,
at which point you can interrupt the run (Ctrl-c). In the
&lsquo;<samp>Variable_Selector::Trigger(): {...}</samp>&rsquo; output you can see,
which particle combinations have been found and which cut range
your selector has held for them (vs. the arbitrary range you
specified). From that you should get an idea, in which order
the cuts have to be specified.
</p>
<p>If the fourth argument is given, particles are ordered
before the cut is applied. Possible orderings are &lsquo;<samp>PT_UP</samp>&rsquo;,
&lsquo;<samp>ET_UP</samp>&rsquo;, &lsquo;<samp>E_UP</samp>&rsquo;, &lsquo;<samp>ETA_UP</samp>&rsquo; and &lsquo;<samp>ETA_DOWN</samp>&rsquo;,
(increasing p_T, E_T, E, eta, and decreasing eta). They have to be specified
for each of the particles, separated by commas.
</p>

<p>Examples
</p>
<dl compact="compact">
<dt>Two-body transverse mass</dt>
<dd>
<p>      &quot;mT&quot; 11,-12 50,E_CMS
</p>
</dd>
<dt>Cut on the pT of only the hardest lepton in the event</dt>
<dd>
<p>      &quot;PT&quot;   90   50.0,E_CMS   [PT_UP]
</p>
</dd>
<dt>Using bool operations to restrict eta of the electron to |eta| &lt; 1.1 or 1.5 &lt; |eta| &lt; 2.5</dt>
<dd>
<p>      &quot;Calc(abs(Eta(p[0]))&lt;1.1||(abs(Eta(p[0]))&gt;1.5&amp;&amp;abs(Eta(p[0]))&lt;2.5))&quot; 11 1,1
</p>
<p>      Note the range 1,1 meaning true for bool operations.
</p>
</dd>
<dt>Requesting opposite side tag jets in VBF would for example need a setup like this</dt>
<dd>
<p>      &quot;Calc(Eta(p[0])*Eta(p[1]))&quot; 93,93 -100,0 [PT_UP,PT_UP]
</p>
</dd>
<dt>Restricting electron+photon mass to be outside of [87.0,97.0]:</dt>
<dd>
<p>      &quot;Calc(Mass(p[0]+p[1])&lt;87.0||Mass(p[0]+p[1])&gt;97.0)&quot; 11,22 1,1
</p>
</dd>
<dt>In &lsquo;<samp>Z[lepton lepton] Z[lepton lepton]</samp>&rsquo;, cut on mass of lepton-pairs produced from Z&rsquo;s:</dt>
<dd>
<p>      &quot;m&quot;   90,90   80,100:0,E_CMS:0,E_CMS:0,E_CMS:0,E_CMS:80,100
</p>
<p>      Here we use knowledge about the internal ordering to cut only on the correct lepton pairs.
</p>
</dd>
</dl>


<hr>
<a name="Minimum-selector"></a>
<a name="Minimum-selector-1"></a>
<h3 class="subsection">5.7.6 Minimum selector</h3>

<p>This selector can combine several selectors to pass an event if either those passes the event.
It is mainly designed to generate more inclusive samples that, for instance, include several
jet finders and that allows a specification later. The syntax is
</p>
<pre class="verbatim">MinSelector {
  Selector 1
  Selector 2
  ...
} 
</pre>
<hr>
<a name="NLO-selectors"></a>
<a name="NLO-selectors-1"></a>
<h3 class="subsection">5.7.7 NLO selectors</h3>

<p>Phase-space cuts that are applied on next-to-leading order calculations must be defined in a
infrared safe way. Technically there is also a special treatment for the real (subtracted) 
correction required. Currently only the following selectors meet this requirement:
</p>
<dl compact="compact">
<dt>QCD parton cuts</dt>
<dd>
<pre class="verbatim">NJetFinder &lt;n&gt; &lt;ptmin&gt; &lt;etmin&gt; &lt;D parameter&gt; [&lt;exponent&gt;] [&lt;eta max&gt;] [&lt;mass max&gt;]
</pre><p>(see <a href="#Jet-finders">Jet finders</a>)
</p>
</dd>
<dt>Cuts on not strongly interacting particles</dt>
<dd>
<p><a href="#One-particle-selectors">One particle selectors</a>
</p><pre class="verbatim">PTNLO &lt;flavour code&gt; &lt;min value&gt; &lt;max value&gt;
RapidityNLO &lt;flavour code&gt; &lt;min value&gt; &lt;max value&gt;
PseudoRapidityNLO &lt;flavour code&gt; &lt;min value&gt; &lt;max value&gt;
</pre>
<p><a href="#Two-particle-selectors">Two particle selectors</a>
</p><pre class="verbatim">PT2NLO &lt;flavour1 code&gt; &lt;flavour2 code&gt; &lt;min value&gt; &lt;max value&gt;
Mass &lt;flavour1 code&gt; &lt;flavour2 code&gt; &lt;min value&gt; &lt;max value&gt;
</pre>
</dd>
<dt>Cuts on photons</dt>
<dd>
<pre class="verbatim">IsolationCut 22 &lt;dR&gt; &lt;exponent&gt; &lt;epsilon&gt;
</pre><p>implements the Frixione isolation cone [<a href="#Frixione1998jh">Fri98</a>].
</p>
</dd>
<dt>The <a href="#Minimum-selector">Minimum selector</a> can be used if constructed with other selectors mentioned in this section</dt>
</dl>

<hr>
<a name="Fastjet-selector"></a>
<a name="Fastjet-selector-1"></a>
<h3 class="subsection">5.7.8 Fastjet selector</h3>

<p>If <a href="http://www.fastjet.fr">FastJet</a> is enabled(*), the momenta and nodal 
values of the jets found with Fastjet can be used to calculate more elaborate 
selector criteria. The syntax of this selector is
</p>
<pre class="verbatim">FastjetSelector &lt;expression&gt; &lt;algorithm&gt; &lt;n&gt; &lt;ptmin&gt; &lt;etmin&gt; &lt;dr&gt; [&lt;f(siscone)&gt;=0.75] [&lt;eta-max&gt;] [&lt;y-max&gt;] [&lt;bmode&gt;]
</pre>
<p>wherein <code>algorithm</code> can take the values <code>kt,antikt,cambridge,siscone</code>. 
In the algebraic <code>expression</code> <code>MU_n2</code> (n=2..njet+1) signify the nodal 
values of the jets found and <code>p[i]</code> are their momenta. For details see
<a href="#Scale-setters">Scale setters</a>. For example, in lepton pair production in 
association with jets
</p>
<pre class="verbatim">FastjetSelector Mass(p[4]+p[5])&gt;100. antikt 2 40. 0. 0.5
</pre>
<p>selects all phase space points where two anti-kt jets with at least 40 GeV of
transverse momentum and an invariant mass of at least 100 GeV are found. The 
expression must calculate a boolean value.
The <code>bmode</code> parameter, if specified different from its default 0, allows
to use b-tagged jets only, based on the parton-level constituents of the jets.
There are two options: With <code>&lt;bmode&gt;=1</code> both b and anti-b quarks are
counted equally towards b-jets, while for <code>&lt;bmode&gt;=2</code> they are added with a
relative sign as constituents, i.e. a jet containing b and anti-b is not tagged.
</p>
<p>(*) If FastJet has not been enabled during configuration of your Sherpa
installation, you can still build a FastJet-based selector plugin by including
the content of any necessary functions (e.g. from <code>Fastjet_Helpers.[HC]</code>)
explicitly and linking against FastJet at compile time of the plugin.
</p><hr>
<a name="Integration"></a>
<a name="Integration-1"></a>
<h2 class="section">5.8 Integration</h2>

<p>The integration setup is covered by the &lsquo;(integration)&rsquo; section of
the steering file or the integration data file &lsquo;Integration.dat&rsquo;,
respectively.
</p>
<p>The following parameters are used to steer the integration.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#INTEGRATION_005fERROR">5.8.1 INTEGRATION_ERROR</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">    The relative integration error
</td></tr>
<tr><td align="left" valign="top"><a href="#INTEGRATOR">5.8.2 INTEGRATOR</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           The integrator type
</td></tr>
<tr><td align="left" valign="top"><a href="#VEGAS">5.8.3 VEGAS</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                Whether to enable Vegas
</td></tr>
<tr><td align="left" valign="top"><a href="#FINISH_005fOPTIMIZATION">5.8.4 FINISH_OPTIMIZATION</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">  Whether to fully optimise the Vegas grid
</td></tr>
<tr><td align="left" valign="top"><a href="#PSI_005fNMAX">5.8.5 PSI_NMAX</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">             Maximum number of points per process
</td></tr>
<tr><td align="left" valign="top"><a href="#PSI_005fITMIN">5.8.6 PSI_ITMIN</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            Minimum number of points per iteration cycle
</td></tr>
<tr><td align="left" valign="top"><a href="#PSI_005fITMAX">5.8.7 PSI_ITMAX</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            Maximum number of points per iteration cycle
</td></tr>
<tr><td align="left" valign="top"><a href="#PSI_005fITMIN_005fBY_005fNODE">5.8.8 PSI_ITMIN_BY_NODE</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">    Minimum number of points per iteration by node
</td></tr>
<tr><td align="left" valign="top"><a href="#PSI_005fITMAX_005fBY_005fNODE">5.8.9 PSI_ITMAX_BY_NODE</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">    Maximum number of points per iteration by node
</td></tr>
</table>


<hr>
<a name="INTEGRATION_005fERROR"></a>
<a name="INTEGRATION_005fERROR-1"></a>
<h3 class="subsection">5.8.1 INTEGRATION_ERROR</h3>
<a name="index-INTEGRATION_005fERROR"></a>
<p>Specifies the relative integration error target.
</p>

<hr>
<a name="INTEGRATOR"></a>
<a name="INTEGRATOR-1"></a>
<h3 class="subsection">5.8.2 INTEGRATOR</h3>
<a name="index-INTEGRATOR"></a>
<p>Specifies the integrator. The possible integrator types
depend on the matrix element generator. In general users 
should rely on the default value and otherwise seek the 
help of the authors, see <a href="#Authors">Authors</a>.
Within AMEGIC++ the options &lsquo;<samp>AMEGIC_INTEGRATOR</samp>&rsquo; and
&lsquo;<samp>AMEGIC_RS_INTEGRATOR</samp>&rsquo; can be used to steer the behaviour
of the default integrator
</p><ul>
<li> &lsquo;<samp>4</samp>&rsquo;: building up the channels is achieved through 
respecting the peak structure given by the propagators. The 
algorithm works recursively starting from the initial state.
</li><li> &lsquo;<samp>5</samp>&rsquo;: this is an extension of option 4. In the case of competing peaks (e.g. a Higgs boson decaying into W+W−, which further decay), additional channels are produced to account for all kinematical conﬁgurations where one 
of the propagating particles is produced on its mass shell.
</li><li> &lsquo;<samp>6</samp>&rsquo;: in contrast to option 4 the algorithm now starts from the 
ﬁnal state. The extra channels described in option 5 are produced as well. 
This is the default integrator.
</li><li> &lsquo;<samp>7</samp>&rsquo;: Same as option &lsquo;<samp>4</samp>&rsquo; but with tweaked 
exponents. Optimised for the integration of real-subtracted 
matrix-elements.
</li></ul>

<p>In addition, a few ME-generator independent integrators
have been implemented for specific processes:
</p><ul>
<li> &lsquo;<samp>Rambo</samp>&rsquo;: RAMBO [<a href="#Kleiss1985gy">Kle85a</a>]. Generates isotropic 
final states.
</li><li> &lsquo;<samp>VHAAG</samp>&rsquo;: Vegas-improved HAAG integrator [<a href="#vanHameren2002tc">Ham02</a>].
</li><li> &lsquo;<samp>VHAAG_res</samp>&rsquo;: is an integrator for a final state of a weak boson,
decaying into two particles plus two or more jets based on HAAG [<a href="#vanHameren2002tc">Ham02</a>]. 
When this integrator is used the keyword <code>VHAAG_RES_KF</code> specifies
the kf-code of the weak boson, the default is W (<code>24</code>).
<code>VHAAG_RES_D1</code> and <code>VHAAG_RES_D2</code> define the
positions of the Boson decay products within the internal
naming scheme, where <code>2</code> is the position of the first
outgoing particle. The defaults are <code>VHAAG_RES_D1=2</code>
and <code>VHAAG_RES_D2=3</code>, which is the correct choice for
all processes where the decay products are the only not
strongly interacting final state particles.
</li></ul>

<hr>
<a name="VEGAS"></a>
<a name="VEGAS-1"></a>
<h3 class="subsection">5.8.3 VEGAS</h3>
<a name="index-VEGAS"></a>
<p>Specifies whether or not to employ Vegas for adaptive integration.
The two possible values are &lsquo;<samp>On</samp>&rsquo; and &lsquo;<samp>Off</samp>&rsquo;, the
default being &lsquo;<samp>On</samp>&rsquo;.
</p>

<hr>
<a name="FINISH_005fOPTIMIZATION"></a>
<a name="FINISH_005fOPTIMIZATION-1"></a>
<h3 class="subsection">5.8.4 FINISH_OPTIMIZATION</h3>
<a name="index-FINISH_005fOPTIMIZATION"></a>
<p>Specifies whether the full Vegas optimization is to be carried out.
The two possible options are &lsquo;<samp>On</samp>&rsquo; and &lsquo;<samp>Off</samp>&rsquo;, the
default being &lsquo;<samp>On</samp>&rsquo;.
</p>
<hr>
<a name="PSI_005fNMAX"></a>
<a name="PSI_005fNMAX-1"></a>
<h3 class="subsection">5.8.5 PSI_NMAX</h3>
<a name="index-PSI_005fNMAX"></a>
<p>The maximum number of points before cuts to be generated during integration.
This parameter acts on a process-by-process basis.
</p>
<hr>
<a name="PSI_005fITMIN"></a>
<a name="PSI_005fITMIN-1"></a>
<h3 class="subsection">5.8.6 PSI_ITMIN</h3>
<a name="index-PSI_005fITMIN"></a>
<p>The minimum number of points used for every optimisation cycle. Please note 
that it might be increased automatically for complicated processes.
</p>
<hr>
<a name="PSI_005fITMAX"></a>
<a name="PSI_005fITMAX-1"></a>
<h3 class="subsection">5.8.7 PSI_ITMAX</h3>
<a name="index-PSI_005fITMAX"></a>
<p>The maximum number of points used for every optimisation cycle. Please note 
that for complicated processes the number given might be insufficient for 
a meaningful optimisation.
</p>
<hr>
<a name="PSI_005fITMIN_005fBY_005fNODE"></a>
<a name="PSI_005fITMIN_005fBY_005fNODE-1"></a>
<h3 class="subsection">5.8.8 PSI_ITMIN_BY_NODE</h3>
<a name="index-PSI_005fITMIN_005fBY_005fNODE"></a>
<p>Same as <a href="#PSI_005fITMIN">PSI_ITMIN</a>, but specified per node to allow tuning of 
integration performance in large-scale MPI runs.
</p>
<hr>
<a name="PSI_005fITMAX_005fBY_005fNODE"></a>
<a name="PSI_005fITMAX_005fBY_005fNODE-1"></a>
<h3 class="subsection">5.8.9 PSI_ITMAX_BY_NODE</h3>
<a name="index-PSI_005fITMAX_005fBY_005fNODE"></a>
<p>Same as <a href="#PSI_005fITMAX">PSI_ITMAX</a>, but specified per node to allow tuning of 
integration performance in large-scale MPI runs.
</p><hr>
<a name="Hard-decays"></a>
<a name="Hard-decays-1"></a>
<h2 class="section">5.9 Hard decays</h2>
<a name="index-HARD_005fDECAYS"></a>
<a name="index-STABLE_005b_003cid_003e_005d-1"></a>

<p>The handler for decays of particles produced in the hard scattering process
(e.g. W, Z, top, Higgs) can be enabled using the &lsquo;<samp>HARD_DECAYS=1</samp>&rsquo; switch.
Which (anti)particles should be treated as unstable is determined by the
&lsquo;<samp>STABLE[&lt;id&gt;]</samp>&rsquo; switch described in <a href="#Models">Models</a>.
</p>
<p>This decay module can also be used on top of NLO matrix elements, but it does
not include any NLO corrections in the decay matrix elements themselves.
</p>
<p>Note that the decay handler is an afterburner at the event generation level.
It does not affect the calculation and integration of the hard scattering
matrix elements. The cross section is thus unaffected during integration, and
the branching ratios (if any decay channels have been disabled) are only taken
into account for the event weights and cross section output at the end of event
generation (if not disabled with the &lsquo;<samp>HDH_BR_WEIGHTS</samp>&rsquo; option, cf. below).
Furthermore any cuts or scale definitions are not affected by decays
and operate only on the inclusively produced particles before decays.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#HDH_005fSTATUS">5.9.1 HDH_STATUS</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#HDH_005fWIDTH">5.9.2 HDH_WIDTH</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#HARD_005fSPIN_005fCORRELATIONS">5.9.3 HARD_SPIN_CORRELATIONS</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#STORE_005fDECAY_005fRESULTS">5.9.4 STORE_DECAY_RESULTS</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#DECAY_005fRESULT_005fDIRECTORY">5.9.5 DECAY_RESULT_DIRECTORY</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#HDH_005fSET_005fWIDTHS">5.9.6 HDH_SET_WIDTHS</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#HDH_005fBR_005fWEIGHTS">5.9.7 HDH_BR_WEIGHTS</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#HARD_005fMASS_005fSMEARING">5.9.8 HARD_MASS_SMEARING</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#RESOLVE_005fDECAYS">5.9.9 RESOLVE_DECAYS</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#DECAY_005fTAU_005fHARD">5.9.10 DECAY_TAU_HARD</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Decay-table-integration-settings">5.9.11 Decay table integration settings</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<a name="HDH_005fSTATUS"></a>
<a name="HDH_005fSTATUS-1"></a>
<h3 class="subsection">5.9.1 HDH_STATUS</h3>
<a name="index-HDH_005fSTATUS_005b_003cidcode_003e_005d"></a>

<p>This option allows to explicitly force or disable a decay channel identified
by its ID code (which can be found in the decay table printed to screen during
the run).
The status can take the following values:
</p><dl compact="compact">
<dt>&lsquo;<samp>HDH_STATUS[&lt;idcode&gt;]=-1</samp>&rsquo;</dt>
<dd><p>Decay channel is disabled and does not contribute to total width.
</p></dd>
<dt>&lsquo;<samp>HDH_STATUS[&lt;idcode&gt;]=0</samp>&rsquo;</dt>
<dd><p>Decay channel is disabled but contributes to total width.
</p></dd>
<dt>&lsquo;<samp>HDH_STATUS[&lt;idcode&gt;]=1 (default)</samp>&rsquo;</dt>
<dd><p>Decay channel is enabled.
</p></dd>
<dt>&lsquo;<samp>HDH_STATUS[&lt;idcode&gt;]=2</samp>&rsquo;</dt>
<dd><p>Decay channel is forced.
</p></dd>
</dl>
<p>For example, to disable the hadronic decay channels of the W boson one would use:
</p><pre class="verbatim">HDH_STATUS[24,2,-1]=0
HDH_STATUS[24,4,-3]=0
HDH_STATUS[-24,-2,1]=0
HDH_STATUS[-24,-4,3]=0
</pre><p>In the same way, the bottom decay mode of the Higgs could be forced using:
</p><pre class="verbatim">HDH_STATUS[25,5,-5]=2
</pre>
<p>Note that the ordering of the decay products in &lsquo;<samp>&lt;idcode&gt;</samp>&rsquo; is important and
has to be identical to the ordering in the decay table printed to screen.
Multiple decay channels (also for different decaying particles and
antiparticles) can be specified as separate lines. It is also possible to
request multiple forced decay channels for the same particle, all other channels
will then automatically be disabled.
</p>

<hr>
<a name="HDH_005fWIDTH"></a>
<a name="HDH_005fWIDTH-1"></a>
<h3 class="subsection">5.9.2 HDH_WIDTH</h3>
<a name="index-HDH_005fWIDTH_005b_003cidcode_003e_005d"></a>

<p>This option allows to overwrite the calculated partial width (in GeV) of a given decay
channel, and even to add new inactive channels which contribute to the total
width. This is useful to adjust the branching ratios, which are used for the
relative contributions of different channels and also influence the cross
section during event generation, as well as the total width which is used for
the lineshape of the resonance.
</p>
<p>An example to set (/add) the partial widths of the <code>H-&gt;ff</code>, <code>H-&gt;gg</code>
and <code>H-&gt;yy</code> channels can be seen in the following. The values have been
taken from
<a href="https://twiki.cern.ch/twiki/bin/view/LHCPhysics/CERNYellowReportPageBR3">LHCHXSWG</a>)
for <code>MASS[25]=125</code> and <code>WIDTH[25]=0.00407</code>:
</p>
<pre class="verbatim">HDH_WIDTH[25,5,-5]=2.35e-3
HDH_WIDTH[25,15,-15]=2.57e-4
HDH_WIDTH[25,13,-13]=8.91e-7
HDH_WIDTH[25,4,-4]=1.18e-4
HDH_WIDTH[25,3,-3]=1.00e-6
HDH_WIDTH[25,21,21]=3.49e-4
HDH_WIDTH[25,22,22]=9.28e-6
</pre>
<p>Another example, setting the leptonic and hadronic decay channels of W and Z
bosons to the PDG values, would be specified as follows:
</p><pre class="verbatim">HDH_WIDTH[24,2,-1]=0.7041
HDH_WIDTH[24,4,-3]=0.7041
HDH_WIDTH[24,12,-11]=0.2256
HDH_WIDTH[24,14,-13]=0.2256
HDH_WIDTH[24,16,-15]=0.2256
HDH_WIDTH[-24,-2,1]=0.7041
HDH_WIDTH[-24,-4,3]=0.7041
HDH_WIDTH[-24,-12,11]=0.2256
HDH_WIDTH[-24,-14,13]=0.2256
HDH_WIDTH[-24,-16,15]=0.2256
HDH_WIDTH[23,1,-1]=0.3828
HDH_WIDTH[23,2,-2]=0.2980
HDH_WIDTH[23,3,-3]=0.3828
HDH_WIDTH[23,4,-4]=0.2980
HDH_WIDTH[23,5,-5]=0.3828
HDH_WIDTH[23,11,-11]=0.0840
HDH_WIDTH[23,12,-12]=0.1663
HDH_WIDTH[23,13,-13]=0.0840
HDH_WIDTH[23,14,-14]=0.1663
HDH_WIDTH[23,15,-15]=0.0840
HDH_WIDTH[23,16,-16]=0.1663
</pre>

<hr>
<a name="HARD_005fSPIN_005fCORRELATIONS"></a>
<a name="HARD_005fSPIN_005fCORRELATIONS-1"></a>
<h3 class="subsection">5.9.3 HARD_SPIN_CORRELATIONS</h3>
<a name="index-HARD_005fSPIN_005fCORRELATIONS"></a>

<p>Spin correlations between the hard scattering process and the following decay
processes are enabled by default. If you want to disable them, e.g. for spin
correlation studies, you can specify the option
&lsquo;<samp>HARD_SPIN_CORRELATIONS=0</samp>&rsquo;.
</p>
<hr>
<a name="STORE_005fDECAY_005fRESULTS"></a>
<a name="STORE_005fDECAY_005fRESULTS-1"></a>
<h3 class="subsection">5.9.4 STORE_DECAY_RESULTS</h3>
<a name="index-STORE_005fDECAY_005fRESULTS"></a>

<p>The decay table and partial widths are calculated on-the-fly during the
initialization phase of Sherpa from the given model and its particles and
interaction vertices. To store these results in the <code>Results/Decays</code>
directory, one has to specify &lsquo;<samp>STORE_DECAY_RESULTS=1</samp>&rsquo;. In case
existing decay tables are to be read in &lsquo;<samp>STORE_DECAY_RESULTS=1</samp>&rsquo;
is to be specified as well. Please note, that Sherpa will delete decay
channels present in the read in results but not in the present model with
present parameters by default. To prevent Sherpa from updating the
decay table files accordingly specify &lsquo;<samp>STORE_DECAY_RESULTS=2</samp>&rsquo;.
</p>
<hr>
<a name="DECAY_005fRESULT_005fDIRECTORY"></a>
<a name="DECAY_005fRESULT_005fDIRECTORY-1"></a>
<h3 class="subsection">5.9.5 DECAY_RESULT_DIRECTORY</h3>
<a name="index-DECAY_005fRESULT_005fDIRECTORY"></a>

<p>Specifies the name of the directory where the decay results are to be 
stored. Defaults to the value of <a href="#RESULT_005fDIRECTORY">RESULT_DIRECTORY</a>.
</p>
<hr>
<a name="HDH_005fSET_005fWIDTHS"></a>
<a name="HDH_005fSET_005fWIDTHS-1"></a>
<h3 class="subsection">5.9.6 HDH_SET_WIDTHS</h3>
<a name="index-HDH_005fSET_005fWIDTHS"></a>
<a name="index-WIDTH_005b_003cid_003e_005d-1"></a>

<p>The decay handler computes LO partial and total decay widths and generates
decays with corresponding branching fractions, independently from the particle
widths specified by &lsquo;<samp>WIDTH[&lt;id&gt;]</samp>&rsquo;. The latter are relevant only for the
core process and should be set to zero for all unstable particles appearing
in the core-process final state. This guarantees on-shellness and gauge
invariance of the core process, and subsequent decays can be handled by the
afterburner.
In constrast, &lsquo;<samp>WIDTH[&lt;id&gt;]</samp>&rsquo; should be set to the physical width when unstable
particles appear (only) as intermediate states in the core process, i.e. when
production and decay are handled as a full process or using
<code>Decay</code>/<code>DecayOS</code>.
In this case, the option &lsquo;<samp>HDH_SET_WIDTHS=1</samp>&rsquo; permits to overwrite the
&lsquo;<samp>WIDTH[&lt;id&gt;]</samp>&rsquo; values of unstable particles by the LO widths computed by
the decay handler.
</p>
<hr>
<a name="HDH_005fBR_005fWEIGHTS"></a>
<a name="HDH_005fBR_005fWEIGHTS-1"></a>
<h3 class="subsection">5.9.7 HDH_BR_WEIGHTS</h3>
<a name="index-HDH_005fBR_005fWEIGHTS"></a>

<p>By default (&lsquo;<samp>HDH_BR_WEIGHTS=1</samp>&rsquo;), weights for events which involve a hard
decay are multiplied with the corresponding branching ratios (if decay channels
have been disabled). This also means that the total cross section at the end of
the event generation run already includes the appropriate BR factors. If you
want to disable that, e.g. because you want to multiply with your own modified
BR, you can set the option &lsquo;<samp>HDH_BR_WEIGHTS=0</samp>&rsquo;.
</p>

<hr>
<a name="HARD_005fMASS_005fSMEARING"></a>
<a name="HARD_005fMASS_005fSMEARING-1"></a>
<h3 class="subsection">5.9.8 HARD_MASS_SMEARING</h3>
<a name="index-HARD_005fMASS_005fSMEARING"></a>

<p>With the default of &lsquo;<samp>HARD_MASS_SMEARING=1</samp>&rsquo; the kinematic mass of the unstable
propagator is distributed according to a Breit-Wigner shape a posteriori. All
matrix elements are still calculated in the narrow-width approximation with
onshell particles. Only the kinematics are affected.
To keep all intermediate particles onshell use &lsquo;<samp>HARD_MASS_SMEARING=0</samp>&rsquo;.
</p>
<hr>
<a name="RESOLVE_005fDECAYS"></a>
<a name="RESOLVE_005fDECAYS-1"></a>
<h3 class="subsection">5.9.9 RESOLVE_DECAYS</h3>
<a name="index-RESOLVE_005fDECAYS"></a>

<p>There are different options how to decide when a 1-&gt;2 process should be replaced
by the respective 1-&gt;3 processes built from its decaying daughter particles.
</p>
<dl compact="compact">
<dt>&lsquo;<samp>RESOLVE_DECAYS=Threshold</samp>&rsquo;</dt>
<dd><p>(default)
Only when the sum of decay product masses exceeds the decayer mass.
</p></dd>
<dt>&lsquo;<samp>RESOLVE_DECAYS=ByWidth</samp>&rsquo;</dt>
<dd><p>As soon as the sum of 1-&gt;3 partial widths exceeds the 1-&gt;2 partial width.
</p></dd>
<dt>&lsquo;<samp>RESOLVE_DECAYS=None</samp>&rsquo;</dt>
<dd><p>No 1-&gt;3 decays are taken into account.
</p></dd>
</dl>

<hr>
<a name="DECAY_005fTAU_005fHARD"></a>
<a name="DECAY_005fTAU_005fHARD-1"></a>
<h3 class="subsection">5.9.10 DECAY_TAU_HARD</h3>
<a name="index-DECAY_005fTAU_005fHARD"></a>

<p>By default, the tau lepton is decayed by the hadron decay module,
<a href="#Hadron-decays">Hadron decays</a>, which includes not only the leptonic decay channels but
also the hadronic modes. If &lsquo;<samp>DECAY_TAU_HARD=1</samp>&rsquo; is specified, the tau
lepton will be decayed in the hard decay handler, which only takes leptonic and
partonic decay modes into account. Note, that in this case the tau needs to also
be set massive with &lsquo;<samp>MASSIVE[15]=1</samp>&rsquo;.
</p>
<hr>
<a name="Decay-table-integration-settings"></a>
<a name="Decay-table-integration-settings-1"></a>
<h3 class="subsection">5.9.11 Decay table integration settings</h3>
<a name="index-HDH_005fINT_005fACCURACY"></a>
<a name="index-HDH_005fINT_005fTARGET_005fMODE"></a>
<a name="index-HDH_005fINT_005fNITER"></a>

<p>Three parameters can be used to steer the accuracy and time consumption of the
calculation of the partial widths in the decay table:
&lsquo;<samp>HDH_INT_ACCURACY=0.01</samp>&rsquo; specifies a relative accuracy for the
integration. The corresponding target reference is either the given total width
of the decaying particle (&lsquo;<samp>HDH_INT_TARGET_MODE=0</samp>&rsquo;, default) or the
calculated partial decay width (&lsquo;<samp>HDH_INT_TARGET_MODE=1</samp>&rsquo;).
The option &lsquo;<samp>HDH_INT_NITER=2500</samp>&rsquo; can be used to change the number of
points per integration iteration, and thus also the minimal number of points to
be used in an integration.
</p><hr>
<a name="Shower-Parameters"></a>
<a name="Parton-showers"></a>
<h2 class="section">5.10 Parton showers</h2>

<p>The shower setup is covered by the &lsquo;(shower)&rsquo; section of
the steering file or the shower data file &lsquo;Shower.dat&rsquo;,
respectively.
</p>

<p>The following parameters are used to steer the shower setup.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#SHOWER_005fGENERATOR">5.10.1 SHOWER_GENERATOR</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">      Tag to set Sherpa&rsquo;s shower generator.
</td></tr>
<tr><td align="left" valign="top"><a href="#JET_005fCRITERION">5.10.2 JET_CRITERION</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         Tag to set Sherpa&rsquo;s jet criterion.
</td></tr>
<tr><td align="left" valign="top"><a href="#MASSIVE_005fPS">5.10.3 MASSIVE_PS</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            Tag to treat partons as massive in the shower.
</td></tr>
<tr><td align="left" valign="top"><a href="#MASSLESS_005fPS">5.10.4 MASSLESS_PS</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Tag to treat partons as massless in the shower.
</td></tr>
<tr><td align="left" valign="top"><a href="#CS-Shower-options">5.10.5 CS Shower options</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">     Options for Sherpa&rsquo;s default shower.         
</td></tr>
</table>


<hr>
<a name="SHOWER_005fGENERATOR"></a>
<a name="SHOWER_005fGENERATOR-1"></a>
<h3 class="subsection">5.10.1 SHOWER_GENERATOR</h3>

<p>The only full-fledged shower currently available in Sherpa is 
&lsquo;<samp>CSS</samp>&rsquo;, and this is the default for this tag. See the 
module summaries in <a href="#Basic-structure">Basic structure</a> for details about 
this shower. For cross-checks in pure parton shower setups,
one can use &lsquo;<samp>Dire</samp>&rsquo;. In this case, one also needs to 
set &lsquo;<samp>CSS_IS_AS_FAC=1</samp>&rsquo;, &lsquo;<samp>CSS_FS_AS_FAC=1</samp>&rsquo;, 
&lsquo;<samp>CSS_IS_PT2MIN=3</samp>&rsquo;, and &lsquo;<samp>CSS_FS_PT2MIN=3</samp>&rsquo;.
</p>
<p>Other shower modules are in principle supported and more
choices will be provided by Sherpa in the near future.
To list all available shower modules, the tag 
<code>SHOW_SHOWER_GENERATORS=1</code> can be specified on the
command line. 
</p>
<p><code>SHOWER_GENERATOR=None</code> switches parton showering off completely.
However, even in the case of strict fixed order calculations, this might
not be the desired behaviour as, for example, then neither the METS scale
setter, cf. <a href="#SCALES">SCALES</a>, nor Sudakov rejection weights can be employed.
To circumvent when using the CS Shower see <a href="#CS-Shower-options">CS Shower options</a>.
</p>
<hr>
<a name="JET_005fCRITERION"></a>
<a name="JET_005fCRITERION-1"></a>
<h3 class="subsection">5.10.2 JET_CRITERION</h3>

<p>The only natively supported option in Sherpa is &lsquo;<samp>CSS</samp>&rsquo;, 
and this is also the default. The corresponding jet criterion is described 
in [<a href="#Hoeche2009rj">Hoe09</a>]. A custom jet criterion, tailored to a specific
experimental analysis, can be supplied using Sherpa&rsquo;s plugin mechanism.
</p>
<hr>
<a name="MASSIVE_005fPS"></a>
<a name="MASSIVE_005fPS-1"></a>
<h3 class="subsection">5.10.3 MASSIVE_PS</h3>

<p>This option instructs Sherpa to treat certain partons as massive 
in the shower, which have been considered massless by the matrix element.
The argument is a list of parton flavours, for example &lsquo;<samp>MASSIVE_PS 4 5</samp>&rsquo;,
if both c- and b-quarks are to be treated as massive.
</p>
<hr>
<a name="MASSLESS_005fPS"></a>
<a name="MASSLESS_005fPS-1"></a>
<h3 class="subsection">5.10.4 MASSLESS_PS</h3>

<p>When hard decays are used, Sherpa treats all flavours as massive in the parton
shower. This option instructs Sherpa to treat certain partons as massless
in the shower nonetheless. The argument is a list of parton flavours, for
example &lsquo;<samp>MASSLESS_PS 1 2 3</samp>&rsquo;, if u-, d- and s-quarks are to be treated
as massless.
</p>
<hr>
<a name="CS-Shower-options"></a>
<a name="CS-Shower-options-1"></a>
<h3 class="subsection">5.10.5 CS Shower options</h3>
<a name="index-CSS_005fKIN_005fSCHEME"></a>
<a name="index-CSS_005fIS_005fPT2MIN"></a>
<a name="index-CSS_005fFS_005fPT2MIN"></a>
<a name="index-CSS_005fIS_005fAS_005fFAC"></a>
<a name="index-CSS_005fFS_005fAS_005fFAC"></a>
<a name="index-CSS_005fEW_005fMODE"></a>
<a name="index-CSS_005fNOEM"></a>
<a name="index-CSS_005fMAXEM"></a>
<a name="index-CSS_005fMASS_005fTHRESHOLD"></a>
<a name="index-CSS_005fEVOLUTION_005fSCHEME"></a>
<a name="index-CSS_005fSCALE_005fSCHEME"></a>
<a name="index-CSS_005fALPHAS_005fFREEZE_005fMODE"></a>

<p>Sherpa&rsquo;s default shower module is based on [<a href="#Schumann2007mg">Sch07a</a>].
A new ordering parameter for initial state splitters was introduced 
in [<a href="#Hoeche2009rj">Hoe09</a>] and a novel recoil strategy for initial state 
splittings was proposed in [<a href="#Hoeche2009xc">Hoe09a</a>]. 
While the ordering variable is fixed, the recoil strategy for dipoles 
with initial-state emitter and final-state spectator can be changed 
for systematics studies. Setting &lsquo;<samp>CSS_KIN_SCHEME=0</samp>&rsquo; 
corresponds to using the recoil scheme proposed in [<a href="#Hoeche2009xc">Hoe09a</a>], 
while &lsquo;<samp>CSS_KIN_SCHEME=1</samp>&rsquo; (default) enables the original recoil strategy.
The lower cutoff of the shower evolution can be set via &lsquo;<samp>CSS_FS_PT2MIN</samp>&rsquo;
and &lsquo;<samp>CSS_IS_PT2MIN</samp>&rsquo; for final and initial state shower, respectively. 
Note that this value is specified in GeV^2. Scale factors for the evaluation
of the strong coupling in the parton shower are given by &lsquo;<samp>CSS_FS_AS_FAC</samp>&rsquo;
and &lsquo;<samp>CSS_IS_AS_FAC</samp>&rsquo;. They multiply the ordering parameter, which is
given in units of GeV^2.
</p>
<p>By default, only QCD splitting functions are enabled in the shower.
If you also want to allow for photon splittings, you can enable them
by using &lsquo;<samp>CSS_EW_MODE=1</samp>&rsquo;. Note, that if you have leptons in your
matrix-element final state, they are by default treated by a soft
photon resummation as explained in <a href="#QED-Corrections">QED corrections</a>. To avoid
double counting, this has to be disabled as explained in that section.
</p>
<p>The CS Shower can be forced not to emit any partons setting
&lsquo;<samp>CSS_NOEM=1</samp>&rsquo;. Sudakov rejection weights for merged samples
are calculated nonetheless. Setting &lsquo;<samp>CSS_MAXEM=&lt;N&gt;</samp>&rsquo;, on the
other hand, forces the CS Shower to truncate its evolution at the
Nth emission. This setting, however does not necessarily compute all
Sudakov weights correctly. Both settings still enable the CS Shower
to be used in the METS scale setter, cf. <a href="#SCALES">SCALES</a>.
</p>
<p>The evolution variable of the CS shower can be changed using 
&lsquo;<samp>CSS_EVOLUTION_SCHEME</samp>&rsquo;. Two options are currently implemented,
which correspond to transverse momentum ordering (option 0) and modified
transverse momentum ordering (option 1). In addition, modified versions of these
options (option 2 and option 3) are implemented, which take parton masses into
account where applicable. The scale at which the strong 
coupling for gluon splitting into quarks is evaluated can be chosen
with &lsquo;<samp>CSS_SCALE_SCHEME</samp>&rsquo;, where 0 corresponds to the ordering 
parameter and 1 corresponds to invariant mass. Additionally, the CS shower
allows to disable splittings at scales below the on-shell mass of heavy
quarks. The upper limit for the corresponding heavy quark mass is set
using &lsquo;<samp>CSS_MASS_THRESHOLD</samp>&rsquo;.
</p>
<p>The cut-off behaviour of the strong coupling for scales at which its value
would formally exceed one can be set using &lsquo;<samp>CSS_ALPHAS_FREEZE_MODE</samp>&rsquo;.
Setting it to 0 (which is the default) means that the strong coupling evaluates
to zero at such scales (hard cut-off). Setting it to 1 lets it evaluate to one
instead (freeze-in). A freeze-in behaviour is preferable when reweighting
shower emissions, but it has not been used in the default Sherpa tune, and
should therefore not be used when comparing particle-level predictions to data.
</p><hr>
<a name="MPI-Parameters"></a>
<a name="Multiple-interactions"></a>
<h2 class="section">5.11 Multiple interactions</h2>

<p>The multiple parton interaction (MPI) setup is covered by
the &lsquo;(mi)&rsquo; section of the steering file or the
MPI data file &lsquo;MI.dat&rsquo;, respectively. The basic MPI model is described
in [<a href="#Sjostrand1987su">Sjo87</a>] while Sherpa&rsquo;s implementation details are
discussed in [<a href="#Alekhin2005dx">Ale05</a>]
</p>
<p>The following parameters are used to steer the MPI setup.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#MI_005fHANDLER">5.11.1 MI_HANDLER</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          The MPI handler
</td></tr>
<tr><td align="left" valign="top"><a href="#TURNOFF">5.11.2 TURNOFF</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">             The p_T turnoff
</td></tr>
<tr><td align="left" valign="top"><a href="#SCALE_005fMIN">5.11.3 SCALE_MIN</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           The p_T cutoff
</td></tr>
<tr><td align="left" valign="top"><a href="#PROFILE_005fFUNCTION">5.11.4 PROFILE_FUNCTION</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">    The hadron profile function
</td></tr>
<tr><td align="left" valign="top"><a href="#PROFILE_005fPARAMETERS">5.11.5 PROFILE_PARAMETERS</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">  The hadron profile function
</td></tr>
<tr><td align="left" valign="top"><a href="#REFERENCE_005fSCALE">5.11.6 REFERENCE_SCALE</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">     The reference scale
</td></tr>
<tr><td align="left" valign="top"><a href="#RESCALE_005fEXPONENT">5.11.7 RESCALE_EXPONENT</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">    The rescaling exponent
</td></tr>
<tr><td align="left" valign="top"><a href="#TURNOFF_005fEXPONENT">5.11.8 TURNOFF_EXPONENT</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">    The rescaling exponent for the turnoff
</td></tr>
<tr><td align="left" valign="top"><a href="#SIGMA_005fND_005fFACTOR">5.11.9 SIGMA_ND_FACTOR</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">     The non-diffractive cross section factor
</td></tr>
<tr><td align="left" valign="top"><a href="#MI_005fRESULT_005fDIRECTORY">5.11.10 MI_RESULT_DIRECTORY</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"> The directory for the MPI grid
</td></tr>
<tr><td align="left" valign="top"><a href="#MI_005fRESULT_005fDIRECTORY_005fSUFFIX">5.11.11 MI_RESULT_DIRECTORY_SUFFIX</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"> The suffix for the directory for the MPI grid
</td></tr>
</table>


<hr>
<a name="MI_005fHANDLER"></a>
<a name="MI_005fHANDLER-1"></a>
<h3 class="subsection">5.11.1 MI_HANDLER</h3>
<a name="index-MI_005fHANDLER"></a>
<p>Specifies the MPI handler. The two possible values
at the moment are &lsquo;<samp>None</samp>&rsquo; and &lsquo;<samp>Amisic</samp>&rsquo;.
</p>

<hr>
<a name="TURNOFF"></a>
<a name="TURNOFF-1"></a>
<h3 class="subsection">5.11.2 TURNOFF</h3>
<a name="index-TURNOFF"></a>
<p>Specifies the transverse momentum turnoff in GeV.
</p>
<hr>
<a name="SCALE_005fMIN"></a>
<a name="SCALE_005fMIN-1"></a>
<h3 class="subsection">5.11.3 SCALE_MIN</h3>
<a name="index-SCALE_005fMIN"></a>
<p>Specifies the transverse momentum integration cutoff in GeV.
</p>

<hr>
<a name="PROFILE_005fFUNCTION"></a>
<a name="PROFILE_005fFUNCTION-1"></a>
<h3 class="subsection">5.11.4 PROFILE_FUNCTION</h3>
<a name="index-PROFILE_005fFUNCTION"></a>
<p>Specifies the hadron profile function. The possible values are
&lsquo;<samp>Exponential</samp>&rsquo;, &lsquo;<samp>Gaussian</samp>&rsquo; and &lsquo;<samp>Double_Gaussian</samp>&rsquo;.
For the double gaussian profile, the relative core size and relative
matter fraction can be set using <a href="#PROFILE_005fPARAMETERS">PROFILE_PARAMETERS</a>.
</p>
<hr>
<a name="PROFILE_005fPARAMETERS"></a>
<a name="PROFILE_005fPARAMETERS-1"></a>
<h3 class="subsection">5.11.5 PROFILE_PARAMETERS</h3>
<a name="index-PROFILE_005fPARAMETERS"></a>
<p>The potential parameters for hadron profile functions, see 
<a href="#PROFILE_005fFUNCTION">PROFILE_FUNCTION</a>. For double gaussian profiles there are
two parameters, corresponding to the relative core size and relative
matter fraction.
</p>
<hr>
<a name="REFERENCE_005fSCALE"></a>
<a name="REFERENCE_005fSCALE-1"></a>
<h3 class="subsection">5.11.6 REFERENCE_SCALE</h3>
<a name="index-REFERENCE_005fSCALE"></a>
<p>Specifies the centre-of-mass energy at which the transverse momentum
integration cutoff is used as is, see <a href="#SCALE_005fMIN">SCALE_MIN</a>. 
This parameter should not be changed by the user. The default is
&lsquo;<samp>1800</samp>&rsquo;, corresponding to Tevatron Run I energies.
</p>
<hr>
<a name="RESCALE_005fEXPONENT"></a>
<a name="RESCALE_005fEXPONENT-1"></a>
<h3 class="subsection">5.11.7 RESCALE_EXPONENT</h3>
<a name="index-RESCALE_005fEXPONENT"></a>
<p>Specifies the rescaling exponent for fixing the transverse momentum
integration cutoff at centre-of-mass energies different from the
reference scale, see <a href="#SCALE_005fMIN">SCALE_MIN</a>, <a href="#REFERENCE_005fSCALE">REFERENCE_SCALE</a>.
</p>
<hr>
<a name="TURNOFF_005fEXPONENT"></a>
<a name="TURNOFF_005fEXPONENT-1"></a>
<h3 class="subsection">5.11.8 TURNOFF_EXPONENT</h3>
<a name="index-TURNOFF_005fEXPONENT"></a>
<p>Specifies the rescaling exponent for fixing the transverse momentum
turnoff at centre-of-mass energies different from the
reference scale, see <a href="#TURNOFF">TURNOFF</a>, <a href="#REFERENCE_005fSCALE">REFERENCE_SCALE</a>.
</p>
<hr>
<a name="SIGMA_005fND_005fFACTOR"></a>
<a name="SIGMA_005fND_005fFACTOR-1"></a>
<h3 class="subsection">5.11.9 SIGMA_ND_FACTOR</h3>
<a name="index-SIGMA_005fND_005fFACTOR"></a>
<p>Specifies the factor to scale the non-diffractive cross section 
calculated in the MPI initialisation.
</p>
<hr>
<a name="MI_005fRESULT_005fDIRECTORY"></a>
<a name="MI_005fRESULT_005fDIRECTORY-1"></a>
<h3 class="subsection">5.11.10 MI_RESULT_DIRECTORY</h3>
<a name="index-MI_005fRESULT_005fDIRECTORY"></a>
<p>Specifies the name of the directory where the MPI grid is stored. The 
default comprises the beam particles, their energies and the PDF used. 
In its default value, this information safeguards against using unsuitable 
grids for the current calculation, assuming a standard <a href="#TUNE">TUNE</a> has 
been used.
</p>
<hr>
<a name="MI_005fRESULT_005fDIRECTORY_005fSUFFIX"></a>
<a name="MI_005fRESULT_005fDIRECTORY_005fSUFFIX-1"></a>
<h3 class="subsection">5.11.11 MI_RESULT_DIRECTORY_SUFFIX</h3>
<a name="index-MI_005fRESULT_005fDIRECTORY_005fSUFFIX"></a>
<p>Supplements the default directory name for the MPI grid with a suffix.
</p><hr>
<a name="Hadronization"></a>
<a name="Hadronization-1"></a>
<h2 class="section">5.12 Hadronization</h2>

<p>The hadronization setup is covered by the &lsquo;(fragmentation)&rsquo; section of
the steering file or the fragmentation data file &lsquo;Fragmentation.dat&rsquo;,
respectively.
</p>
<p>It covers the fragmentation of partons into primordial hadrons as well as the
decays of unstable hadrons into stable final states.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Fragmentation">5.12.1 Fragmentation</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"> The fragmentation module, and its parameters.
</td></tr>
<tr><td align="left" valign="top"><a href="#Hadron-decays">5.12.2 Hadron decays</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"> The hadron decay module, and its parameters.
</td></tr>
</table>

<hr>
<a name="Fragmentation"></a>
<a name="Fragmentation-1"></a>
<h3 class="subsection">5.12.1 Fragmentation</h3>

<hr>
<a name="Fragmentation-models"></a>
<h4 class="subsubsection">5.12.1.1 Fragmentation models</h4>

<a name="index-FRAGMENTATION"></a>
<a name="index-MSTJ"></a>
<a name="index-MSTP"></a>
<a name="index-MSTU"></a>
<a name="index-PARP"></a>
<a name="index-PARJ"></a>
<a name="index-PARU"></a>

<p>The <code>FRAGMENTATION</code> parameter sets the fragmentation module to be employed
during event generation. 
</p><ul>
<li> 
      The default is &lsquo;<samp>Ahadic</samp>&rsquo;, enabling Sherpa&rsquo;s native hadronization 
      model AHADIC++, based on the cluster fragmentation model introduced in 
      [<a href="#Field1982dg">Fie82a</a>], [<a href="#Webber1983if">Web83</a>], [<a href="#Gottschalk1986bv">Got86</a>], 
      and [<a href="#Marchesini1987cf">Mar87</a>] and implementing some modifications 
      discussed in [<a href="#Winter2003tt">Win03</a>].   
</li><li> 
      the hadronization can be disabled with the value &lsquo;<samp>Off</samp>&rsquo;. 
</li><li> 
      To evaluate uncertainties stemming from the hadronization, Sherpa also 
      provides an interface to the Lund string fragmentation in Pythia 6.4 
      [<a href="#Sjostrand2006za">Sjo06</a>] by using the setting &lsquo;<samp>Lund</samp>&rsquo;.
      In this case, the standard Pythia switches &lsquo;<samp>MSTJ</samp>&rsquo;, &lsquo;<samp>MSTP</samp>&rsquo;,
      &lsquo;<samp>MSTU</samp>&rsquo;, &lsquo;<samp>PARP</samp>&rsquo;, &lsquo;<samp>PARJ</samp>&rsquo; and &lsquo;<samp>PARU</samp>&rsquo;
      can be used to steer the behaviour of the Lund string, see
      [<a href="#Sjostrand2006za">Sjo06</a>]. They are specified as
      <code>MSTJ(&lt;number&gt;)=&lt;value&gt;</code>.
</li></ul>

<p>The following parameters steer the &lsquo;<samp>Ahadic</samp>&rsquo; fragmentation model and
up-to-date default values of these parameters can be found in
<code>AHADIC++/Tools/Hadronisation_Parameters.C</code>.
</p>
<hr>
<a name="Hadron-constituents"></a>
<h4 class="subsubsection">5.12.1.2 Hadron constituents</h4>
<a name="index-M_005fUP_005fDOWN"></a>
<a name="index-M_005fSTRANGE"></a>
<a name="index-M_005fCHARM"></a>
<a name="index-M_005fBOTTOM"></a>
<a name="index-M_005fDIQUARK_005fOFFSET"></a>
<a name="index-M_005fBIND_005f0"></a>
<a name="index-M_005fBIND_005f1"></a>

<p>The constituent masses of the quarks and diquarks are given by 
</p><ul>
<li> <code>M_UP_DOWN</code>
</li><li> <code>M_STRANGE</code>
</li><li> <code>M_CHARM</code>
</li><li> <code>M_BOTTOM</code>
</li></ul>
<p>The diquark masses are composed of the quark 
masses and some additional parameters,
with 
</p><ul>
<li> <code>M_DIQUARK_OFFSET</code>
</li><li> <code>M_BIND_0</code>
</li><li> <code>M_BIND_1</code>
</li></ul>

<hr>
<a name="Hadron-multiplets"></a>
<h4 class="subsubsection">5.12.1.3 Hadron multiplets</h4>
<a name="index-MULTI_005fWEIGHT_005fL0R0_005fPSEUDOSCALARS"></a>
<a name="index-MULTI_005fWEIGHT_005fL0R0_005fVECTORS"></a>
<a name="index-MULTI_005fWEIGHT_005fL0R0_005fTENSORS2"></a>
<a name="index-MULTI_005fWEIGHT_005fL0R0_005fTENSORS3"></a>
<a name="index-MULTI_005fWEIGHT_005fL0R0_005fTENSORS4"></a>
<a name="index-MULTI_005fWEIGHT_005fL1R0_005fSCALARS"></a>
<a name="index-MULTI_005fWEIGHT_005fL1R0_005fAXIALVECTORS"></a>
<a name="index-MULTI_005fWEIGHT_005fL1R0_005fTENSORS2"></a>
<a name="index-MULTI_005fWEIGHT_005fL2R0_005fVECTORS"></a>
<a name="index-MULTI_005fWEIGHT_005fL3R0_005fVECTORS"></a>
<a name="index-MULTI_005fWEIGHT_005fL0R1_005fSCALARS"></a>
<a name="index-MULTI_005fWEIGHT_005fL0R1_005fAXIALVECTORS"></a>
<a name="index-MULTI_005fWEIGHT_005fL0R0_005fN_005f1_002f2"></a>
<a name="index-MULTI_005fWEIGHT_005fL0R0_005fN_002a_005f1_002f2"></a>
<a name="index-MULTI_005fWEIGHT_005fL1R0_005fN_002a_005f1_002f2"></a>
<a name="index-MULTI_005fWEIGHT_005fL1R0_005fN_002a_005f3_002f2"></a>
<a name="index-MULTI_005fWEIGHT_005fL0R0_005fDELTA_005f3_002f2"></a>
<a name="index-MULTI_005fWEIGHT_005fL1R0_005fDELTA_002a_005f3_002f2"></a>
<a name="index-HEAVY_005fBARYON_005fENHANCEMEMT"></a>
<a name="index-SINGLET_005fSUPPRESSION"></a>
<a name="index-Mixing_005f0_002b"></a>
<a name="index-Mixing_005f1_002d"></a>

<p>For the selection of hadrons emerging in such cluster transitions and decays,
an overlap between the cluster flavour content and the flavour part of the 
hadronic wave function is formed.  This may be further modified by production
probabilities, organised by multiplet and given by the parameters
</p><ul>
<li> <code>MULTI_WEIGHT_L0R0_PSEUDOSCALARS</code>
</li><li> <code>MULTI_WEIGHT_L0R0_VECTORS</code>
</li><li> <code>MULTI_WEIGHT_L0R0_TENSORS2</code>
</li><li> <code>MULTI_WEIGHT_L0R0_TENSORS3</code>
</li><li> <code>MULTI_WEIGHT_L0R0_TENSORS4</code>
</li><li> <code>MULTI_WEIGHT_L1R0_SCALARS</code>
</li><li> <code>MULTI_WEIGHT_L1R0_AXIALVECTORS</code>
</li><li> <code>MULTI_WEIGHT_L1R0_TENSORS2</code>
</li><li> <code>MULTI_WEIGHT_L2R0_VECTORS</code>
</li><li> <code>MULTI_WEIGHT_L3R0_VECTORS</code>
</li><li> <code>MULTI_WEIGHT_L0R1_SCALARS</code>
</li><li> <code>MULTI_WEIGHT_L0R1_AXIALVECTORS</code>
</li><li> <code>MULTI_WEIGHT_L0R0_N_1/2</code>
</li><li> <code>MULTI_WEIGHT_L0R0_N*_1/2</code>
</li><li> <code>MULTI_WEIGHT_L1R0_N*_1/2</code>
</li><li> <code>MULTI_WEIGHT_L1R0_N*_3/2</code>
</li><li> <code>MULTI_WEIGHT_L0R0_DELTA_3/2</code>
</li><li> <code>MULTI_WEIGHT_L1R0_DELTA*_3/2</code>
</li></ul>
<p>In addition, there are some enhancement and suppression factors applied to 
heavy baryons and meson singlets,
</p><ul>
<li> <code>HEAVY_BARYON_ENHANCEMEMT</code>
</li><li> <code>SINGLET_SUPPRESSION</code>
</li></ul>
<p>For the latter, Sherpa also allows
to redfine the mixing angles through parameters such as
</p><ul>
<li> <code>Mixing_0+</code>
</li><li> <code>Mixing_1-</code>
</li></ul>

<hr>
<a name="Cluster-transition-to-hadrons-_002d-flavour-part"></a>
<h4 class="subsubsection">5.12.1.4 Cluster transition to hadrons - flavour part</h4>
<a name="index-STRANGE_005fFRACTION"></a>
<a name="index-BARYON_005fFRACTION"></a>
<a name="index-P_005f_007bQS_007d_002fP_005f_007bQQ_007d"></a>
<a name="index-P_005f_007bSS_007d_002fP_005f_007bQQ_007d"></a>
<a name="index-P_005f_007bQQ_005f1_007d_002fP_005f_007bQQ_005f0_007d"></a>
<a name="index-TRANSITION_005fOFFSET"></a>
<a name="index-DECAY_005fOFFSET"></a>

<p>The phase space effects due to these masses govern to a large extent the 
flavour content of the non-perturbative gluon splittings at the end of the 
parton shower and in the decay of clusters.  They are further modified by 
relative probabilities with respect to the production of up/down flavours 
through the parameters 
</p><ul>
<li> <code>STRANGE_FRACTION</code>
</li><li> <code>BARYON_FRACTION</code>
</li><li> <code>P_{QS}/P_{QQ}</code>
</li><li> <code>P_{SS}/P_{QQ}</code>
</li><li> <code>P_{QQ_1}/P_{QQ_0}</code>
</li></ul>

<p>The transition of clusters to hadrons is governed by the following 
considerations: 
</p><ul>
<li> 
      Clusters can be interpreted as excited hadrons, with a continous mass
      spectrum.
</li><li> 
      When a cluster becomes sufficiently light such that its mass is below
      the largest mass of any hadron with the same flavour content, it must
      be re-iterpreted as such a hadron.  In this case it will be shifted on
      the corresponding hadron mass, and the recoil will be distributed to the
      &ldquo;neighbouring&rdquo; clusters or by emitting a soft photon.  This comparison 
      of masses clearly depends on the multiplets switched on in AHADIC++, 
      see above.
                              </li><li> 
      In addition, clusters may becomes sufficiently light such that they 
      should decay directly into two hadrons instead of two clusters.  
      This decision is based on the heaviest hadrons accessible in
      a decay.
                        </li><li>
      If both options, transition and decay, are available, there is a 
      competition between  
</li></ul>
 
<hr>
<a name="Cluster-transition-and-decay-weights"></a>
<h4 class="subsubsection">5.12.1.5 Cluster transition and decay weights</h4>
<a name="index-MassExponent_005fC_002d_003eHH"></a>

<p>The probability for a cluster C to be transformed into a hadron H is given by
a combination of weights, obtained from the overlap with the flavour part of
the hadronic wave function, the relative weight of the corresponding multiplet
and a kinematic weight taking into account the mass difference of cluster
and hadron and the width of the latter.
For the direct decay of a cluster into two hadrons the overlaps with the
wave functions of all hadrons, their respective multiplet suppression weights,
the flavour weight for the creation of the new flavour q and a kinematical
factor are relevant.  Here, yet another tuning paramter enters,
</p><ul>
<li> <code>MassExponent_C-&gt;HH</code>
</li></ul>
<p>which partially compensates phase space effects favouring light hadrons,
</p>

<hr>
<a name="Cluster-decays-_002d-kinematics"></a>
<h4 class="subsubsection">5.12.1.6 Cluster decays - kinematics</h4>
<a name="index-PT_005e2_005f0"></a>
<a name="index-PT_005fMAX"></a>
<a name="index-Q_005fas_005e2"></a>

<p>Cluster decays are generated by firstly emitting a non-perturbative &ldquo;gluon&rdquo;
from one of the quarks, using a transverse momentum distribution as in the
non-perturbative gluon decays, see below, and by then splitting this gluon into
a quark&ndash;antiquark of anti-diquark&ndash;diquark pair, again with the same 
kinematics.  In the first of these splittings, the emission of the gluon,
though, the energy distribution of the gluon is given by the quark splitting
function, if this quark has been produced in the perturbative phase of the
event.  If, in contrast, the quark stems from a cluster decay, the energy
of the gluon is selected according to a flat distribution.    
</p>
<p>In clusters decaying to hadrons, the transverse momentum is chosen according
to a distribution given by an infrared-continued strong coupling and a
term inversemly proportional to the infrared-modified transverse momentum,
constrained to be below a maximal transverse momentum.  The respective 
tuning parameters are
</p><ul>
<li> <code>PT^2_0</code>
</li><li> <code>PT_MAX</code>
</li><li> <code>Q_as^2</code>
</li></ul>

<hr>
<a name="Splitting-kinematics"></a>
<h4 class="subsubsection">5.12.1.7 Splitting kinematics</h4>

<p>In each splitting, the kinematics is given by the transverse momentum, the
energy splitting parameter and the azimuthal angle.  The latter, the azimuthal
angle is always seleectred according to a flat distribution, while the energy
splitting parameter will either be chosen according to the quark-to-gluon 
splitting function (if the quark is a leading quark, i.e. produced in the
pertrubative phase), to the gluon-to-quark splitting function, or according to
a flat distribution.  The transverse momentum is given by the same 
distribution as in the cluster decays to hadrons.
</p>


<hr>
<a name="Hadron-decays"></a>
<a name="Hadron-decays-1"></a>
<h3 class="subsection">5.12.2 Hadron decays</h3>
<a name="index-DECAYMODEL"></a>
<a name="index-WIDTH_005b_003cid_003e_005d-2"></a>
<a name="index-MASS_005b_003cid_003e_005d-1"></a>
<a name="index-STABLE_005b_003cid_003e_005d-2"></a>
<a name="index-DECAYPATH"></a>
<a name="index-SOFT_005fMASS_005fSMEARING"></a>
<a name="index-MAX_005fPROPER_005fLIFETIME"></a>

<p>The treatment of hadron and tau decays is specified by <code>DECAYMODEL</code>.
Its allowed values are either the default choice &lsquo;<samp>Hadrons</samp>&rsquo;, which
renders the HADRONS++ module responsible for performing the decays, or the
hadron decays can be disabled with the option &lsquo;<samp>Off</samp>&rsquo;.
</p>
<p>HADRONS++ is the module within the Sherpa framework which is responsible for
treating hadron and tau decays.  It contains decay tables with branching 
ratios for approximately 2500 decay channels, of which many have their kinematics 
modelled according to a matrix element with corresponding form factors.
Especially decays of the tau lepton and heavy mesons have form factor models
similar to dedicated codes like Tauola [<a href="#Jadach1993hs">Jad93</a>] and
EvtGen [<a href="#Lange2001uf">Lan01</a>].
</p>
<p>Some general switches which relate to hadron decays can be adjusted in the
<code>(fragmentation)</code> section:
</p>
<ul>
<li> <a name="DECAYPATH"></a> <code>DECAYPATH</code> 
  The path to the parameter files for the hadron and tau decays
  (default: <code>Decaydata/</code>). It is important to note that the path 
  has to be given relative to the current working directory.
  If it doesn&rsquo;t exist, the default Decaydata
  directory (<code>&lt;prefix&gt;/share/SHERPA-MC/Decaydata</code>) will be used.
</li><li>  Hadron properties like mass, width, stable/unstable and active can be set
  in full analogy to the settings for fundamental particles
  in the <code>(model)</code> section (cf. <a href="#Models">Models</a>).
</li><li> <a name="SOFT_005fMASS_005fSMEARING"></a> 
      <code>SOFT_MASS_SMEARING = [0,1,2]</code> (default: 1) 
  Determines whether particles entering the hadron decay event
  phase should be put off-shell according to their mass
  distribution. It is taken care that no decay mode is suppressed
  by a potentially too low mass. While HADRONS++ determines this dynamically
  from the chosen decay channel, for <code>Pythia</code> as hadron decay handler
  its <code>w-cut</code> parameter is employed. Choosing option 2 instead of 1 will
  only set unstable (decayed) particles off-shell, but leave stable particles
  on-shell.
</li><li> <a name="MAX_005fPROPER_005fLIFETIME"></a> <code>MAX_PROPER_LIFETIME = [mm]</code> 
  Parameter for maximum proper lifetime (in mm) up to which particles
  are considered unstable. If specified, this will make long-living particles
  stable, even if they are set unstable by default or by the user.
</li></ul>

<p>Many aspects of the above mentioned &ldquo;Decaydata&rdquo; can be adjusted.
There exist three levels of data files, which are explained in the following
sections.
As with all other setup files, the user can either employ the default
&ldquo;Decaydata&rdquo; in <code>&lt;prefix&gt;/share/SHERPA-MC/Decaydata</code>, or
overwrite it (also selectively) by creating the appropriate files in the
directory specified by <code>DECAYPATH</code>.
</p>

<hr>
<a name="HadronDecays_002edat"></a>
<h4 class="subsubsection">5.12.2.1 HadronDecays.dat</h4>

<p><code>HadronDecays.dat</code> consists of a table of particles that are to be decayed
by HADRONS++. Note: Even if decay tables exist for the other particles, only those
particles decay that are set unstable, either by default, or in the
model/fragmentation settings. It has the following structure, where each line
adds one decaying particle:
</p>

<table>
<tr><td width="33%">&lt;kf-code&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;</td><td width="33%">&lt;subdirectory&gt;/</td><td width="33%">&lt;filename&gt;.dat</td></tr>
<tr><td width="33%">decaying particle &nbsp;&nbsp;&nbsp;</td><td width="33%">path to decay table &nbsp;&nbsp;&nbsp;</td><td width="33%">decay table file</td></tr>
<tr><td width="33%">default names:</td><td width="33%">&lt;particle&gt;/</td><td width="33%">Decays.dat</td></tr>
</table>

<p>It is possible to specify different decay tables for the particle (positive
kf-code) and anti-particle (negative kf-code). If only one is specified, it
will be used for both particle and anti-particle.
</p>
<p>If more than one decay table is specified for the same kf-code, these tables
will be used in the specified sequence during one event. The first matching
particle appearing in the event is decayed according to the first table, and
so on until the last table is reached, which will be used for the remaining
particles of this kf-code.
</p>
<p>Additionally, this file may contain the keyword <code>CREATE_BOOKLET</code> on a separate
line, which will cause HADRONS++ to write a LaTeX document containing all decay
tables.
</p>
<hr>
<a name="Decay-table-files"></a>
<h4 class="subsubsection">5.12.2.2 Decay table files</h4>

<p>The decay table contains information about outgoing particles for each channel,
its branching ratio and eventually the name of the file that stores parameters
for a specific channel. If the latter is not specified HADRONS++ will produce it and
modify the decay table file accordingly.
</p>
<p>Additionally to the branching ratio, one may specify the error associated with
it, and its source. Every hadron is supposed to have its own decay table in
its own subdirectory. The structure of a decay table is
</p><table>
<tr><td width="33%">{kf1,kf2,kf3,...}</td><td width="33%">BR(delta BR)[Origin] &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td><td width="33%">&lt;filename&gt;.dat</td></tr>
<tr><td width="33%">outgoing particles &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td><td width="33%">branching ratio &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td><td width="33%">decay channel file</td></tr>
</table>
<p>It should be stressed here that the branching ratio which is explicitly given for any
individual channel in this file is <strong>always used</strong> regardless of any
matrix-element value.
</p>
<p><a name="Decay-channel-files"></a>
</p><hr>
<a name="Decay-channel-files-1"></a>
<h4 class="subsubsection">5.12.2.3 Decay channel files</h4>

<p>A decay channel file contains various information about that specific decay
channel. There are different sections, some of which are optional:
</p>
<ul>
<li> 
<pre class="verbatim">&lt;Options&gt;
    AlwaysIntegrate = 0
    CPAsymmetryC = 0.0
    CPAsymmetryS = 0.0
&lt;/Options&gt;
</pre>
  <ul>
<li>  <code>AlwaysIntegrate = [0,1]</code> For each decay channel, one needs an
    integration result for unweighting the kinematics (see below). This
    result is stored in the decay channel file, such that the
    integration is not needed for each run. The AlwaysIntegrate option
    allows to bypass the stored integration result, and do the integration
    nonetheless (same effect as deleting the integration result).
  </li><li>  <code>CPAsymmetryC/CPAsymmetryS</code> If one wants to include time dependent
    CP asymmetries through interference between mixing and decay one can
    set the coefficients of the cos and sin terms respectively.
    HADRONS++ will then respect these asymmetries between particle and
    anti-particle in the choice of decay channels.
  </li></ul>

</li><li> 
<pre class="verbatim">&lt;Phasespace&gt;
  1.0 MyIntegrator1
  0.5 MyIntegrator2
&lt;/Phasespace&gt;
</pre>  Specifies the phase-space mappings and their weight.

</li><li> 
<pre class="verbatim">&lt;ME&gt;
  1.0 0.0 my_matrix_element[X,X,X,X,X,...]
  1.0 0.0 my_current1[X,X,...] my_current2[X,X,X,...]
&lt;/ME&gt;
</pre>  Specifies the matrix elements or currents used for the kinematics,
  their respective weights, and the
  order in which the  particles (momenta) enter them. For more details, the
  reader is referred to [<a href="#Krauss2010xx">Kra10</a>].

</li><li> 
<pre class="verbatim">&lt;my_matrix_element[X,X,X,X,X,...]&gt;
  parameter1 = value1
  parameter2 = value2
  ...
&lt;/my_matrix_element[X,X,X,X,X,...]&gt;
</pre>  Each matrix element or current may have an additional section where one
  can specify needed parameters, e.g. which form factor model to choose.
  Each parameter has to be specified on a new line as shown above. Available
  parameters are listed in [<a href="#Krauss2010xx">Kra10</a>].
  Parameters not specified get a default value,
  which might not make sense in specific decay channels. One may also specify
  often needed parameters in <code>HadronConstants.dat</code>, but they will get
  overwritten by channel specific parameters, should these exist.

</li><li> 
<pre class="verbatim">&lt;Result&gt;
  3.554e-11 6.956e-14 1.388e-09;
&lt;/Result&gt;
</pre>  These last three lines have quite an important meaning. If they
  are missing, HADRONS++ integrates this channel during the initialization
  and adds the result lines.
  If this section exists though, and <code>AlwaysIntegrate</code> is off
  (the  default value, see above) then HADRONS++ reads in the maximum for
  the kinematics unweighting.
  
<p>  Consequently, if some parameters are changed (also masses of incoming and
  outgoing particles) the maximum might change such that a new integration is
  needed in order to obtain correct kinematical distributions. There are two
  ways to enforce the integration: either by deleting the last three lines or
  by setting <code>AlwaysIntegrate</code> to 1. When a channel is re-integrated, HADRONS++
  copies the old decay channel file into <code>.&lt;filename&gt;.dat.old</code>.
</p></li></ul>

<hr>
<a name="HadronConstants_002edat"></a>
<h4 class="subsubsection">5.12.2.4 HadronConstants.dat</h4>

<p><code>HadronConstants.dat</code> may contain some globally needed parameters (e.g.
for neutral meson mixing, see [<a href="#Krauss2010xx">Kra10</a>]) and also fall-back
values for all matrix-element parameters which one specifies in decay channel
files. Here, the <code>Interference_X = 1</code> switch would enable rate asymmetries
due to CP violation in the interference between mixing and decay
(cf. <a href="#Decay-channel-files">Decay channel files</a>), and setting <code>Mixing_X = 1</code>
enables explicit mixing in the event record according to the time evolution of
the flavour states. By default, all mixing effects are turned off.
</p><ul>
<li>  Mixing parameters 
  with some example values
<pre class="verbatim">x_K = 0.946
y_K = -0.9965
qoverp2_K = 1.0
Interference_K = 0
Mixing_K = 0

x_D = 0.0
y_D = 0.0
qoverp2_D = 1.0
Interference_D = 0
Mixing_D = 0

x_B = 0.776
y_B = 0.0
qoverp2_B = 1.0
Interference_B = 1
Mixing_B = 0

x_B(s) = 30.0
y_B(s) = 0.155
qoverp2_B(s) = 1.0
Interference_B(s) = 0
Mixing_B(s) = 0
</pre>
</li></ul>


<hr>
<a name="Further-remarks"></a>
<h4 class="subsubsection">5.12.2.5 Further remarks</h4>
<a name="index-SOFT_005fSPIN_005fCORRELATIONS"></a>
<a name="index-HARD_005fSPIN_005fCORRELATIONS-1"></a>

<p><strong>Spin correlations:</strong>
a spin correlation algorithm is implemented. It can be switched on through the
keyword &lsquo;<samp>SOFT_SPIN_CORRELATIONS=1</samp>&rsquo; in the <code>(run)</code> section.
</p>
<p>If spin correlations for tau leptons
produced in the hard scattering process are supposed to be taken into account,
one needs to specify &lsquo;<samp>HARD_SPIN_CORRELATIONS=1</samp>&rsquo; as well. If using
AMEGIC++ as ME generator, note that the Process libraries have to be re-created
if this is changed.
</p>
<p><strong>Adding new channels:</strong>
if new channels are added to HADRONS++ (choosing isotropic decay kinematics) a new 
decay table must be defined and the corresponding hadron must be added to <code>HadronDecays.dat</code>. 
The decay table merely needs to consist of the outgoing particles and branching ratios, i.e. the 
last column (the one with the decay channel file name) can safely be dropped. By running Sherpa
it will automatically produce the decay channel files and write their names in the decay table. 
</p>
<p><strong>Some details on tau decays:</strong>
$\tau$ decays are treated within the HADRONS++ framework, even though the
$\tau$ is not a hadron. As for many hadron decays, the hadronic tau decays
have form factor models implemented, for details the reader is referred to
[<a href="#Krauss2010xx">Kra10</a>].
</p>

<hr>
<a name="QED-Corrections"></a>
<a name="QED-corrections"></a>
<h2 class="section">5.13 QED corrections</h2>

<p>Higher order QED corrections are effected both on hard interaction and, upon
their formation, on each hadron&rsquo;s subsequent decay. The Photons
[<a href="#Schonherr2008av">Sch08</a>] module is called in both cases for this task. It
employes a YFS-type resummation [<a href="#Yennie1961ad">Yen61</a>] of all infrared singular
terms to all orders and is equipped with complete first order corrections for
the most relevant cases (all other ones receive approximate real emission
corrections built up by Catani-Seymour splitting kernels).
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#General-Switches">5.13.1 General Switches</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#QED-Corrections-to-the-Hard-Interaction">5.13.2 QED Corrections to the Hard Interaction</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#QED-Corrections-to-Hadron-Decays">5.13.3 QED Corrections to Hadron Decays</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<a name="General-Switches"></a>
<a name="General-Switches-1"></a>
<h3 class="subsection">5.13.1 General Switches</h3>

<p>The relevant switches to steer the higher order QED
corrections reside in the &lsquo;(fragmentation)&rsquo; section
of the steering file or the fragmentation data file
&lsquo;Fragmentation.dat&rsquo;, respectively.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#YFS_005fMODE">5.13.1.1 YFS_MODE</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Mode of operation.
</td></tr>
<tr><td align="left" valign="top"><a href="#YFS_005fUSE_005fME">5.13.1.2 YFS_USE_ME</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         Use ME-corrections if possible.
</td></tr>
<tr><td align="left" valign="top"><a href="#YFS_005fIR_005fCUTOFF">5.13.1.3 YFS_IR_CUTOFF</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">      Infrared threshold for real photon generation.
</td></tr>
</table>

<hr>
<a name="YFS_005fMODE"></a>
<a name="YFS_005fMODE-1"></a>
<h4 class="subsubsection">5.13.1.1 YFS_MODE</h4>
<a name="index-YFS_005fMODE"></a>
<p>The keyword <code>YFS_MODE = [0,1,2]</code> determines the
mode of operation of Photons. <code>YFS_MODE = 0</code> switches Photons off.
Consequently, neither the hard interaction nor any hadron decay will be
corrected for soft or hard photon emission. <code>YFS_MODE = 1</code> sets
the mode to &quot;soft only&quot;, meaning soft emissions will be treated
correctly to all orders but no hard emission corrections will be
included. With <code>YFS_MODE = 2</code> these hard emission corrections will
also be included up to first order in alpha_QED. This is the default setting.
</p>
<hr>
<a name="YFS_005fUSE_005fME"></a>
<a name="YFS_005fUSE_005fME-1"></a>
<h4 class="subsubsection">5.13.1.2 YFS_USE_ME</h4>
<a name="index-YFS_005fUSE_005fME"></a>
<p>The switch <code>YFS_USE_ME = [0,1]</code> tells Photons how to correct hard
emissions to first order in alpha_QED. If <code>YFS_USE_ME = 0</code>, then
Photons will use collinearly approximated real emission matrix elements. Virtual
emission matrix elements of order alpha_QED are ignored. If, however,
YFS_USE_ME=1, then exact real and/or virtual emission matrix elements
are used wherever possible. These are presently available for V-&gt;FF, V-&gt;SS,
S-&gt;FF, S-&gt;SS, S-&gt;Slnu, S-&gt;Vlnu type decays, Z-&gt;FF decays and leptonic tau and W
decays. For all other decay types general collinearly approximated matrix
elements are used. In both approaches all hadrons are treated as point-like
objects. The default setting is <code>YFS_USE_ME = 1</code>. This switch is only
effective if <code>YFS_MODE = 2</code>.
</p>
<hr>
<a name="YFS_005fIR_005fCUTOFF"></a>
<a name="YFS_005fIR_005fCUTOFF-1"></a>
<h4 class="subsubsection">5.13.1.3 YFS_IR_CUTOFF</h4>
<a name="index-YFS_005fIR_005fCUTOFF"></a>
<p><code>YFS_IR_CUTOFF</code> sets the infrared cut-off dividing the real emission in two
regions, one containing the infrared divergence, the other the &quot;hard&quot; emissions.
This cut-off is currently applied in the rest frame of the multipole of the
respective decay. It also serves as a minimum photon energy in this frame for
explicit photon generation for the event record. In contrast, all photons below
with energy less than this cut-off will be assumed to have negligible impact on
the final-state momentum distributions. The default is
<code>YFS_IR_CUTOFF = 1E-3</code> (GeV). Of course, this switch is only effective if
Photons is switched on, i.e. <code>YFS_MODE = [1,2]</code>.
</p>

<hr>
<a name="QED-Corrections-to-the-Hard-Interaction"></a>
<a name="QED-Corrections-to-the-Hard-Interaction-1"></a>
<h3 class="subsection">5.13.2 QED Corrections to the Hard Interaction</h3>

<p>The switch to steer QED corrections to the hard scatter resides in the &rsquo;(me)&rsquo;
section of the steering file or the matrix element data file &lsquo;ME.dat&rsquo;, 
respectively.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#ME_005fQED">5.13.2.1 ME_QED</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                       Mode of operation.
</td></tr>
<tr><td align="left" valign="top"><a href="#ME_005fQED_005fCLUSTERING">5.13.2.2 ME_QED_CLUSTERING</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            Identify and preserve resonances.
</td></tr>
<tr><td align="left" valign="top"><a href="#ME_005fQED_005fCLUSTERING_005fTHRESHOLD">5.13.2.3 ME_QED_CLUSTERING_THRESHOLD</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">  Threshold for identifying resonances.
</td></tr>
</table>

<hr>
<a name="ME_005fQED"></a>
<a name="ME_005fQED-1"></a>
<h4 class="subsubsection">5.13.2.1 ME_QED</h4>
<a name="index-ME_005fQED"></a>
<p><code>ME_QED = On</code>/<code>Off</code> turns the higher order QED corrections to the
matrix element on or off, respectively. The default is &lsquo;<samp>On</samp>&rsquo;. Switching
QED corrections to the matrix element off has no effect on
<a href="#QED-Corrections-to-Hadron-Decays">QED Corrections to Hadron Decays</a>.
The QED corrections to the matrix element will only be effected on final state
not strongly interacting particles. If a resonant production subprocess for an
unambiguous subset of all such particles is specified via the process
declaration (cf. <a href="#Processes">Processes</a>) this can be taken into account and dedicated
higher order matrix elements can be used (if <code>YFS_MODE = 2</code> and
<code>YFS_USE_ME = 1</code>).
</p>
<hr>
<a name="ME_005fQED_005fCLUSTERING"></a>
<a name="ME_005fQED_005fCLUSTERING-1"></a>
<h4 class="subsubsection">5.13.2.2 ME_QED_CLUSTERING</h4>
<a name="index-ME_005fQED_005fCLUSTERING"></a>
<p><code>ME_QED_CLUSTERING = On</code>/<code>Off</code> switches the phase space point
dependent identification of possible resonances within the hard matrix
element on or off, respectively. The default is &lsquo;<samp>On</samp>&rsquo;.
Resonances are identified by recombining the electroweak final state of
the matrix element into resonances that are allowed by the model.
Competing resonances are identified by their on-shell-ness, i.e.
the distance of the decay product&rsquo;s invariant mass from the nominal
resonance mass in units of the resonance width.
</p>
<hr>
<a name="ME_005fQED_005fCLUSTERING_005fTHRESHOLD"></a>
<a name="ME_005fQED_005fCLUSTERING_005fTHRESHOLD-1"></a>
<h4 class="subsubsection">5.13.2.3 ME_QED_CLUSTERING_THRESHOLD</h4>
<a name="index-ME_005fQED_005fCLUSTERING_005fTHRESHOLD"></a>
<p>Sets the maximal distance of the decay product invariant mass from the
nominal resonance mass in units of the resonance width in order for the
resonance to be identified. The default is
&lsquo;<samp>ME_QED_CLUSTERING_THRESHOLD = 1</samp>&rsquo;.
</p>
<hr>
<a name="QED-Corrections-to-Hadron-Decays"></a>
<a name="QED-Corrections-to-Hadron-Decays-1"></a>
<h3 class="subsection">5.13.3 QED Corrections to Hadron Decays</h3>

<p>If the Photons module is switched on, all hadron decays are corrected for higher
order QED effects.
</p>
<hr>
<a name="Minimum-Bias"></a>
<a name="Minimum-bias-events"></a>
<h2 class="section">5.14 Minimum bias events</h2>

<p>Minimum bias events are simulated through the Shrimps module in Sherpa.
</p>
<hr>
<a name="Physics-of-Shrimps"></a>
<h3 class="subsection">5.14.1 Physics of Shrimps</h3>

<hr>
<a name="Inclusive-part-of-the-model"></a>
<h4 class="subsubsection">5.14.1.1 Inclusive part of the model</h4>

<p>Shrimps is based on the KMR model [<a href="#Ryskin2009tj">Rys09</a>], which is a
multi-channel eikonal model. The
incoming hadrons are written as a superposition of Good-Walker states, which are
diffractive eigenstates that diagalonise the T-matrix. This allows to include
low-mass diffractive excitation. Each combination of colliding Good-Walker
states gives rise to a single-channel eikonal. The final eikonal is the
superposition of the single-channel eikonals. The number of Good-Walker states
is 2 in Shrimps (the original KMR model includes 3 states).
</p>
<p>Each single-channel eikonal can be seen as the product of two parton densities,
one from each of the colliding Good-Walker states. The evolution of the parton
densities in rapidity due to extra emissions and absoption on either of the two
hadrons is described by a set of coupled differential equations. The parameter
<code>Delta</code>, which can be interpreted as the Pomeron intercept, is the
probability for emitting an extra parton per unit of rapidity. The strength of
absorptive corrections is quantified by the parameter <code>lambda</code>, which can
also be seen as the triple-Pomeron coupling. A small region of size
<code>deltaY</code> around the beams is excluded from the evolution due to the finite
longitudinal size of the parton densities.
</p>
<p>The boundary conditions for the parton densities are form factors, which have a 
dipole form characterised by the parameters <code>Lambda2</code>, <code>beta_0^2</code>,
<code>kappa</code> and <code>xi</code>.
</p>
<p>In this framework the eikonals and the cross sections for the different modes
(elastic, inelastic, single- and double-diffractive) are calculated. 
</p>
<hr>
<a name="Exclusive-part-of-the-model"></a>
<h4 class="subsubsection">5.14.1.2 Exclusive part of the model</h4>

<p>Inelastic events are generated by explicitely simulating the exchange and
rescattering of gluon ladders. The number of primary ladders is given by a
Poisson distribution whose parameter is the single-channel eikonal. The
decomposition of the incoming hadrons into partons proceeds via suitably
infra-red continued PDFs. 
</p>
<p>The emissions from the ladders are then generated in
a Markov chain. The pseudo-Sudakov form factor contains several factors: an
ordinary gluon emission term, a factor accounting for the Reggeisation of the
gluons and a recombination weight taking absorptive corrections into account.
The emission term has the perturbative form <em>alpha_s(k_T^2)/k_T^2</em>, that
needs to
be continued into the infra-red region. In the case of <em>alpha_s</em> the
transition into the infra-red region happens at <code>Q_as^2</code> while in the case
of <em>1/k_T^2</em> the transition scale is generated dynamically and depends on
the parton densities and is scaled by <code>Q_0^2</code>. 
</p>
<p>The propagators of the filled ladder can be either in a colour singlet or octet
state, the probabilities are again given through the parton densities. The
probability for a singlet can also be regulated by hand through the parameter
<code>Chi_S</code>. A singlet propagator is the result of an implicit rescattering. 
</p>
<p>After all emissions have been generated and the colours assigned, further
radiation is generated by the parton shower to resum also the logrithms in
<em>1/Q^2</em>. The amount of radiation from the parton shower can be regulated
with <code>KT2_Factor</code>, which  multiplies the shower starting scale. After
parton showering partons emitted from the ladder or the parton shower are
subject to explicit rescattering, i.e. they can exchange secondary ladders. The
probability for the exchange of a rescattering ladder is characterised by
<code>RescProb</code>. The probability for rescattering over a singlet propagator
receives an extra factor <code>RescProb1</code>. After all ladder exchanges and
rescatterings but before hadronsation colour can be re-arrangd in the event.
Finally, the event is hadronised using the standard Sherpa cluster
hadronisation.
</p>
<hr>
<a name="Parameters-and-settings"></a>
<h3 class="subsection">5.14.2 Parameters and settings</h3>

<p>Below is a list of all relevant parameters to steer the Shrimps module.
</p>
<hr>
<a name="Generating-minimum-bias-events"></a>
<h4 class="subsubsection">5.14.2.1 Generating minimum bias events</h4>
<a name="index-EVENT_005fTYPE-1"></a>
<a name="index-SOFT_005fCOLLISIONS"></a>

<p>To generate minimum bias events with Shrimps in the &rsquo;(run)&rsquo; section of the run
card <code>EVENT_TYPE</code> has to be set to <code>MinimumBias</code> and
<code>SOFT_COLLISIONS</code> to <code>Shrimps</code>.
</p>
<hr>
<a name="Shrimps-Mode"></a>
<h4 class="subsubsection">5.14.2.2 Shrimps Mode</h4>
<a name="index-Shrimps_005fMode"></a>

<p>The setup of minimum bias events and other, related simulations, is 
covered by the &rsquo;(run)&rsquo; section of the run card.  The exact choice is steered
through the parameter <code>Shrimps_Mode</code> (default <code>Inelastic</code>),
which allows the following settings:
</p><ul>
<li> <code>Xsecs</code>, which will only calculate total, elastic, inelastic,
      single- and double-diffractive cross sections at various relevant energies
      and write them to a file, typically &rsquo;InclusiveQuantities/Xsecs.dat&rsquo;;
</li><li> <code>Elastic</code>
      generates elastic events at a fixed energy;
</li><li> <code>Single-diffractive</code>
      generates low-mass single-diffractive events at a fixed energy, 
      modelled by the transition of one of the protons to a N(1440) state;
</li><li> <code>Double-diffractive</code>
      generates low-mass single-diffractive events at a fixed energy, 
      modelled by the transition of both protons to N(1440) states;
</li><li> <code>Quasi-elastic</code>
      generates a combination of elastic, single- and double-diffractive
      events in due proportion;
</li><li> <code>Inelastic</code>
      generates inelastic minimum bias events through the exchange of t-channel
      gluons or singlets (pomerons).  This mode actually will include
      large mass diffraction;
</li><li> <code>All</code>
      generates a combination of quasi-elastic and inelastic events in due 
      proportion.
</li></ul>

<hr>
<a name="Parameters-of-the-eikonals"></a>
<h4 class="subsubsection">5.14.2.3 Parameters of the eikonals</h4>
<a name="index-Lambda2"></a>
<a name="index-beta_005f0_005e2"></a>
<a name="index-kappa"></a>
<a name="index-xi"></a>
<a name="index-deltaY"></a>
<a name="index-lambda"></a>
<a name="index-Delta"></a>

<p>The parameters of the differential equations for the parton densities are
</p>
<ul>
<li> <code>Delta</code> (default 0.4): perturbative Pomeron intercept
</li><li> <code>lambda</code> (default 0.3): triple Pomeron coupling
</li><li> <code>deltaY</code> (default 1.5): rapidity interval excluded from evolution
</li></ul>

<p>The form factors are of the form <br>
 <em>F_{1/2}(q_T) = beta_0^2 (1 +/- kappa)
exp[-xi (1 +/- kappa)q_T^2/Lambda^2]/[1 + (1 +/- kappa)q_T^2/Lambda^2]^2</em> <br>
with the parameters
</p>
<ul>
<li> <code>Lambda2</code> (default <em>1.7 GeV^2</em>)
</li><li> <code>beta_0^2</code> (default 20.0 mb)
</li><li> <code>kappa</code> (default 0.6)
</li><li> <code>xi</code> (default 0.2)
</li></ul>

<hr>
<a name="Parameters-for-event-generation"></a>
<h4 class="subsubsection">5.14.2.4 Parameters for event generation</h4>
<a name="index-Q_005f0_005e2"></a>
<a name="index-Q_005fas_005e2-1"></a>
<a name="index-Chi_005fS"></a>
<a name="index-Shower_005fMin_005fKT2"></a>
<a name="index-KT2_005fFactor"></a>
<a name="index-RescProb"></a>
<a name="index-RescProb1"></a>
<a name="index-Resc_005fKTMin"></a>
<a name="index-ReconnProb"></a>
<a name="index-Q_005fRC_005e2"></a>

<p>The parameters related to the generation of inelastic events are
</p>
<ul>
<li> <code>Q_0^2</code> (default <em>0.58 GeV^2</em>): factor scaling the infra-red
scale of ladder emissions
</li><li> <code>Q_as^2</code> (default <em>1.0 GeV^2</em>): infra-red scale of the strong
coupling
</li><li> <code>Chi_S</code> (default 0.60): factor scaling probability for singlet
propagators in ladders
</li><li> <code>Shower_Min_KT2</code> (default 2.0 GeV^2): minimum shower starting scale
</li><li> <code>KT2_Factor</code> (default 0.89): factor scaling the parton shower starting
scale
</li><li> <code>RescProb</code> (default 5.0): parameter controlling probability for
rescattering
</li><li> <code>RescProb1</code> (default 0.54): factor scaling rescatter
probility over singlet propagators
</li><li> <code>Resc_KTMin</code> (default &rsquo;off&rsquo;): require minimum kt in rescattering (switch)
</li><li> <code>ReconnProb</code> (default -15.0): parameter regulating the strength of colour reconnections (logarithmic)
</li><li> <code>Q_RC^2</code> (default 0.72 GeV^2): regulator entering distance measure in colour reconnections
</li></ul>

<hr>
<a name="Tips-and-Tricks"></a>
<a name="Tips-and-tricks"></a>
<h1 class="chapter">6 Tips and tricks</h1>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Bash-completion">6.1 Bash completion</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"> How to add bash completion for Sherpa parameters
</td></tr>
<tr><td align="left" valign="top"><a href="#Rivet-analyses">6.2 Rivet analyses</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"> How to analyse Sherpa events using Rivet
</td></tr>
<tr><td align="left" valign="top"><a href="#HZTool-analyses">6.3 HZTool analyses</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"> How to analyse Sherpa events using HZTool
</td></tr>
<tr><td align="left" valign="top"><a href="#MCFM-interface">6.4 MCFM interface</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"> How to use the MCFM interface in NLO calculation
</td></tr>
<tr><td align="left" valign="top"><a href="#Debugging-a-crashing_002fstalled-event">6.5 Debugging a crashing/stalled event</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">  How to recover the random seed for an event that is hanging or crashing
</td></tr>
<tr><td align="left" valign="top"><a href="#Versioned-installation">6.6 Versioned installation</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"> How to install multiple Sherpa versions in the same prefix.
</td></tr>
<tr><td align="left" valign="top"><a href="#NLO-calculations">6.7 NLO calculations</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">  How to efficiently perform NLO calculations
</td></tr>
</table>

<hr>
<a name="Bash-completion"></a>
<a name="Bash-completion-1"></a>
<h2 class="section">6.1 Bash completion</h2>

<p>Sherpa will install a file named
&lsquo;<samp>$prefix/share/SHERPA-MC/sherpa-completion</samp>&rsquo; which contains tab completion
functionality for the bash shell. You simply have to source it in your active
shell session by running
</p><pre class="verbatim">  .  $prefix/share/SHERPA-MC/sherpa-completion
</pre>
<p>and you will be able to tab-complete any parameters on a Sherpa
command line.
</p>
<p>To permanently enable this feature in your bash shell, you&rsquo;ll have to add the
source command above to your ~/.bashrc.
</p>

<hr>
<a name="Rivet-analyses"></a>
<a name="Rivet-analyses-1"></a>
<h2 class="section">6.2 Rivet analyses</h2>
<a name="index-ANALYSIS_005fOUTPUT-1"></a>

<p>Sherpa is equipped with an interface to the analysis tool 
<a href="http://projects.hepforge.org/rivet/">Rivet</a>. To enable it,
Rivet and <a href="http://lcgapp.cern.ch/project/simu/HepMC/">HepMC</a>
have to be installed (e.g. using the Rivet bootstrap script)
and your Sherpa compilation has to be configured with the following options:
</p><pre class="verbatim">  ./configure --enable-hepmc2=/path/to/hepmc2 --enable-rivet=/path/to/rivet
</pre>
<p>(Note: Both paths are equal if you used the Rivet bootstrap script.)
</p>
<p>To use the interface, specify the switch
</p><pre class="verbatim">  Sherpa ANALYSIS=Rivet
</pre>
<p>and create an analysis section in <code>Run.dat</code> that reads as follows:
</p><pre class="verbatim">  (analysis){
    BEGIN_RIVET {
      -a D0_2008_S7662670 CDF_2007_S7057202 D0_2004_S5992206 CDF_2008_S7828950
    } END_RIVET
  }(analysis)
</pre>
<p>The line starting with <code>-a</code> specifies which Rivet analyses to run and the
histogram output file can be changed with the normal <code>ANALYSIS_OUTPUT</code>
switch.
</p>
<p>You can also use <code>rivet-mkhtml</code> (distributed with Rivet) to create
plot webpages from Rivet&rsquo;s output files:
</p><pre class="verbatim">  source /path/to/rivetenv.sh   # see below
  rivet-mkhtml -o output/ file1.aida [file2.aida, ...]
  firefox output/index.html &amp;
</pre>
<p>If your Rivet installation is not in a standard location, the bootstrap script
should have created a <code>rivetenv.sh</code> which you have to source before running
the <code>rivet-mkhtml</code> script.
</p>
<hr>
<a name="HZTool-analyses"></a>
<a name="HZTool-analyses-1"></a>
<h2 class="section">6.3 HZTool analyses</h2>
<a name="index-ANALYSIS_005fOUTPUT-2"></a>

<p>Sherpa is equipped with an interface to the analysis tool
<a href="http://projects.hepforge.org/hztool/">HZTool</a>. To enable it,
HZTool and <a href="http://cernlib.web.cern.ch/">CERNLIB</a> have to be installed 
and your Sherpa compilation has to be configured with the following options:
</p><pre class="verbatim">  ./configure --enable-hztool=/path/to/hztool --enable-cernlib=/path/to/cernlib --enable-hepevtsize=4000
</pre>
<p>To use the interface, specify the switch
</p><pre class="verbatim">  Sherpa ANALYSIS=HZTool
</pre>
<p>and create an analysis section in <code>Run.dat</code> that reads as follows:
</p><pre class="verbatim">  (analysis){
    BEGIN_HZTOOL {
      HISTO_NAME output.hbook;
      HZ_ENABLE hz00145 hz01073 hz02079 hz03160;
    } END_HZTOOL;
  }(analysis)
</pre>
<p>The line starting with <code>HZ_ENABLE</code> specifies which HZTool analyses to run.
The histogram output directory can be changed using the <code>ANALYSIS_OUTPUT</code>
switch, while <code>HISTO_NAME</code> specifies the hbook output file.
</p>
<hr>
<a name="MCFM-interface"></a>
<a name="MCFM-interface-1"></a>
<h2 class="section">6.4 MCFM interface</h2>
<a name="index-Loop_005fGenerator"></a>

<p>Sherpa is equipped with an interface to the NLO library of
<a href="http://mcfm.fnal.gov/">MCFM</a> for decdicated processes. 
To enable it, MCFM has to be installed and compiled into a single library, 
libMCFM.a. To this end, an installation script is provided in
<code>AddOns/MCFM/install_mcfm.sh</code>. Please note, due to some process specific
changes that are made by the installation script to the MCFM code, only few
selected processes of MCFM-6.3 are available through the interface.
</p>
<p>Finally, your Sherpa compilation has to be configured with the following
options:
</p><pre class="verbatim">  ./configure --enable-mcfm=/path/to/mcfm
</pre><p>To use the interface, specify
</p><pre class="verbatim">  Loop_Generator MCFM;
</pre><p>in the process section of the run card and add it to the list of generators 
in <a href="#ME_005fSIGNAL_005fGENERATOR">ME_SIGNAL_GENERATOR</a>. Of course, MCFM&rsquo;s process.DAT file has to be 
copied to the current run directory.
</p>

<hr>
<a name="Debugging-a-crashing_002fstalled-event"></a>
<a name="Debugging-a-crashing_002fstalled-event-1"></a>
<h2 class="section">6.5 Debugging a crashing/stalled event</h2>

<hr>
<a name="Crashing-events"></a>
<h3 class="subsection">6.5.1 Crashing events</h3>
<p>If an event crashes, Sherpa tries to obtain all the information needed to
reproduce that event and writes it out into a directory named
</p><pre class="verbatim">  Status__&lt;date&gt;_&lt;time&gt;
</pre>
<p>If you are a Sherpa user and want to report this crash to the Sherpa team,
please attach a tarball of this directory to your email. This allows us to
reproduce your crashed event and debug it.
</p>
<p>To debug it yourself, you can follow these steps
(Only do this if you are a Sherpa developer, or want to debug a problem
in an addon library created by yourself):
</p><ul>
<li> Copy the random seed out of the status directory into your run path:
<pre class="verbatim">  cp  Status__&lt;date&gt;_&lt;time&gt;/random.dat  ./
</pre>
</li><li> Run your normal Sherpa commandline with an additional parameter:
<pre class="verbatim">  Sherpa [...] STATUS_PATH=./
</pre>
<p>Sherpa will then read in your random seed from &ldquo;./random.dat&rdquo; and
generate events from it.
</p>
</li><li> Ideally, the first event will lead to the crash you saw earlier, and
you can now turn on debugging output to find out more about the details
of that event and test code changes to fix it:
<pre class="verbatim">  Sherpa [...] OUTPUT=15 STATUS_PATH=./
</pre></li></ul>

<hr>
<a name="Stalled-events"></a>
<h3 class="subsection">6.5.2 Stalled events</h3>
<p>If event generation seems to stall, you first have to find out
the number of the current event. For that you would terminate the stalled
Sherpa process (using Ctrl-c) and check in its final output for the number
of generated events.
Now you can request Sherpa to write out the random seed for the event before the
stalled one:
</p><pre class="verbatim">  Sherpa [...] EVENTS=[#events - 1] SAVE_STATUS=Status/
</pre>
<p>(Replace [#events - 1] using the number you figured out earlier)
</p>
<p>The created status directory can either be sent to the Sherpa developers,
or be used in the same steps as above to reproduce that event and debug it.
</p>
<hr>
<a name="Versioned-installation"></a>
<a name="Versioned-installation-1"></a>
<h2 class="section">6.6 Versioned installation</h2>

<p>If you want to install different Sherpa versions into the same prefix
(e.g. /usr/local), you have to enable versioning of the installed directories
by using the configure option &lsquo;<samp>--enable-versioning</samp>&rsquo;.
Optionally you can even pass an argument to this parameter of what you want the
version tag to look like.
</p>
<hr>
<a name="NLO-calculations"></a>
<a name="NLO-calculations-1"></a>
<h2 class="section">6.7 NLO calculations</h2>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Choosing-DIPOLE_005fALPHA">6.7.1 Choosing DIPOLE_ALPHA</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Integrating-complicated-Loop_002dME">6.7.2 Integrating complicated Loop-ME</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Avoiding-misbinning-effects">6.7.3 Avoiding misbinning effects</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Enforcing-the-renormalization-scheme">6.7.4 Enforcing the renormalization scheme</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Checking-the-pole-cancellation">6.7.5 Checking the pole cancellation</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<a name="Choosing-DIPOLE_005fALPHA"></a>
<a name="Choosing-DIPOLE_005fALPHA-1"></a>
<h3 class="subsection">6.7.1 Choosing DIPOLE_ALPHA</h3>

<p>A variation of the parameter <code>DIPOLE_ALPHA</code> 
(see <a href="#Dipole-subtraction">Dipole subtraction</a>) changes the 
contribution from the real (subtracted) piece (<code>RS</code>) and 
the integrated subtraction terms (<code>I</code>), keeping their sum constant.
Varying this parameter provides a nice check of the consistency 
of the subtraction procedure and it allows to optimize the
integration performance of the real correction. This piece
has the most complicated momentum phase space and is often the
most time consuming part of the NLO calculation.
The optimal choice depends on the specific setup and can be 
determined best by trial. 
</p>
<p>Hints to find a good value: 
</p><ul>
<li> The smaller <code>DIPOLE_ALPHA</code> is the less dipole term have to be
calculated, thus the less time the evaluation/phase space point takes.
</li><li> Too small choices lead to large cancelations between the <code>RS</code>
and the <code>I</code> parts and thus to large statisical errors.
</li><li> For very simple processes (with only a total of two 
partons in the iniatial and the final state
of the born process) the best choice is typically <code>DIPOLE_ALPHA=1</code>.
The more complicated a process is the smaller <code>DIPOLE_ALPHA</code> should be
(e.g. with 5 partons the best choice is typically around 0.01).
</li><li> A good choice is typically such that the cross section from the 
<code>RS</code> piece is significantly positive but not much larger than 
the born cross section.
</li></ul>

<hr>
<a name="Integrating-complicated-Loop_002dME"></a>
<a name="Integrating-complicated-Loop_002dME-1"></a>
<h3 class="subsection">6.7.2 Integrating complicated Loop-ME</h3>

<p>For complicated processes the evaluation of one-loop matrix elements
can be very time consuming. The generation time of a fully optimized 
integration grid can become prohibitively long. Rather than using a 
poorly optimized grid in this case it is more advisable to use a grid
optimized with either the born matrix elements or the born matrix 
elements and the finite part of the integrated subtraction terms only,
working under the assumption that the distibutions in phase space are 
rather similar.
</p>
<p>This can be done by one of the following methods:
</p><ol>
<li> Employ a dummy virtual (requires no computing time, returns 
      <code>0.</code> as its finite result) to optimise the grid. This 
      only works if <code>V</code> is not the only <code>NLO_QCD_Part</code> 
      specified.
  <ol>
<li> During integration set the <code>Loop_Generator</code> to 
        <code>Internal</code> and add <code>USE_DUMMY_VIRTUAL=1</code> to 
        your <code>(run){...}(run)</code> section. The grid will 
        then be optimised to the phase space distribution of 
        the sum of the Born matrix element and the finite part 
        of the integrated subtraction term. <b>Note:</b> The 
        cross section displayed during integration will also 
        correspond to the sum of the Born matrix element and 
        the finite part of the integrated subtraction term.
  </li><li> During event generation reset <code>Loop_Generator</code> to 
        your generator supplying the virtual correction. The 
        events generated then carry the correct event weight.
  </li></ol>
</li><li> Suppress the evaluation of the virtual and/or the integrated 
      subtraction terms. This only works if Amegic is used as the 
      matrix element generator for the <code>BVI</code> pieces and <code>V</code> 
      is not the only <code>NLO_QCD_Part</code> specified.
  <ol>
<li> During integration add <code>NLO_BVI_MODE=&lt;num&gt;</code> to your 
        <code>(run){...}(run)</code> section. <code>&lt;num&gt;</code> takes the 
        following values: <code>1</code>-<code>B</code>, <code>2</code>-<code>I</code>, 
        and <code>4</code>-<code>V</code>. The values are additive, i.e. 
        <code>3</code>-<code>BI</code>. <b>Note:</b> The cross section displayed 
        during integration will match the parts selected by 
        <code>NLO_BVI_MODE</code>.
  </li><li> During event generation remove the switch again and the 
        events will carry the correct weight.
  </li></ol>
</li></ol>

<p>Note: this will not work for the <code>RS</code> piece!
</p>
<hr>
<a name="Avoiding-misbinning-effects"></a>
<a name="Avoiding-misbinning-effects-1"></a>
<h3 class="subsection">6.7.3 Avoiding misbinning effects</h3>

<p>Close to the infrared limit, the real emission matrix element and
corresponding subtraction events exhibit large cancellations. If the
(minor) kinematics difference of the events happens to cross a parton-level
cut or analysis histogram bin boundary, then large spurious spikes can appear.
</p>
<p>These can be smoothed to some extend by shifting the weight from the subtraction
kinematic to the real-emission kinematic if the dipole measure alpha is below a given
threshold. The fraction of the shifted weight is inversely proportional to the
dipole measure, such that the final real-emission and subtraction weights are
calculated as:
</p><pre class="verbatim">  w_r -&gt; w_r + sum_i [1-x(alpha_i)] w_{s,i}
  foreach i: w_{s,i} -&gt; x(alpha_i) w_{s,i}
</pre><p>with the function x(alpha)=(alpha/|alpha_0|)^n for alpha&lt;alpha_0 and 1 otherwise.
</p>
<p>The threshold can be set by the parameter
&lsquo;<samp>NLO_SMEAR_THRESHOLD=&lt;alpha_0&gt;</samp>&rsquo; and the functional form of alpha and thus
interpretation of the threshold can be chosen by its sign (positive: relative
dipole kT in GeV, negative: dipole alpha).
In addition, the exponent n can be set by &lsquo;<samp>NLO_SMEAR_POWER=&lt;n&gt;</samp>&rsquo;.
</p>
<hr>
<a name="Enforcing-the-renormalization-scheme"></a>
<a name="Enforcing-the-renormalization-scheme-1"></a>
<h3 class="subsection">6.7.4 Enforcing the renormalization scheme</h3>
<a name="index-LOOP_005fME_005fINIT"></a>
<p>Sherpa takes information about the renormalization scheme from the loop ME generator.
The default scheme is MSbar, and this is assumed if no loop ME is provided,
for example when integrated subtraction terms are computed by themselves.
This can lead to inconsistencies when combining event samples, which may be avoided
by setting &lsquo;<samp>LOOP_ME_INIT=1</samp>&rsquo; in the <code>(run)</code> section of the input file.
</p>
<hr>
<a name="Checking-the-pole-cancellation"></a>
<a name="Checking-the-pole-cancellation-1"></a>
<h3 class="subsection">6.7.5 Checking the pole cancellation</h3>
<a name="index-CHECK_005fBORN"></a>
<a name="index-CHECK_005fFINITE"></a>
<a name="index-CHECK_005fPOLES"></a>
<a name="index-CHECK_005fPOLES_005fTHRESHOLD"></a>
<p>To check whether the poles of the dipole subtraction and the interfaced
one-loop matrix element cancel phase space point by phase space point
<code>CHECK_POLES=1</code> can be specified. The accuracy to which the poles
do have to cancel can be set via <code>CHECK_POLES_THRESHOLD=&lt;accu&gt;</code>.
In the same way, the finite contributions of the infrared subtraction
and the one-loop matrix element can be checked by setting
<code>CHECK_FINITE=1</code>, and the Born matrix element via <code>CHECK_BORN=1</code>.
</p>
<hr>
<a name="Scale-variations"></a>
<a name="A-posteriori-scale-variations"></a>
<h1 class="chapter">7 A posteriori scale variations</h1>

<p>There are several ways to compute the effects of changing the scales 
and PDFs of any event produced by Sherpa. They can computed explicitly, 
cf. <a href="#Explicit-scale-variations">Explicit scale variations</a>, on-the-fly, cf. 
<a href="#Scale-and-PDF-variations">Scale and PDF variations</a> (restricted to multiplicative factors), or 
reconstructed a posteriori. The latter method needs plenty of additional 
information in the event record and is (depending on the actual calculation) 
available in two formats:
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#A-posteriori-scale-and-PDF-variations-using-the-HepMC-GenEvent-Output">7.1 A posteriori scale and PDF variations using the HepMC GenEvent Output</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#A-posteriori-scale-and-PDF-variations-using-the-ROOT-NTuple-Output">7.2 A posteriori scale and PDF variations using the ROOT NTuple Output</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<a name="A-posteriori-scale-and-PDF-variations-using-the-HepMC-GenEvent-Output"></a>
<a name="A-posteriori-scale-and-PDF-variations-using-the-HepMC-GenEvent-Output-1"></a>
<h2 class="section">7.1 A posteriori scale and PDF variations using the HepMC GenEvent Output</h2>

<p>Events generated in a LO, LOPS, NLO, NLOPS, MEPS@LO, MEPS@NLO or MENLOPS
calculation can be written out in the HepMC format including all infomation to
carry out arbitrary scale variations a posteriori. For this feature HepMC of at
least version 2.06 is necessary and both <code>HEPMC_USE_NAMED_WEIGHTS=1</code> and 
<code>HEPMC_EXTENDED_WEIGHTS=1</code> have to enabled. Detailed instructions on 
how to use this information to construct the new event weight can be found 
here <a href="https://sherpa.hepforge.org/doc/ScaleVariations-Sherpa-2.2.0.pdf">https://sherpa.hepforge.org/doc/ScaleVariations-Sherpa-2.2.0.pdf</a>. 
</p>
<hr>
<a name="A-posteriori-scale-and-PDF-variations-using-the-ROOT-NTuple-Output"></a>
<a name="A-posteriori-scale-and-PDF-variations-using-the-ROOT-NTuple-Output-1"></a>
<h2 class="section">7.2 A posteriori scale and PDF variations using the ROOT NTuple Output</h2>
<a name="index-USR_005fWGT_005fMODE"></a>

<p>Events generated at fixed-order LO and NLO can be stored in ROOT NTuples
that allow arbitrary a posteriori scale and PDF variations, see 
<a href="#Event-output-formats">Event output formats</a>. An example for writing and reading in such 
ROOT NTuples can be found here: <a href="#NTuple-production">Production of NTuples</a>.
The internal ROOT Tree has the following Branches:
</p><dl compact="compact">
<dt>&lsquo;<samp>id</samp>&rsquo;</dt>
<dd><p> Event ID to identify correlated real sub-events.
 </p></dd>
<dt>&lsquo;<samp>nparticle</samp>&rsquo;</dt>
<dd><p> Number of outgoing partons.
 </p></dd>
<dt>&lsquo;<samp>E/px/py/pz</samp>&rsquo;</dt>
<dd><p> Momentum components of the partons.
 </p></dd>
<dt>&lsquo;<samp>kf</samp>&rsquo;</dt>
<dd><p> Parton PDG code.
 </p></dd>
<dt>&lsquo;<samp>weight</samp>&rsquo;</dt>
<dd><p> Event weight, if sub-event is treated independently.
 </p></dd>
<dt>&lsquo;<samp>weight2</samp>&rsquo;</dt>
<dd><p> Event weight, if correlated sub-events are treated as single event.
 </p></dd>
<dt>&lsquo;<samp>me_wgt</samp>&rsquo;</dt>
<dd><p> ME weight (w/o PDF), corresponds to &rsquo;weight&rsquo;.
 </p></dd>
<dt>&lsquo;<samp>me_wgt2</samp>&rsquo;</dt>
<dd><p> ME weight (w/o PDF), corresponds to &rsquo;weight2&rsquo;.
 </p></dd>
<dt>&lsquo;<samp>id1</samp>&rsquo;</dt>
<dd><p> PDG code of incoming parton 1.
 </p></dd>
<dt>&lsquo;<samp>id2</samp>&rsquo;</dt>
<dd><p> PDG code of incoming parton 2.
 </p></dd>
<dt>&lsquo;<samp>fac_scale</samp>&rsquo;</dt>
<dd><p> Factorisation scale.
 </p></dd>
<dt>&lsquo;<samp>ren_scale</samp>&rsquo;</dt>
<dd><p> Renormalisation scale.
 </p></dd>
<dt>&lsquo;<samp>x1</samp>&rsquo;</dt>
<dd><p> Bjorken-x of incoming parton 1.
 </p></dd>
<dt>&lsquo;<samp>x2</samp>&rsquo;</dt>
<dd><p> Bjorken-x of incoming parton 2.
 </p></dd>
<dt>&lsquo;<samp>x1p</samp>&rsquo;</dt>
<dd><p> x&rsquo; for I-piece of incoming parton 1.
 </p></dd>
<dt>&lsquo;<samp>x2p</samp>&rsquo;</dt>
<dd><p> x&rsquo; for I-piece of incoming parton 2.
 </p></dd>
<dt>&lsquo;<samp>nuwgt</samp>&rsquo;</dt>
<dd><p> Number of additional ME weights for loops and integrated subtraction terms.
 </p></dd>
<dt>&lsquo;<samp>usr_wgt[nuwgt]</samp>&rsquo;</dt>
<dd><p> Additional ME weights for loops and integrated subtraction terms.
</p></dd>
</dl>

<hr>
<a name="Computing-_0028differential_0029-cross-sections-of-real-correction-events-with-statistical-errors"></a>
<h3 class="subsection">7.2.1 Computing (differential) cross sections of real correction events with statistical errors</h3>

<p>Real correction events and their counter-events from subtraction terms are 
highly correlated and exhibit large cancellations. Although a treatment of 
sub-events as independent events leads to the correct cross section the 
statistical error would be greatly overestimated. In order to get a realistic 
statistical error sub-events belonging to the same event must be combined 
before added to the total cross section or a histogram bin of a differential 
cross section. Since in general each sub-event comes with it&rsquo;s own set of four 
momenta the following treatment becomes necessary:
</p><ol>
<li> An event here refers to a full real correction event that may contain 
several sub-events. All entries with the same id belong to the same event. 
Step 2 has to be repeated for each event.
</li><li> Each sub-event must be checked separately whether it passes possible 
phase space cuts. Then for each observable add up <code>weight2</code> of all 
sub-events that go into the same histogram bin. These sums <code>x_id</code> are the 
quantities to enter the actual histogram.
</li><li> To compute statistical errors each bin must store the sum over all 
<code>x_id</code> and the sum over all <code>x_id^2</code>. The cross section in the bin is 
given by <code>&lt;x&gt; = 1/N \sum x_id</code>, where <code>N</code> is the number of events 
(not sub-events). The <code>1-\sigma</code> statistical error for the bin is
<code>\sqrt{ (&lt;x^2&gt;-&lt;x&gt;^2)/(N-1) } </code>
</li></ol>
<p>Note: The main difference between <code>weight</code> and <code>weight2</code> is that they 
refer to a different counting of events. While <code>weight</code> corresponds to 
each event entry (sub-event) counted separately, <code>weight2</code> counts events 
as defined in step 1 of the above procedure. For NLO pieces other than the real 
correction <code>weight</code> and <code>weight2</code> are identical.
</p>
<hr>
<a name="Computation-of-cross-sections-with-new-PDF_0027s"></a>
<h3 class="subsection">7.2.2 Computation of cross sections with new PDF&rsquo;s</h3>

<p><strong>Born and real pieces:</strong>
</p>
<p>Notation:
</p>
<p><code>f_a(x_a) = PDF 1 applied on parton a,
      F_b(x_b) = PDF 2 applied on parton b.</code>
</p>
<p>The total cross section weight is given by
</p>
<p><code>weight = me_wgt f_a(x_a)F_b(x_b).</code>
</p>
<p><strong>Loop piece and integrated subtraction terms:</strong>
</p>
<p>The weights here have an explicit dependence on the renormalization
and factorization scales.
</p>
<p>To take care of the renormalization scale dependence (other than via 
<code>alpha_S</code>) the weight <code>w_0</code> is defined as
</p>
<p><code> w_0 = me_wgt + usr_wgts[0] log((\mu_R^new)^2/(\mu_R^old)^2)
                     + usr_wgts[1] 1/2 [log((\mu_R^new)^2/(\mu_R^old)^2)]^2.</code>
</p>
<p>To address the factorization scale dependence the weights <code>w_1,...,w_8</code> 
are given by 
</p>
<p><code>w_i = usr_wgts[i+1] + usr_wgts[i+9] log((\mu_F^new)^2/(\mu_F^old)^2).</code>
</p>
<p>The full cross section weight can be calculated as
</p>
<p><code>weight = w_0 f_a(x_a)F_b(x_b)
	       + (f_a^1 w_1 + f_a^2 w_2 + f_a^3 w_3 + f_a^4 w_4) F_b(x_b)
	       + (F_b^1 w_5 + F_b^2 w_6 + F_b^3 w_7 + F_b^4 w_8) f_a(x_a)</code>
</p>
<p>where
</p>
<p><code>f_a^1 = f_a(x_a) (a=quark), \sum_q f_q(x_a) (a=gluon),
      f_a^2 = f_a(x_a/x'_a)/x'_a (a=quark), \sum_q f_q(x_a/x'_a)x'_a (a=gluon),
      f_a^3 = f_g(x_a),
      f_a^4 = f_g(x_a/x'_a)/x'_a.</code>
</p>
<p>The scale dependence coefficients <code>usr_wgts[0]</code> and <code>usr_wgts[1]</code> 
are normally obtained from the finite part of the virtual correction by
removing renormalization terms and universal terms from dipole subtraction.
This may be undesirable, especially when the loop provider splits up
the calculation of the virtual correction into several pieces, like
leading and sub-leading color. In this case the loop provider should 
control the scale dependence coefficients, which can be enforced with
option &lsquo;<samp>USR_WGT_MODE=0;</samp>&rsquo; in the <code>(run)</code> section of Sherpa&rsquo;s
input file. 
</p>
<p><strong>The loop provider must support this option
  or the scale dependence coefficients will be invalid!</strong>
</p>
<hr>
<a name="Customization"></a>
<a name="Customization-1"></a>
<h1 class="chapter">8 Customization</h1>
<a name="index-SHERPA_005fLDADD"></a>

<p>Customizing Sherpa according to your needs.
</p>
<p>Sherpa can be easily extended with certain user defined tools.
To this extent, a corresponding C++ class must be written,
and compiled into an external library:
</p>
<pre class="verbatim">  g++ -shared \
    -I`$SHERPA_PREFIX/bin/Sherpa-config --incdir` \
    `$SHERPA_PREFIX/bin/Sherpa-config --ldflags` \
    -o libMyCustomClass.so My_Custom_Class.C
</pre>
<p>This library can then be loaded in Sherpa at runtime with the switch
<code>SHERPA_LDADD</code>, e.g.:
</p>
<pre class="verbatim">  SHERPA_LDADD=MyCustomClass
</pre>
<p>Several specific examples of features which can be extended in this way are
listed in the following sections.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Exotic-physics">8.1 Exotic physics</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">   How to introduce your own models to Sherpa. Example: Z-prime.
</td></tr>
<tr><td align="left" valign="top"><a href="#Custom-scale-setter">8.2 Custom scale setter</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"> How to write a custom calculator for factorisation and renormalisation scale
</td></tr>
<tr><td align="left" valign="top"><a href="#External-one_002dloop-ME">8.3 External one-loop ME</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"> How to interface external one-loop codes.
</td></tr>
<tr><td align="left" valign="top"><a href="#External-RNG">8.4 External RNG</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">     How to add an external random number generator.
</td></tr>
<tr><td align="left" valign="top"><a href="#External-PDF">8.5 External PDF</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">     How to add an external PDF.
</td></tr>
<tr><td align="left" valign="top"><a href="#Python-Interface">8.6 Python Interface</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"> How to make Sherpa talk to your Python script.
</td></tr>
</table>

<hr>
<a name="Exotic-physics"></a>
<a name="Exotic-physics-1"></a>
<h2 class="section">8.1 Exotic physics</h2>

<p>It is possible to add your own models to Sherpa in a straightforward way. 
To illustrate, a simple example has been included in the directory 
<code>Examples/Models/SM_ZPrime</code>, showing how to add a Z-prime boson to 
the Standard Model.
</p>
<p>The important features of this example include:
</p><ul>
<li> The <code>SM_Zprime.C</code> file. 

<p>      This file contains the initialisation of the Z-prime boson. The 
      properties of the Z-prime are set here, such as mass, width, 
      electromagnetic charge, spin etc.
</p>      
</li><li> The <code>Interaction_Model_SM_Zprime.C</code> file. 

<p>      This file contains the definition of the Z-prime boson&rsquo;s interactions. 
      The right- and left-handed couplings to each of the fermions are 
      set here.
</p>
</li><li> An example <code>Makefile</code>.

<p>      This shows how to compile the sources above into a shared library.
</p>      
</li><li> The line <code>SHERPA_LDADD SMZprime</code> in the run-card.

<p>      This line tells Sherpa to load the extra libraries created from the *.C 
      files above.
</p>      
</li><li> The line <code>MODEL SM+Zprime</code> in the run-card.

<p>      This line tells Sherpa which model to use for the run.
</p>
</li><li> The lines <code>MASS[32] 1000.</code> and <code>WIDTH[32] 50.</code> in the run-card.

<p>      These lines show how you can overrule the choices you made for the 
      properties of the new particle in the <code>SM_Zprime.C</code> file. For 
      more information on changing parameters in Sherpa, see 
      <a href="#Input-structure">Input structure</a> and <a href="#Parameters">Parameters</a>.
</p>
</li><li> The lines <code>Zp_cpl_L 0.3</code> and <code>Zp_cpl_R 0.6</code> set the
      couplings to left and right handed fermions in the run-card.

</li></ul>

<p>To use this model, create the libraries for Sherpa to use by running
</p>
<div class="example">
<pre class="example">make
</pre></div>

<p>in this directory. Then run Sherpa as normal:
</p>
<div class="example">
<pre class="example">../../../bin/Sherpa
</pre></div>


<p>To implement your own model, copy these example files anywhere and modify 
them according to your needs.
</p>
<p>Note: You don&rsquo;t have to modify or recompile any part of Sherpa to use your
model. As long as the <code>SHERPA_LDADD</code> parameter is specified as above,
Sherpa will pick up your model automatically.
</p>
<p>Furthermore note: New physics models with an existing implementation in
FeynRules, cf. [<a href="#Christensen2008py">Chr08</a>] and
[<a href="#Christensen2009jx">Chr09</a>], can directly be invoked using Sherpa&rsquo;s
support for the UFO model format, see <a href="#UFO-Model-Interface">UFO Model Interface</a>.
</p>

<hr>
<a name="Custom-scale-setter"></a>
<a name="Custom-scale-setter-1"></a>
<h2 class="section">8.2 Custom scale setter</h2>

<p>You can write a custom calculator to set the factorisation, renormalisation and
resummation scales. It has to be implemented as a C++ class which derives from
the <code>Scale_Setter_Base</code> base class and implements only the constructor and
the <code>Calculate</code> method.
</p>
<p>Here is a snippet for a very simple one, which sets all three scales to the
invariant mass of the two incoming partons.
</p>
<pre class="verbatim">#include &quot;PHASIC++/Scales/Scale_Setter_Base.H&quot;
#include &quot;ATOOLS/Org/Message.H&quot;

using namespace PHASIC;
using namespace ATOOLS;

namespace PHASIC {

  class Custom_Scale_Setter: public Scale_Setter_Base {
  protected:

  public:

    Custom_Scale_Setter(const Scale_Setter_Arguments &amp;args) :
      Scale_Setter_Base(args)
    {
      m_scale.resize(3); // by default three scales: fac, ren, res
                         // but you can add more if you need for COUPLINGS
      SetCouplings(); // the default value of COUPLINGS is &quot;Alpha_QCD 1&quot;, i.e.
                      // m_scale[1] is used for running alpha_s
                      // (counting starts at zero!)
    }

    double Calculate(const std::vector&lt;ATOOLS::Vec4D&gt; &amp;p,
		     const size_t &amp;mode)
    {
      double muF=(p[0]+p[1]).Abs2();
      double muR=(p[0]+p[1]).Abs2();
      double muQ=(p[0]+p[1]).Abs2();

      m_scale[stp::fac] = muF;
      m_scale[stp::ren] = muR;
      m_scale[stp::res] = muQ;

      // Switch on debugging output for this class with:
      // Sherpa &quot;OUTPUT=2[Custom_Scale_Setter|15]&quot;
      DEBUG_FUNC(&quot;Calculated scales:&quot;);
      DEBUG_VAR(m_scale[stp::fac]);
      DEBUG_VAR(m_scale[stp::ren]);
      DEBUG_VAR(m_scale[stp::res]);

      return m_scale[stp::fac];
    }

  };

}

// Some plugin magic to make it available for SCALES=CUSTOM
DECLARE_GETTER(Custom_Scale_Setter,&quot;CUSTOM&quot;,
	       Scale_Setter_Base,Scale_Setter_Arguments);

Scale_Setter_Base *ATOOLS::Getter
&lt;Scale_Setter_Base,Scale_Setter_Arguments,Custom_Scale_Setter&gt;::
operator()(const Scale_Setter_Arguments &amp;args) const
{
  return new Custom_Scale_Setter(args);
}

void ATOOLS::Getter&lt;Scale_Setter_Base,Scale_Setter_Arguments,
		    Custom_Scale_Setter&gt;::
PrintInfo(std::ostream &amp;str,const size_t width) const
{ 
  str&lt;&lt;&quot;Custom scale scheme&quot;;
}
</pre>
<p>If the code is compiled into a library called libCustomScale.so,
then this library is loaded dynamically at runtime with the switch
&lsquo;<samp>SHERPA_LDADD=CustomScale</samp>&rsquo; either on the command line or in the run
section, cf. <a href="#Customization">Customization</a>. This then allows to use the custom scale like
a built-in scale setter by specifying &lsquo;<samp>SCALES=CUSTOM</samp>&rsquo; (cf. <a href="#SCALES">SCALES</a>).
</p><hr>
<a name="External-one_002dloop-ME"></a>
<a name="External-one_002dloop-ME-1"></a>
<h2 class="section">8.3 External one-loop ME</h2>
<a name="index-LHOLE_005fORDERFILE"></a>
<a name="index-LHOLE_005fCONTRACTFILE"></a>
<a name="index-LHOLE_005fIR_005fREGULARISATION"></a>
<a name="index-LHOLE_005fBOOST_005fTO_005fCMS"></a>
<a name="index-LHOLE_005fOLP"></a>

<p>Sherpa includes only a very limited selection of one-loop matrix elements.
To make full use of the implemented automated dipole subtraction it is
possible to link external one-loop codes to Sherpa in order to perform
full calculations at QCD next-to-leading order. 
</p>
<p>In general Sherpa can take care of any piece of the calculation except
one-loop matrix elements, i.e. the born ME, the real correction, the real
and integrated subtraction terms as well as the phase space integration
and PDF weights for hadron collisions. Sherpa will provide sets of 
four-momenta and request for a specific parton level process the
helicity and colour summed one-loop matrix element 
(more specific: the coefficients of the Laurent series in the dimensional
regularization parameter epsilon up to the order epsilon^0).
</p>
<p>An example setup for interfacing such an external one-loop code, following 
the Binoth Les Houches interface proposal [<a href="#Binoth2010xt">Bin10a</a>] of the 
2009 Les Houches workshop, is provided in <a href="#LHC_005fZbb">Zbb production</a>. To use
the LH-OLE interface, Sherpa has to be configured with <code>--enable-lhole</code>.
</p>
<p>The interface:
</p><ul>
<li> During an initialization run Sherpa stores setup information
(schemes, model information etc.) and requests a list of parton-level
one-loop processes that are needed for the NLO calculation. This information
is stored in a file, by default called <code>OLE_order.lh</code>. 
The external one-loop code (OLE) should confirm these settings/requests
and write out a file <code>OLE_contract.lh</code>. Both filenames can be customised 
using <code>LHOLE_ORDERFILE=&lt;order-file&gt;</code> and 
<code>&lt;LHOLE_CONTRACTFILE=&lt;contract-file&gt;</code>. For their syntax and 
details see [<a href="#Binoth2010xt">Bin10a</a>].

<p>For Sherpa the output/input of the order/contract file is handled
in <code>LH_OLE_Communicator.[CH]</code>.
The actual interface is contained in <code>LH_OLE_Interface.C</code>. 
The parameters to be exchanged with the OLE are defined in the
latter file via
</p><pre class="verbatim">  lhfile.AddParameter(...);
</pre>
<p>and might require an update for specific OLE or processes. Per default, 
in addition to the standard options <code>MatrixElementSquareType</code>, 
<code>CorrectionType</code>, <code>IRregularisation</code>, <code>AlphasPower</code>, 
<code>AlphaPower</code> and <code>OperationMode</code> the masses and width of the 
W, Z and Higgs bosons and the top and bottom quarks are written out 
in free format, such that the respective OLE parameters can be easily 
synchronised.
</p>
</li><li> At runtime the communication is performed via function calls.
To allow Sherpa to call the external code the functions
<pre class="verbatim">  void OLP_Start(const char * filename);
  void OLP_EvalSubProcess(int,double*,double,double,double*);
</pre>
<p>which are defined and called in <code>LH_OLE_Interface.C</code> must be specified. 
For keywords and possible data fields passed with this functions 
see [<a href="#Binoth2010xt">Bin10a</a>].
</p>
<p>The function <code>OLP_Start(...)</code> is called once when Sherpa is starting.
The function <code>OLP_EvalSubProcess(...)</code> will be called many times
for different subprocesses and momentum configurations.
</p></li></ul>

<p>The setup (cf. example <a href="#LHC_005fZbb">Zbb production</a>):
</p><ul>
<li> The line <code>Loop_Generator LHOLE</code> tells the code to use
the interface for computing one-loop matrix elements.

</li><li> The switch <code>SHERPA_LDADD</code> has to be set to the appropriate 
library name (and path) of the one-loop generator.

</li><li> The IR regularisation scheme can be set via 
<code>LHOLE_IR_REGULARISATION</code>. Possible values are <code>DRED</code> (default) 
and <code>CDR</code>.

</li><li> Per default, Sherpa generates phase space points in the lab frame. 
If <code>LHOLE_BOOST_TO_CMS=1</code> is set, these phase space points are boosted to 
the centre of mass system before they are passed to the OLE.

</li><li> The original BLHA interface does not allow for run-time parameter 
passing. While this is discussed for an updated of the accord a workable 
solution is implemented for the use of GoSam and enabled through 
<code>LHOLE_OLP=GoSam</code>. The <code>LHOLE_BOOST_TO_CMS</code> is also automatically 
active with this setup. This, of course, can be adapted for other one-loop 
programs if need be.

</li><li> Sherpa&rsquo;s internal analysis package can be used to generate a few 
histograms. Thus, then when installing Sherpa the option
<code>--enable-analysis</code> must be include on the command line when
Sherpa is configured, see <a href="#ANALYSIS">ANALYSIS</a>.

</li></ul>
<hr>
<a name="External-RNG"></a>
<a name="External-RNG-1"></a>
<h2 class="section">8.4 External RNG</h2>

<p>To use an external Random Number Generator (RNG) in Sherpa,
you need to provide an interface to your RNG in an external
dynamic library. This library is then loaded at runtime and 
Sherpa replaces the internal RNG with the one provided.
</p>
<p><em>In this case Sherpa will not attempt to set, save, read or restore the RNG</em>
</p>
<p>The corresponding code for the RNG interface is
</p><pre class="verbatim">#include &quot;ATOOLS/Math/Random.H&quot;

using namespace ATOOLS;

class Example_RNG: public External_RNG {
public:
  double Get() 
  { 
    // your code goes here ... 
  }
};// end of class Example_RNG

// this makes Example_RNG loadable in Sherpa
DECLARE_GETTER(Example_RNG,&quot;Example_RNG&quot;,External_RNG,RNG_Key);
External_RNG *ATOOLS::Getter&lt;External_RNG,RNG_Key,Example_RNG&gt;::operator()(const RNG_Key &amp;) const
{ return new Example_RNG(); }
// this eventually prints a help message
void ATOOLS::Getter&lt;External_RNG,RNG_Key,Example_RNG&gt;::PrintInfo(std::ostream &amp;str,const size_t) const
{ str&lt;&lt;&quot;example RNG interface&quot;; }
</pre>
<p>If the code is compiled into a library called libExampleRNG.so,
then this library is loaded dynamically in Sherpa using the command
&lsquo;<samp>SHERPA_LDADD=ExampleRNG</samp>&rsquo; either on the command line or in 
&lsquo;<tt>Run.dat</tt>&rsquo;. If the library is bound at compile time, like e.g.
in cmt, you may skip this step.
</p>
<p>Finally Sherpa is instructed to retrieve the external RNG by specifying
&lsquo;<samp>EXTERNAL_RNG=Example_RNG</samp>&rsquo; on the command line or in 
&lsquo;<tt>Run.dat</tt>&rsquo;.
</p>

<hr>
<a name="External-PDF"></a>
<a name="External-PDF-1"></a>
<h2 class="section">8.5 External PDF</h2>

<p>To use an external PDF (not included in LHAPDF) in Sherpa,
you need to provide an interface to your PDF in an external
dynamic library. This library is then loaded at runtime and 
it is possible within Sherpa to access all PDFs included.
</p>
<p>The simplest C++ code to implement your interface looks as follows 
</p><pre class="verbatim">#include &quot;PDF/Main/PDF_Base.H&quot;

using namespace PDF;

class Example_PDF: public PDF_Base {
public:
  void Calculate(double x,double Q2)
  {
    // calculate values x f_a(x,Q2) for all a
  }
  double GetXPDF(const ATOOLS::Flavour a)
  {
    // return x f_a(x,Q2)
  }
  virtual PDF_Base *GetCopy()
  {
    return new Example_PDF();
  }
};// end of class Example_PDF

// this makes Example_PDF loadable in Sherpa
DECLARE_PDF_GETTER(Example_PDF_Getter);
PDF_Base *Example_PDF_Getter::operator()(const Parameter_Type &amp;args) const
{ return new Example_PDF(); }
// this eventually prints a help message
void Example_PDF_Getter::PrintInfo
(std::ostream &amp;str,const size_t width) const
{ str&lt;&lt;&quot;example PDF&quot;; }
// this lets Sherpa initialize and unload the library
Example_PDF_Getter *p_get=NULL;
extern &quot;C&quot; void InitPDFLib()
{ p_get = new Example_PDF_Getter(&quot;ExamplePDF&quot;); }
extern &quot;C&quot; void ExitPDFLib() { delete p_get; }
</pre>
<p>If the code is compiled into a library called libExamplePDFSherpa.so,
then this library is loaded dynamically in Sherpa using 
&lsquo;<samp>PDF_LIBRARY=ExamplePDFSherpa</samp>&rsquo; either on the command line, 
in &lsquo;<tt>Run.dat</tt>&rsquo; or in &lsquo;<tt>ISR.dat</tt>&rsquo;. If the library is bound
at compile time, like e.g. in cmt, you may skip this step.
It is now possible to list all accessible PDF sets by specifying
&lsquo;<samp>SHOW_PDF_SETS=1</samp>&rsquo; on the command line.
</p>
<p>Finally Sherpa is instructed to retrieve the external PDF by specifying
&lsquo;<samp>PDF_SET=ExamplePDF</samp>&rsquo; on the command line, in &lsquo;<tt>Run.dat</tt>&rsquo;
or in &lsquo;<tt>ISR.dat</tt>&rsquo;.
</p>

<hr>
<a name="Python-Interface"></a>
<a name="Python-Interface-1"></a>
<h2 class="section">8.6 Python Interface</h2>
<p>Certain Sherpa classes and methods can be made available to the Python
interpreter in the form of an extension module. This module can be
loaded in Python and provides access to certain functionalities of the
Sherpa event generator in Python. In order to build the module, Sherpa
must be configured with the option <code>--enable-pyext</code>. Running
<code>make</code> then invokes the automated interface generator SWIG
[<a href="#Beazley2003">Bea03</a>] to create the Sherpa module using the Python C/C++
API. SWIG version 1.3.x or later is required for a successful build.
Problems might occur if more than one version of Python is present on
the system since automake currently doesn&rsquo;t always handle multiple
Python installations properly. If you have multiple Python versions
installed on your system, please set the <code>PYTHON</code> environment
variable to the Python 2 executable via 
</p><pre class="verbatim">  export PYTHON=&lt;path-to-python2&gt;
</pre><p>before executing the <code>configure</code> script (see.
Certain Sherpa classes and methods can be made available to the Python
interpreter in the form of an extension module. This module can be
loaded in Python and provides access to certain functionalities of the
Sherpa event generator in Python. It was designed specifically for the
computation of matrix elements in python (<a href="#APIexamples">Using the Python interface</a>) and its
features are currently limited to this purpose. In order to build the
module, Sherpa must be configured with the option <code>--enable-pyext</code>.
Running <code>make</code> then invokes the automated interface generator SWIG
[<a href="#Beazley2003">Bea03</a>] to create the Sherpa module using the Python C/C++
API. SWIG version 1.3.x or later is required for a successful build.
Problems might occur if more than one version of Python is present on
the system since automake currently doesn&rsquo;t always handle multiple
Python installations properly. A possible workaround is to temporarily
uninstall one version of python, configure and build Sherpa, and then
reinstall the temporarily uninstalled version of Python.
</p>
<p>The following script is a minimal example that shows how to use the
Sherpa module in Python. In order to load the Sherpa module, the
location where it is installed must be added to the PYTHONPATH. There
are several ways to do this, in this example the sys module is used. The
sys module also allows it to directly pass the command line arguments
used to run the script to the initialization routine of Sherpa. The
script can thus be executed using the normal command line options of
Sherpa (see <a href="#Command-line">Command line options</a>). Furthermore it illustrates how
exceptions that Sherpa might throw can be taken care of. If a run card
is present in the directory where the script is executed, the
initialization of the generator causes Sherpa to compute the cross
sections for the processes specified in the run card. See
<a href="#Matrix-Element-values-through-Python-interface">Computing matrix elements for idividual phase space points using the Python Interface</a> for
an example that shows how to use the Python interface to compute matrix
elements or <a href="#Events">Generate events using scripts</a> to see how the interface can be used to
generate events in Python.
</p>
<p>Note that if you have compiled Sherpa with MPI support, you need to
source the <a href="http://mpi4py.scipy.org">mpi4py</a> module using
<code>from mpi4py import MPI</code>.
</p>
<pre class="verbatim">  #!/usr/bin/python
  import sys
  sys.path.append('&lt;sherpa-prefix&gt;/lib/&lt;your-python-version&gt;/site-packages/&gt;')
  import Sherpa

  # set up the generator
  Generator=Sherpa.Sherpa()

  try:
      # initialize the generator, pass command line arguments to initialization routine
      Generator.InitializeTheRun(len(sys.argv),sys.argv)

  # catch exceptions
  except Sherpa.Exception as exc:
      print exc
</pre><hr>
<a name="Examples"></a>
<a name="Examples-1"></a>
<h1 class="chapter">9 Examples</h1>

<p>Some example set-ups are included in Sherpa, in the 
<code>&lt;prefix&gt;/share/SHERPA-MC/Examples/</code> directory. These may be useful to 
new users to practice with, or as templates for creating your 
own Sherpa run-cards. In this section, we will look at some 
of the main features of these examples.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#VJets">9.1 Vector boson + jets production</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Jets">9.2 Jet production</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#HJets">9.3 Higgs boson + jets production</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#TopsJets">9.4 Top quark (pair) + jets production</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SingleTopChannels">9.5 Single-top production in the s, t and tW channel</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#VVJets">9.6 Vector boson pairs + jets production</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#MSSM_002fUFO">9.7 Event generation in the MSSM using UFO</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#DIS">9.8 Deep-inelastic scattering</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#FONLO">9.9 Fixed-order next-to-leading order calculations</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SoftQCD">9.10 Soft QCD: Minimum Bias and Cross Sections</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#BFactories">9.11 Setups for event production at B-factories</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#MEvalues">9.12 Calculating matrix element values for externally given configurations</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#APIexamples">9.13 Using the Python interface</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>


<hr>
<a name="VJets"></a>
<a name="Vector-boson-_002b-jets-production"></a>
<h2 class="section">9.1 Vector boson + jets production</h2>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#LHC_005fWJets">9.1.1 W+jets production</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#LHC_005fZJets">9.1.2 Z+jets production</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#LHC_005fWbb">9.1.3 W+bb production</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#LHC_005fZbb">9.1.4 Zbb production</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<a name="LHC_005fWJets"></a>
<a name="W_002bjets-production"></a>
<h3 class="subsection">9.1.1 W+jets production</h3>

<p>To change any of the following LHC examples to production at different
collider energies or beam types, e.g. proton anti-proton at the Tevatron,
simply change the beam settings to.
</p>

<p>This is an example setup for inclusive W production at hadron colliders. 
The inclusive process is calculated at next-to-leading order accuracy matched 
to the parton shower using the MC@NLO prescription detailed in 
[<a href="#Hoeche2011fd">Hoe11</a>]. The next few higher jet multiplicities, calculated at 
next-to-leading order as well, are merged into the inclusive sample using 
the MEPS@NLO method - an extension of the CKKW method to NLO - as described 
in [<a href="#Hoeche2012yf">Hoe12a</a>] and [<a href="#Gehrmann2012yg">Geh12</a>]. Finally, even higher 
multiplicities, calculated at leading order, are merged on top of that.
A few things to note are detailed below the example. The example can be 
converted into a simple MENLOPS setup by setting <code>LJET:=2</code>, or an MEPS 
setup by setting <code>LJET:=0</code>, to study the effect of incorporating 
higher-order matrix elements. The number of additional LO jets can be varied
through <code>NJET</code>. Similarly, the merging cut can be changed through
<code>QCUT</code>.
</p>
<div class="example">
<div class="smallformat">
<pre class="example"><pre class="verbatim">(run){
  % general setting
  EVENTS 1M; ERROR 0.99;

  % scales, tags for scale variations
  FSF:=1.; RSF:=1.; QSF:=1.;
  SCALES METS{FSF*MU_F2}{RSF*MU_R2}{QSF*MU_Q2};

  ## % optional: extra tags for custom jet criterion
  ## SHERPA_LDADD MyJetCriterion;
  ## JET_CRITERION FASTJET[A:antikt,R:0.4,y:5];

  % tags for process setup
  NJET:=4; LJET:=2,3,4; QCUT:=20.;

  % me generator settings
  ME_SIGNAL_GENERATOR Comix Amegic LOOPGEN;
  EVENT_GENERATION_MODE Weighted;
  LOOPGEN:=BlackHat;

  % exclude tau from lepton container
  MASSIVE[15] 1;

  % collider setup
  BEAM_1 2212; BEAM_ENERGY_1 = 4000.;
  BEAM_2 2212; BEAM_ENERGY_2 = 4000.;
}(run)

(processes){
  Process 93 93 -&gt; 90 91 93{NJET};
  Order (*,2); CKKW sqr(QCUT/E_CMS);
  NLO_QCD_Mode MC@NLO {LJET};
  ME_Generator Amegic {LJET};
  RS_ME_Generator Comix {LJET};
  Loop_Generator LOOPGEN {LJET};
  Integration_Error 0.02 {4};
  Integration_Error 0.02 {5};
  Integration_Error 0.05 {6};
  Integration_Error 0.08 {7};
  Integration_Error 0.10 {8};
  Scales LOOSE_METS{FSF*MU_F2}{RSF*MU_R2}{QSF*MU_Q2} {7,8};
  End process;
}(processes)

(selector){
  Mass 11 -12 1. E_CMS
  Mass 13 -14 1. E_CMS
  Mass -11 12 1. E_CMS
  Mass -13 14 1. E_CMS
}(selector)
</pre></pre></div>
</div>

<p>Things to notice:
</p><ul>
<li> Any setting with the exception of the process and selector definitions 
can be given in the <code>(run){...}(run)</code> section of the run card.
</li><li> Tags (<code>FSF</code>, <code>RSF</code> and <code>QSF</code>) have been introduced for 
easy scale variations. Tags are replaced throughout the entire run card by 
their defined value, see <a href="#Tags">Tags</a>.
</li><li> All scales, i.e. the squared factorisation, renormalisation and resummation 
scales are set to the above defined scale factors times the value determined 
by the METS-clustering algorithm. For the usual scale variation by a factor of
two one would thus use e.g. <code>FSF:=4.0</code>.
</li><li> Tags (<code>LJET</code>, <code>NJET</code> and <code>QCUT</code>) have been introduced 
to be used in the process setup, defining the multiplicity of the MC@NLO 
subprocesses, the maximal number of extra jets, and the merging cut.
</li><li> The <code>LOOPGEN</code> tag is used to name the provider of the one-loop
matrix elements for the respective multiplicities. For the simplemost case 
here Sherpa can provide it internally.
</li><li> tau leptons are set massive in order to exclude them from the massless 
lepton container (<code>90</code>).
</li><li> As both Comix and Amegic are specified as matrix element generators 
to be used, Amegic has to be specified to be used for all MC@NLO 
multiplicities using <code>ME_Generator Amegic {LJET}</code>. Additionally, we
specify <code>RS_ME_Generator Comix {LJET}</code> such that the subtracted
real-emission bit of the NLO matrix elements is calculated more efficiently
with Comix instead of Amegic.
</li><li> The <code>LOOSE_METS</code> scale setter, a simplified version of the
<code>METS</code> scale setter, is used for the highest multiplicities (if
<code>NJET</code> is set to <code>5</code> or <code>6</code>) to speed up the calculation.
</li></ul>

<p>The jet criterion used to define the matrix element multiplicity in the
context of multijet merging can be supplied by the user. As an example
the source code file <code>./Examples/V_plus_Jets/LHC_WJets/My_JetCriterion.C</code>
provides such an alternative jet criterion. It can be compiled using
<code>SCons</code> via executing <code>scons</code> in that directory (edit the
<code>SConstruct</code> file accordingly). The newly created library is linked
at run time using the <code>SHERPA_LDADD</code> flag.
The new jet criterion is then evoked by <code>JET_CRITERION</code>.
</p>
<hr>
<a name="LHC_005fZJets"></a>
<a name="Z_002bjets-production"></a>
<h3 class="subsection">9.1.2 Z+jets production</h3>

<p>To change any of the following LHC examples to production at different
collider energies or beam types, e.g. proton anti-proton at the Tevatron,
simply change the beam settings to.
</p>

<p>This is an example setup for inclusive Z production at hadron colliders.
The inclusive process is calculated at next-to-leading order accuracy matched
to the parton shower using the MC@NLO prescription detailed in
[<a href="#Hoeche2011fd">Hoe11</a>]. The next few higher jet multiplicities, calculated at
next-to-leading order as well, are merged into the inclusive sample using
the MEPS@NLO method - an extension of the CKKW method to NLO - as described
in [<a href="#Hoeche2012yf">Hoe12a</a>] and [<a href="#Gehrmann2012yg">Geh12</a>]. Finally, even higher
multiplicities, calculated at leading order, are merged on top of that.
A few things to note are detailed below the example. The example can be
converted into a simple MENLOPS setup by setting <code>LJET:=2</code>, or an MEPS
setup by setting <code>LJET:=0</code>, to study the effect of incorporating
full NLO matrix elements. The number of additional LO jets can be varied
through <code>NJET</code>. Similarly, the merging cut can be changed through
<code>QCUT</code>.
</p>
<div class="example">
<div class="smallformat">
<pre class="example"><pre class="verbatim">(run){
  % general setting
  EVENTS 1M; ERROR 0.99;

  % scales, tags for scale variations
  FSF:=1.; RSF:=1.; QSF:=1.;
  SCALES METS{FSF*MU_F2}{RSF*MU_R2}{QSF*MU_Q2};

  % tags for process setup
  NJET:=4; LJET:=2,3,4; QCUT:=20.;

  % me generator settings
  ME_SIGNAL_GENERATOR Comix Amegic LOOPGEN;
  EVENT_GENERATION_MODE Weighted;
  LOOPGEN:=BlackHat;

  % exclude tau from lepton container
  MASSIVE[15] 1;

  % collider setup
  BEAM_1 2212; BEAM_ENERGY_1 = 4000.;
  BEAM_2 2212; BEAM_ENERGY_2 = 4000.;
}(run)

(processes){
  Process 93 93 -&gt; 90 90 93{NJET};
  Order (*,2); CKKW sqr(QCUT/E_CMS);
  NLO_QCD_Mode MC@NLO {LJET};
  ME_Generator Amegic {LJET};
  RS_ME_Generator Comix {LJET};
  Loop_Generator LOOPGEN {LJET};
  Integration_Error 0.02 {4};
  Integration_Error 0.02 {5};
  Integration_Error 0.05 {6};
  Integration_Error 0.08 {7};
  Integration_Error 0.10 {8};
  Scales LOOSE_METS{FSF*MU_F2}{RSF*MU_R2}{QSF*MU_Q2} {7,8};
  End process;
}(processes)

(selector){
  Mass 11 -11 66 E_CMS
  Mass 13 -13 66 E_CMS
}(selector)
</pre></pre></div>
</div>

<p>Things to notice:
</p><ul>
<li> Any setting with the exception of the process and selector definitions
can be given in the <code>(run){...}(run)</code> section of the run card.
</li><li> Tags (<code>FSF</code>, <code>RSF</code> and <code>QSF</code>) have been introduced for
easy scale variations. Tags are replaced throughout the entire run card by
their defined value, see <a href="#Tags">Tags</a>.
</li><li> All scales, i.e. the factorisation, renormalisation and resummation
scales are set to the above defined scale factors times the value determined
by the METS-clustering algorithm.
</li><li> Tags (<code>LJET</code>, <code>NJET</code> and <code>QCUT</code>) have been introduced
to be used in the process setup, defining the multiplicity of the MC@NLO
subprocesses, the maximal number of extra jets, and the merging cut.
</li><li> The <code>LOOPGEN</code> tag is used to name the provider of the one-loop
matrix elements for the respective multiplicities. For complicated processes
this needs external one-loop programs like BlackHat, GoSam or OpenLoops.
</li><li> tau leptons are set massive in order to exclude them from the massless
lepton container (<code>90</code>).
</li><li> As both Comix and Amegic are specified as matrix element generators
to be used, Amegic has to be specified to be used for all MC@NLO
multiplicities using <code>ME_Generator Amegic {LJET}</code>. Additionally, we
specify <code>RS_ME_Generator Comix {LJET}</code> such that the subtracted
real-emission bit of the NLO matrix elements is calculated more efficiently
with Comix instead of Amegic.
</li><li> The <code>LOOSE_METS</code> scale setter, a simplified version of the
<code>METS</code> scale setter, is used for the highest multiplicities (if
<code>NJET</code> is set to <code>5</code> or <code>6</code>) to speed up the calculation.
</li></ul>

<hr>
<a name="LHC_005fWbb"></a>
<a name="W_002bbb-production"></a>
<h3 class="subsection">9.1.3 W+bb production</h3>

<div class="example">
<div class="smallformat">
<pre class="example"><pre class="verbatim">(run){
  # generator parameters
  EVENTS 0; LGEN:=Wbb;
  ME_SIGNAL_GENERATOR Comix Amegic LGEN;
  HARD_DECAYS 1; HARD_MASS_SMEARING 0;
  MASSIVE[5] 1; WIDTH[24] 0; STABLE[24] 0;
  HDH_STATUS[24,12,-11]=2;
  MI_HANDLER None;
  # physics parameters
  BEAM_1 2212; BEAM_ENERGY_1 7000;
  BEAM_2 2212; BEAM_ENERGY_2 7000;
  SCALES VAR{H_T2+sqr(80.419)};
  PDF_LIBRARY MSTW08Sherpa; PDF_SET mstw2008nlo_nf4;
  MASS[5] 4.75;# consistent with MSTW 2008 nf 4 set
}(run);

(processes){
  Process 93 93 -&gt; 24 5 -5;
  NLO_QCD_Mode MC@NLO;
  ME_Generator Amegic;
  RS_ME_Generator Comix;
  Loop_Generator LGEN;
  Order (*,1);
  End process;
  Process 93 93 -&gt; -24 5 -5;
  NLO_QCD_Mode MC@NLO;
  ME_Generator Amegic;
  RS_ME_Generator Comix;
  Loop_Generator LGEN;
  Order (*,1);
  End process;
}(processes);

(selector){
  FastjetFinder antikt 2 5 0 0.5 0.75 5 100 2;
}(selector);
</pre></pre></div>
</div>

<p>Things to notice:
</p><ul>
<li> The matrix elements are interfaced from [<a href="#FebresCordero2006sj">Feb06</a>].
  The shared library necessary for running this setup is built using
  <a href="http://www.scons.org/">scons</a>.
</li><li> The W-boson is stable in the hard matrix elements.
  It is decayed using the internal decay module, indicated by
  the settings &lsquo;<samp>HARD_DECAYS 1</samp>&rsquo; and &lsquo;<samp>STABLE[24] 0</samp>&rsquo;.
</li><li> <a href="http://www.fastjet.fr/">FastJet</a> is used to regularize the hard cross section. 
  Note that Sherpa must be configured with option &lsquo;<samp>--enable-fastjet</samp>&rsquo;, see
  <a href="#Fastjet-selector">Fastjet selector</a>. We require two b-jets, indicated by the &lsquo;<samp>2</samp>&rsquo; 
  at the end of the &lsquo;<samp>FastjetFinder</samp>&rsquo; options.
</li><li> Four-flavour PDF&rsquo;s are used to comply with the calculational setup.
</li></ul>
 

<hr>
<a name="LHC_005fZbb"></a>
<a name="Zbb-production"></a>
<h3 class="subsection">9.1.4 Zbb production</h3>

<div class="example">
<div class="smallformat">
<pre class="example"><pre class="verbatim">(run){
  # generator parameters
  EVENTS 0; LGEN:=LHOLE;
  ME_SIGNAL_GENERATOR Comix Amegic LGEN;
  HARD_DECAYS 1; HARD_MASS_SMEARING 0;
  MASSIVE[5] 1; WIDTH[23] 0; STABLE[23] 0;
  HDH_STATUS[23,11,-11]=2
  HDH_STATUS[23,13,-13]=2
  MI_HANDLER None; FRAGMENTATION Off;
  # physics parameters
  BEAM_1 2212; BEAM_ENERGY_1 7000;
  BEAM_2 2212; BEAM_ENERGY_2 7000;
  SCALES VAR{H_T2+sqr(91.188)};
  PDF_LIBRARY MSTW08Sherpa; PDF_SET mstw2008nlo_nf4;
  MASS[5] 4.75;# consistent with MSTW 2008 nf 4 set
}(run);

(processes){
  Process 93 93 -&gt; 23 5 -5;
  NLO_QCD_Mode MC@NLO;
  ME_Generator Amegic;
  RS_ME_Generator Comix;
  Loop_Generator LGEN;
  Order (*,1);
  End process;
}(processes);

(selector){
  FastjetFinder antikt 2 5 0 0.5 0.75 5 100 2;
}(selector);
</pre></pre></div>
</div>

<p>Things to notice:
</p><ul>
<li> The matrix elements are interfaced via the
  Binoth Les Houches interface proposal [<a href="#Binoth2010xt">Bin10a</a>],
  [<a href="#Alioli2013nda">Ali13</a>], <a href="#External-one_002dloop-ME">External one-loop ME</a>.
</li><li> The Z-boson is stable in the hard matrix elements.
  It is decayed using the internal decay module, indicated by
  the settings &lsquo;<samp>HARD_DECAYS 1</samp>&rsquo; and &lsquo;<samp>STABLE[24] 0</samp>&rsquo;.
</li><li> <a href="http://www.fastjet.fr/">FastJet</a> is used to regularize the hard cross section.
  Note that Sherpa must be configured with option &lsquo;<samp>--enable-fastjet</samp>&rsquo;, see
  <a href="#Fastjet-selector">Fastjet selector</a>. We require two b-jets, indicated by the &lsquo;<samp>2</samp>&rsquo;
  at the end of the &lsquo;<samp>FastjetFinder</samp>&rsquo; options.
</li><li> Four-flavour PDF&rsquo;s are used to comply with the calculational setup.
</li></ul>


<hr>
<a name="Jets"></a>
<a name="Jet-production-1"></a>
<h2 class="section">9.2 Jet production</h2>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#LHC_005fJets">9.2.1 Jet production</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#LEP_005fJets">9.2.2 Jets at lepton colliders</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<a name="LHC_005fJets"></a>
<a name="Jet-production"></a>
<h3 class="subsection">9.2.1 Jet production</h3>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#LHC_005fJets_005fMCatNLO">9.2.1.1 MC@NLO setup for dijet and inclusive jet production</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#LHC_005fJets_005fMEPS">9.2.1.2 MEPS setup for jet production</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<p>To change any of the following LHC examples to production at the Tevatron 
simply change the beam settings to
</p><pre class="verbatim">  BEAM_1  2212; BEAM_ENERGY_1 980;
  BEAM_2 -2212; BEAM_ENERGY_2 980;
</pre>
<hr>
<a name="LHC_005fJets_005fMCatNLO"></a>
<a name="MC_0040NLO-setup-for-dijet-and-inclusive-jet-production"></a>
<h4 class="subsubsection">9.2.1.1 MC@NLO setup for dijet and inclusive jet production</h4>

<p>This is an example setup for dijet and inclusive jet production at hadron 
colliders at next-to-leading order precission matched to the parton shower 
using the MC@NLO prescription detailed in [<a href="#Hoeche2011fd">Hoe11</a>] and 
[<a href="#Hoeche2012fm">Hoe12b</a>]. A few things to note are detailed below the example. 
</p>

<div class="example">
<div class="smallformat">
<pre class="example"><pre class="verbatim">(run){
  % general settings
  EVENTS 1M;

  % tags and settings for scale definitions
  FSF:=1.; RSF:=1.; QSF:=1.;
  SCALES FASTJET[A:antikt,PT:J1CUT,ET:0,R:0.4,M:0]{FSF*0.0625*H_T2}{RSF*0.0625*H_T2}{QSF*0.25*PPerp2(p[3])}

  % tags and settings for ME-level cuts
  J1CUT:=20.; J2CUT:=10.;

  % tags and settings for ME generators
  LOOPGEN:=&lt;my-loop-gen&gt;;
  ME_SIGNAL_GENERATOR Amegic LOOPGEN;
  EVENT_GENERATION_MODE Weighted;
  RESULT_DIRECTORY res_jJ1CUT_jJ2CUT_ffFSF_rfRSF_qfQSF;

  % model parameters
  MODEL SM;

  % collider setup
  BEAM_1  2212; BEAM_ENERGY_1 3500.0;
  BEAM_2  2212; BEAM_ENERGY_2 3500.0;
}(run)

(processes){
  Process 93 93 -&gt; 93 93;
  NLO_QCD_Mode MC@NLO;
  Loop_Generator LOOPGEN;
  Order (*,0);
  End process;
}(processes)

(selector){
  FastjetFinder  antikt 2  J2CUT  0.0  0.4
  FastjetFinder  antikt 1  J1CUT  0.0  0.4
}(selector)

</pre></pre></div>
</div>

<p>Things to notice:
</p><ul>
<li> Any setting with the exception of the process and selector definitions 
can be given in the <code>(run){...}(run)</code> section of the run card.
</li><li> Tags (<code>FSF</code>, <code>RSF</code> and <code>QSF</code>) have been introduced for 
easy scale variations. Tags are replaced troughout the entire run card by 
their defined value, see <a href="#Tags">Tags</a>.
</li><li> Asymetric cuts are implemented (relevant to the RS-piece of an MC@NLO 
calculation) by requiring at least two jets with pT &gt; <code>J2CUT</code>, one of 
which has to have pT &gt; <code>J1CUT</code>.
</li><li> Both the factorisation and renormalisation scales are set to the above 
defined scale factors times the a quarter of the scalar sum of the transvers 
momenta of all anti-kt jets (R=0.4,pT&gt;<code>J1CUT</code>) found on the ME-level 
before any parton shower emission. See <a href="#SCALES">SCALES</a> for details on scale 
setters.
</li><li> The resummation scale, which sets the maximum scale of the additional 
emission to be resummed by the parton shower, is set to the above defined 
resummation scale factor times half of the transverse momentum of the softer 
of the two jets present at Born level.
</li><li> The generator to provide the one-loop matrix element can be set through 
<code>LOOPGEN</code> tag. For possible choices see TODO.
</li><li> The <code>NLO_QCD_Mode</code> is set to <code>MC@NLO</code>.
</li></ul>


<hr>
<a name="LHC_005fJets_005fMEPS"></a>
<a name="MEPS-setup-for-jet-production"></a>
<h4 class="subsubsection">9.2.1.2 MEPS setup for jet production</h4>

<div class="example">
<div class="smallformat">
<pre class="example"><pre class="verbatim">(run){
  EVENTS 10000; ANALYSIS Rivet;

  BEAM_1 2212; BEAM_ENERGY_1 3500;
  BEAM_2 2212; BEAM_ENERGY_2 3500;

  #ANALYSIS Rivet
}(run)

(processes){
  Process 93 93 -&gt; 93 93 93{0}
  Order (*,0);
  CKKW sqr(20/E_CMS)
  Integration_Error 0.02;
  End process;
}(processes)

(selector){
  NJetFinder  2  20.0  0.0  0.4  -1
}(selector)

(analysis){
BEGIN_RIVET {
  -a CMS_2012_I1087342  
} END_RIVET
}(analysis)
</pre></pre></div>
</div>

<p>Things to notice:
</p><ul>
<li>
<code>Order</code> is set to &lsquo;<samp>(*,0)</samp>&rsquo;. This
ensures that all final state jets are produced via 
the strong interaction.

</li><li>
an <code>NJetFinder</code> selector is used to 
set a resolution criterion for the two jets of the core process.
This is necessary because the &lsquo;CKKW&rsquo; tag does not apply any cuts to the core
process, but only to the extra-jet matrix elements, see 
<a href="#Multijet-merged-event-generation-with-Sherpa">Multijet merged event generation with Sherpa</a>.
This cut is applied only to the 2-&gt;2 process using the <code>{2}</code>
specification, since the higher-order matrix elements should only be cut by
the ME+PS separation criterion.
</li></ul>
<hr>
<a name="LEP_005fJets"></a>
<a name="Jets-at-lepton-colliders"></a>
<h3 class="subsection">9.2.2 Jets at lepton colliders</h3>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#LEP_005fJets_005fLOmerging">9.2.2.1 MEPS setup for ee-&gt;jets</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#LEP_005fJets_005fNLOmerging">9.2.2.2 MEPS@NLO setup for ee-&gt;jets</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<p>This section contains two setups to describe jet production at LEP I, 
either through multijet merging at leading order accuracy or at 
next-to-leading order accuracy.
</p>
<hr>
<a name="LEP_005fJets_005fLOmerging"></a>
<a name="MEPS-setup-for-ee_002d_003ejets"></a>
<h4 class="subsubsection">9.2.2.1 MEPS setup for ee-&gt;jets</h4>

<div class="example">
<div class="smallformat">
<pre class="example"><pre class="verbatim">(run){
##  ANALYSIS Rivet
  % general settings
  EVENTS 5M; NJET:=3;
  % model parameters
  ALPHAS(MZ) 0.1188;
  ORDER_ALPHAS 1;
  % collider setup
  BEAM_1  11; BEAM_ENERGY_1 45.6;
  BEAM_2 -11; BEAM_ENERGY_2 45.6;
}(run)

(processes){
  Process 11 -11 -&gt; 93 93 93{NJET};
  CKKW pow(10,-2.25);
  Order (*,2);
  End process;
}(processes)

#(analysis){
#  BEGIN_RIVET {
#   -a MC_XS ALEPH_1991_S2435284 ALEPH_1996_S3486095 ALEPH_1999_S4193598 ALEPH_2002_S4823664 ALEPH_2004_S5765862 DELPHI_1995_S3137023 DELPHI_1996_S3430090 DELPHI_1999_S3960137 DELPHI_2000_S4328825 DELPHI_2002_069_CONF_603 DELPHI_2003_WUD_03_11 JADE_OPAL_2000_S4300807 OPAL_1994_S2927284 OPAL_1996_S3257789 OPAL_1998_S3780481 OPAL_2002_S5361494 OPAL_2001_S4553896 OPAL_2004_S6132243 SLD_1996_S3398250 SLD_1999_S3743934 SLD_2002_S4869273 SLD_2004_S5693039
# } END_RIVET;
#}(analysis)
</pre></pre></div>
</div>

<p>This example shows a LEP set up, with electrons and positrons colliding 
at a centre of mass energy of 91.25GeV. Two processes have been specified, 
one final state with two or more light quarks and gluons being produced,
and one with a b b-bar pair and possibly extra light partons. Four 
b quark production is also included for consistencies sake.
</p>
<p>Things to notice:
</p><ul>
<li> the b-quark mass has been enabled for the matrix element calculation
(the default is massless) because it is not negligible for LEP energies
</li><li> the b b-bar process is specified separately because the 
&lsquo;<samp>93</samp>&rsquo; particle container contains only partons set massless in the matrix
element calculation, see <a href="#Particle-containers">Particle containers</a>. 
</li><li> some model parameters have been set. In this example, the running 
of alpha_s is set to leading order and the value of alpha_s at the Z-mass 
is set.
</li></ul>

<hr>
<a name="LEP_005fJets_005fNLOmerging"></a>
<a name="MEPS_0040NLO-setup-for-ee_002d_003ejets"></a>
<h4 class="subsubsection">9.2.2.2 MEPS@NLO setup for ee-&gt;jets</h4>

<div class="example">
<div class="smallformat">
<pre class="example"><pre class="verbatim">(run){
  % general settings
  EVENTS 5M; ERROR 0.1;

  % tags and settings for scale definitions
  SCF:=1.0; FSF:=SCF; RSF:=SCF; QSF:=1.0;
  SCALES METS{FSF*MU_F2}{RSF*MU_R2}{QSF*MU_Q2};

  % tags for process setup
  LJET:=2,3,4; NJET:=3; YCUT:=2.0;
  LMJET:=2; NMJET:=3; YMCUT:=2.0;
  NMMJET:=1; YMMCUT:=2.0;

  % tags and settings for ME generators
  LOOPGEN0:=Internal;
  LOOPGEN1:=&lt;my-loop-gen-for-3j&gt;;
  LOOPGEN2:=&lt;my-loop-gen-for-4j&gt;;
  LOOPMGEN:=&lt;my=loop-gen-for-massive-2j&gt;;
  ME_SIGNAL_GENERATOR Comix Amegic LOOPGEN0 LOOPGEN1 LOOPGEN2 LOOPMGEN;
  EVENT_GENERATION_MODE Weighted;
  AMEGIC_INTEGRATOR 4;

  % model parameters
  MODEL SM;
  ALPHAS(MZ) 0.118;
  MASSIVE[5] 1;

  % collider setup
  BEAM_1  11; BEAM_ENERGY_1 45.6;
  BEAM_2 -11; BEAM_ENERGY_2 45.6;
}(run);

(processes){
  Process 11 -11 -&gt; 93 93 93{NJET};
  Order (*,2); CKKW pow(10,-YCUT);
  NLO_QCD_Mode MC@NLO {LJET};
  Loop_Generator LOOPGEN0 {2};
  Loop_Generator LOOPGEN1 {3};
  Loop_Generator LOOPGEN2 {4};
  ME_Generator Amegic {LJET};
  RS_ME_Generator Comix {LJET};
  RS_Enhance_Factor 10;
  End process;
  %
  Process 11 -11 -&gt; 5 -5 93{NMJET};
  Order (*,2); CKKW pow(10,-YMCUT);
  NLO_QCD_Mode MC@NLO {LMJET};
  Loop_Generator LOOPMGEN {2};
  ME_Generator Amegic {LMJET};
  RS_ME_Generator Comix {LMJET};
  RS_Enhance_Factor 10;
  End process;
  %
  Process 11 -11 -&gt; 5 5 -5 -5 93{NMMJET};
  Order (*,2); CKKW pow(10,-YMMCUT);
  Cut_Core 1;
  End process;
}(processes);
</pre></pre></div>
</div>

<p>This example expands upon the above setup, elevating its description 
of hard jet production to next-to-leading order.
</p>
<p>Things to notice:
</p><ul>
<li> the b-quark mass has been enabled for the matrix element calculation
(the default is massless) because it is not negligible for LEP energies
</li><li> the b b-bar process is specified separately because the 
&lsquo;<samp>93</samp>&rsquo; particle container contains only partons set massless in the matrix
element calculation, see <a href="#Particle-containers">Particle containers</a>. 
</li><li> some model parameters have been set. In the 
<code>(model)</code> section of the run-card, parameters relating
to the model can be set. In this example, the value of alpha_s at the 
Z mass is set.
</li></ul>


<hr>
<a name="HJets"></a>
<a name="Higgs-boson-_002b-jets-production"></a>
<h2 class="section">9.3 Higgs boson + jets production</h2>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#LHC_005fHInt">9.3.1 H production in gluon fusion with interference effects</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#LHC_005fHJets">9.3.2 H+jets production in gluon fusion</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#LHC_005fHJets_005fFiniteMt">9.3.3 H+jets production in gluon fusion with finite top mass effects</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#LHC_005fVHJets">9.3.4 H+jets production in associated production</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#LHC_005fHTTBar">9.3.5 Associated t anti-t H production at the LHC</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<a name="LHC_005fHInt"></a>
<a name="H-production-in-gluon-fusion-with-interference-effects"></a>
<h3 class="subsection">9.3.1 H production in gluon fusion with interference effects</h3>
<a name="index-HIGGS_005fINTERFERENCE_005fMODE"></a>
<a name="index-HIGGS_005fINTERFERENCE_005fONLY"></a>
<a name="index-HIGGS_005fINTERFERENCE_005fSPIN"></a>

<p>This is a setup for inclusive Higgs production through 
gluon fusion at hadron colliders. The inclusive process is calculated 
at next-to-leading order accuracy, including all interference effects
between Higgs-boson production and the SM gg-&gt;yy background.
The corresponding matrix elements are taken from [<a href="#Bern2002jx">Ber02</a>] 
and [<a href="#Dixon2013haa">Dix13</a>]. 
</p>
<div class="example">
<div class="smallformat">
<pre class="example"><pre class="verbatim">(run){
  # generator parameters
  EVENTS 1M; LGEN:=Higgs;
  EVENT_GENERATION_MODE W;
  AMEGIC_ALLOW_MAPPING 0;
  ME_SIGNAL_GENERATOR Amegic LGEN;
  SCALES VAR{Abs2(p[2]+p[3])};

  # physics parameters
  YUKAWA[4] 1.42; YUKAWA[5] 4.8;
  YUKAWA[15] 1.777;
  EW_SCHEME 3;

  # collider parameters
  BEAM_1 2212; BEAM_ENERGY_1 6500;
  BEAM_2 2212; BEAM_ENERGY_2 6500;
}(run);

(processes){
  Process 93 93 -&gt; 22 22;
  NLO_QCD_Mode Fixed_Order;
  NLO_QCD_Part BVIRS;
  Order (*,2); Enable_MHV 12;
  Loop_Generator LGEN;
  Integrator PS2;
  RS_Integrator PS3;
  End process;
}(processes);

(selector){
  HiggsFinder 40 30 2.5 100 150;
  IsolationCut 22 0.4 2 0.025;
}(selector);
</pre></pre></div>
</div>

<p>Things to notice:
</p><ul>
<li> This calculation is at fixed-order NLO.
</li><li> All scales, i.e. the factorisation, renormalisation and resummation
scales are set to the invariant mass of the di-photon pair.
</li><li> Dedicated phase space generators are used by setting 
&lsquo;<samp>Integrator PS2;</samp>&rsquo; and &lsquo;<samp>RS_Integrator PS3;</samp>&rsquo;, cf. <a href="#Integrator">Integrator</a>.
</li></ul>

<p>To compute the interference contribution only, as was done in [<a href="#Dixon2013haa">Dix13</a>],
one can set &lsquo;<samp>HIGGS_INTERFERENCE_ONLY 1;</samp>&rsquo; in the <code>(run){...}(run)</code> section.
By default, all partonic processes are included in this simulation, however, 
it is sensible to disable quark initial states at the leading order. This is achieved 
by setting &lsquo;<samp>HIGGS_INTERFERENCE_MODE 3;</samp>&rsquo; in the <code>(run){...}(run)</code> section.
</p> 
<p>One can also simulate the production of a spin-2 massive graviton in Sherpa using
the same input card by setting &lsquo;<samp>HIGGS_INTERFERENCE_SPIN 2;</samp>&rsquo; in the 
<code>(run){...}(run)</code> section. Only the massive graviton case is implemented, 
specifically the scenario where k_q=k_g. NLO corrections are approximated, 
as the gg-&gt;X-&gt;yy and qq-&gt;X-&gt;yy loop amplitudes have not been computed so far.
</p><hr>
<a name="LHC_005fHJets"></a>
<a name="H_002bjets-production-in-gluon-fusion"></a>
<h3 class="subsection">9.3.2 H+jets production in gluon fusion</h3>

<p>This is an example setup for inclusive Higgs production through 
gluon fusion at hadron colliders used in [<a href="#Hoeche2014lxa">Hoe14a</a>].
The inclusive process is calculated
at next-to-leading order accuracy matched to the parton shower using 
the MC@NLO prescription detailed in [<a href="#Hoeche2011fd">Hoe11</a>]. The next 
few higher jet multiplicities, calculated at next-to-leading order as well, 
are merged into the inclusive sample using the MEPS@NLO method - an 
extension of the CKKW method to NLO - as described in [<a href="#Hoeche2012yf">Hoe12a</a>] 
and [<a href="#Gehrmann2012yg">Geh12</a>]. Finally, even higher multiplicities, calculated 
at leading order, are merged on top of that. A few things to note are 
detailed below the example. The example can be converted a simple MENLOPS 
setup by setting <code>LJET:=1</code>, or an MEPS setup by setting <code>LJET:=0</code>, 
to study the effect of incorporating higher-order matrix elements.
</p>
<div class="example">
<div class="smallformat">
<pre class="example"><pre class="verbatim">(run){
  % general settings
  EVENTS 5M; ERROR 0.1;

  % tags and settings for scale definitions
  FSF:=1.0; RSF:=1.0; QSF:=1.0;
  SCALES STRICT_METS{FSF*MU_F2}{RSF*MU_R2}{QSF*MU_Q2};

  % tags for process setup
  LJET:=1,2,3; NJET:=2; QCUT:=30.;

  % tags and settings for ME generators
  LOOPGEN0:=Internal;
  LOOPGEN1:=MCFM;
  ME_SIGNAL_GENERATOR Comix Amegic LOOPGEN0 LOOPGEN1;
  EVENT_GENERATION_MODE Weighted;
  COMIX_CLUSTER_CORE_CHECK 1;

  % settings for hard decays
  HARD_DECAYS On;
  HDH_STATUS[25,22,22] 2;
  HDH_BR_WEIGHTS 0;

  % model parameters
  MODEL HEFT;
  MASS[25] 125.; WIDTH[25] 0.;

  % collider setup
  BEAM_1 2212; BEAM_ENERGY_1 6500;
  BEAM_2 2212; BEAM_ENERGY_2 6500;  
}(run);

(processes){
  Process 93 93 -&gt; 25 93{NJET};
  Order (*,0,1); CKKW sqr(QCUT/E_CMS);
  NLO_QCD_Mode MC@NLO {LJET}; 
  Loop_Generator LOOPGEN0 {1,2};
  Loop_Generator LOOPGEN1 {3};
  ME_Generator Amegic {LJET};
  RS_ME_Generator Comix {LJET};
  End process;
}(processes);
</pre></pre></div>
</div>

<p>Things to notice:
</p><ul>
<li> Any setting with the exception of the process and selector definitions 
can be given in the <code>(run){...}(run)</code> section of the run card.
</li><li> Tags (<code>FSF</code>, <code>RSF</code> and <code>QSF</code>) have been introduced for 
easy scale variations. Tags are replaced throughout the entire run card by
their defined value, see <a href="#Tags">Tags</a>.
</li><li> Tags (<code>LJET</code>, <code>NJET</code> and <code>QCUT</code>) have been introduced 
to be used in the process setup, defining the multiplicity of the MC@NLO 
subprocesses, the maximal number of extra jets, and the merging cut.
</li><li> The <code>LOOPGEN&lt;i&gt;</code> tag is used to name the providers of the one-loop 
matrix elements for the respective multiplicities. For the two simplemost cases 
Sherpa can provide it internally. Additionally, MCFM is interfaced for the
H+2jet process, cf. <a href="#MCFM-interface">MCFM interface</a>.
</li><li> To enable the Higgs to decay to a pair of photons, for example, the 
hard decays are invoked.
For details on the hard decay handling and how to enable specific decay modes 
see <a href="#Hard-decays">Hard decays</a>. As in the Higgs case the branching ratios calculated
by Sherpa at the leading order receive large corrections a modified BR table
to be read in by Sherpa is provided.
</li></ul>
 
<hr>
<a name="LHC_005fHJets_005fFiniteMt"></a>
<a name="H_002bjets-production-in-gluon-fusion-with-finite-top-mass-effects"></a>
<h3 class="subsection">9.3.3 H+jets production in gluon fusion with finite top mass effects</h3>

<p>This is example is similar to <a href="#LHC_005fHJets">H+jets production in gluon fusion</a> but with finite top quark
mass taken into account as described in [<a href="#Buschmann2014sia">Bu03</a>] for
all merged jet multiplicities. Mass effects in the virtual corrections are
treated in an approximate way. In case of the tree-level contributions,
including real emission corrections, no approximations are made
concerning the mass effects.
</p>
<div class="example">
<div class="smallformat">
<pre class="example"><pre class="verbatim">(run){
  % general settings
  EVENTS 5M; ERROR 0.1;

  % tags and settings for scale definitions
  FSF:=1.0; RSF:=1.0; QSF:=1.0;
  SCALES STRICT_METS{FSF*MU_F2}{RSF*MU_R2}{QSF*MU_Q2};

  % tags for process setup
  LJET:=1,2; NJET:=1; QCUT:=30.;

  % tags and settings for ME generators
  ME_SIGNAL_GENERATOR Amegic Internal OpenLoops;
  EVENT_GENERATION_MODE Weighted;

  % settings for hard decays
  HARD_DECAYS On;
  HDH_STATUS[25,22,22] 2;
  HDH_BR_WEIGHTS 0;

  % model parameters
  MODEL HEFT
  MASS[25] 125.; WIDTH[25] 0.;

  % collider setup
  BEAM_1 2212; BEAM_ENERGY_1 6500;
  BEAM_2 2212; BEAM_ENERGY_2 6500;

  % finite top mass effects
  KFACTOR GGH;
  OL_IGNORE_MODEL 1;
  OL_PARAMETERS preset 2 allowed_libs pph2,pphj2,pphjj2 psp_tolerance 1.0e-7;
}(run);

(processes){
  Process 93 93 -&gt; 25 93{NJET};
  Order (*,0,1); CKKW sqr(QCUT/E_CMS);
  NLO_QCD_Mode MC@NLO {LJET};
  Loop_Generator Internal;
  End process;
}(processes);

</pre></pre></div>
</div>

<p>Things to notice:
</p><ul>
<li> One-loop matrix elements from OpenLoops [<a href="#Cascioli2011va">Cas11</a>]
are used in order to correct for top mass effects. Sherpa must therefore
be compiled with OpenLoops support to run this example. Also, the
OpenLoops process libraries listed in the run card must be installed.
</li><li> The maximum jet multiplicities that can be merged in this setup
are limited by the availability of loop matrix elements used to correct
for finite top mass effects. 
</li><li> The comments in <a href="#LHC_005fHJets">H+jets production in gluon fusion</a> apply here as well.
</li></ul>
 
<hr>
<a name="LHC_005fVHJets"></a>
<a name="H_002bjets-production-in-associated-production"></a>
<h3 class="subsection">9.3.4 H+jets production in associated production</h3>

<p>This section collects example setups for Higgs boson production in
association with vector bosons
</p><table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#LHC_005fWHJets">9.3.4.1 Higgs production in association with W bosons and jets</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#LHC_005fZHJets">9.3.4.2 Higgs production in association with Z bosons and jets</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#LHC_005fHll_005fMC_0040NLO">9.3.4.3 Higgs production in association with lepton pairs</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"></td></tr>
</table>


<hr>
<a name="LHC_005fWHJets"></a>
<a name="Higgs-production-in-association-with-W-bosons-and-jets"></a>
<h4 class="subsubsection">9.3.4.1 Higgs production in association with W bosons and jets</h4>

<p>This is an example setup for Higgs boson production in association with
a W boson and jets, as used in [<a href="#Hoeche2014rya">Hoe14b</a>]. It uses the
MEPS@NLO method to merge pp-&gt;WH and pp-&gt;WHj at next-to-leading order
accuracy and adds pp-&gt;WHjj at leading order. The Higgs boson is decayed
to W-pairs and all W decay channels resulting in electrons or muons are
accounted for, including those with intermediate taus.
</p>
<div class="example">
<div class="smallformat">
<pre class="example"><pre class="verbatim">(run){
  % general settings
  EVENTS 1M; ERROR 0.1;

  % scales, tags for scale variations
  FSF:=1; RSF:=1; QSF:=1;
  SCALES STRICT_METS{FSF*MU_F2}{RSF*MU_R2}{QSF*MU_Q2};

  % tags for process setup
  NJET:=2; LJET:=2,3; QCUT:=30;

  % me generator settings
  ME_SIGNAL_GENERATOR Comix Amegic LOOPGEN;
  EVENT_GENERATION_MODE Weighted;
  LOOPGEN:=OpenLoops;

  % define custom particle container for easy process declaration
  PARTICLE_CONTAINER 900 W 24 -24;
  PARTICLE_CONTAINER 901 lightflavs 1 -1 2 -2 3 -3 4 -4 21;
  NLO_CSS_DISALLOW_FLAVOUR 5;

  % particle properties (ME widths need to be zero if external)
  WIDTH[24] 0;
  MASS[25] 125.5; WIDTH[25] 0;
  STABLE[15] 0; MASSIVE[15] 1;

  % hard decays setup, specify allowed decay channels, ie.:
  % h-&gt;Wenu, h-&gt;Wmunu, h-&gt;Wtaunu, W-&gt;enu, W-&gt;munu, W-&gt;taunu, tau-&gt;enunu, tau-&gt;mununu + cc
  HARD_DECAYS On;
  HDH_STATUS[25,24,-12,11]=2;
  HDH_STATUS[25,24,-14,13]=2;
  HDH_STATUS[25,24,-16,15]=2;
  HDH_STATUS[25,-24,12,-11]=2;
  HDH_STATUS[25,-24,14,-13]=2;
  HDH_STATUS[25,-24,16,-15]=2;
  HDH_STATUS[24,12,-11]=2;
  HDH_STATUS[24,14,-13]=2;
  HDH_STATUS[24,16,-15]=2;
  HDH_STATUS[-24,-12,11]=2;
  HDH_STATUS[-24,-14,13]=2;
  HDH_STATUS[-24,-16,15]=2;
  HDH_STATUS[15,16,-12,11]=2;
  HDH_STATUS[15,16,-14,13]=2;
  HDH_STATUS[-15,-16,12,-11]=2;
  HDH_STATUS[-15,-16,14,-13]=2;
  DECAY_TAU_HARD 1;
  HDH_BR_WEIGHTS 0;

  % collider setup
  BEAM_1 2212; BEAM_ENERGY_1 6500;
  BEAM_2 2212; BEAM_ENERGY_2 6500;
}(run);

(processes){
  Process 901 901 -&gt; 900 25 901{NJET};
  Order (*,2); CKKW sqr(QCUT/E_CMS);
  NLO_QCD_Mode MC@NLO {LJET};
  ME_Generator Amegic {LJET};
  RS_ME_Generator Comix {LJET};
  Loop_Generator LOOPGEN {LJET};
  End process;
}(processes);

</pre></pre></div>
</div>

<p>Things to notice:
</p><ul>
<li> Any setting with the exception of the process and selector definitions
can be given in the <code>(run){...}(run)</code> section of the run card.
</li><li> Tags (<code>FSF</code>, <code>RSF</code> and <code>QSF</code>) have been introduced for
easy scale variations. Tags are replaced throughout the entire run card by
their defined value, see <a href="#Tags">Tags</a>.
</li><li> Tags (<code>LJET</code>, <code>NJET</code> and <code>QCUT</code>) have been introduced
to be used in the process setup, defining the multiplicity of the MC@NLO
subprocesses, the maximal number of extra jets, and the merging cut.
</li><li> Two custom particle container, cf. <a href="#Particle-containers">Particle containers</a>, have
been declared, facilitating the process declaration.
</li><li> As the bottom quark is treated masslessly by default, a five flavour
calculation is performed. The particle container ensures that no external
bottom quarks, however, are considered to resolve the overlap with single
top and top pair processes.
</li><li> The <code>LOOPGEN</code> tag is used to name the provider of the one-loop
matrix elements. Here, OpenLoops [<a href="#Cascioli2011va">Cas11</a>] is used.
</li><li> To enable the decays of the Higgs, W boson and tau lepton the hard
decay handler is invoked. For details on the hard decay handling and how
to enable specific decay modes see <a href="#Hard-decays">Hard decays</a>.
</li></ul>


<hr>
<a name="LHC_005fZHJets"></a>
<a name="Higgs-production-in-association-with-Z-bosons-and-jets"></a>
<h4 class="subsubsection">9.3.4.2 Higgs production in association with Z bosons and jets</h4>

<p>This is an example setup for Higgs boson production in association with
a Z boson and jets, as used in [<a href="#Hoeche2014rya">Hoe14b</a>]. It uses the
MEPS@NLO method to merge pp-&gt;ZH and pp-&gt;ZHj at next-to-leading order
accuracy and adds pp-&gt;ZHjj at leading order. The Higgs boson is decayed
to W-pairs. All W and Z bosons are allowed to decay into electrons, muons
or tau leptons. The taus are then allowed to decay into all possible
partonic channels, leptonic and hadronic, to allow for all possible
triplepton signatures, unavoidably producing two and four lepton events
as well.
</p>
<div class="example">
<div class="smallformat">
<pre class="example"><pre class="verbatim">(run){
  % general settings
  EVENTS 1M; ERROR 0.1;

  % scales, tags for scale variations
  FSF:=1; RSF:=1; QSF:=1;
  SCALES STRICT_METS{FSF*MU_F2}{RSF*MU_R2}{QSF*MU_Q2};

  % tags for process setup
  NJET:=2; LJET:=2,3; QCUT:=30;

  % me generator settings
  ME_SIGNAL_GENERATOR Comix Amegic LOOPGEN;
  EVENT_GENERATION_MODE Weighted;
  LOOPGEN:=OpenLoops;

  % define custom particle container for easy process declaration
  PARTICLE_CONTAINER 901 lightflavs 1 -1 2 -2 3 -3 4 -4 21;
  NLO_CSS_DISALLOW_FLAVOUR 5;

  % particle properties (ME widths need to be zero if external)
  WIDTH[23] 0;
  MASS[25] 125.5; WIDTH[25] 0;
  STABLE[15] 0; MASSIVE[15] 1;

  % hard decays setup, specify allowed decay channels
  % h-&gt;Wenu, h-&gt;Wmunu, h-&gt;Wtaunu, W-&gt;enu, W-&gt;munu, W-&gt;taunu,
  % Z-&gt;ee, Z-&gt;mumu, Z-&gt;tautau, tau-&gt;any + cc
  HARD_DECAYS On;
  HDH_STATUS[25,24,-12,11]=2;
  HDH_STATUS[25,24,-14,13]=2;
  HDH_STATUS[25,24,-16,15]=2;
  HDH_STATUS[25,-24,12,-11]=2;
  HDH_STATUS[25,-24,14,-13]=2;
  HDH_STATUS[25,-24,16,-15]=2;
  HDH_STATUS[24,12,-11]=2;
  HDH_STATUS[24,14,-13]=2;
  HDH_STATUS[24,16,-15]=2;
  HDH_STATUS[-24,-12,11]=2;
  HDH_STATUS[-24,-14,13]=2;
  HDH_STATUS[-24,-16,15]=2;
  HDH_STATUS[23,15,-15]=2;
  HDH_STATUS[15,16,-12,11]=2;
  HDH_STATUS[15,16,-14,13]=2;
  HDH_STATUS[-15,-16,12,-11]=2;
  HDH_STATUS[-15,-16,14,-13]=2;
  HDH_STATUS[15,16,-2,1]=2;
  HDH_STATUS[15,16,-4,3]=2;
  HDH_STATUS[15,16,-2,1]=2;
  HDH_STATUS[-15,-16,4,-3]=2;
  HDH_STATUS[-15,-16,2,-1]=2;
  DECAY_TAU_HARD 1;
  HDH_BR_WEIGHTS 0;

  % collider setup
  BEAM_1 2212; BEAM_ENERGY_1 6500;
  BEAM_2 2212; BEAM_ENERGY_2 6500;
}(run);

(processes){
  Process 901 901 -&gt; 23 25 901{NJET};
  Order (*,2); CKKW sqr(QCUT/E_CMS);
  NLO_QCD_Mode MC@NLO {LJET};
  ME_Generator Amegic {LJET};
  RS_ME_Generator Comix {LJET};
  Loop_Generator LOOPGEN {LJET};
  End process;
}(processes);

</pre></pre></div>
</div>

<p>Things to notice:
</p><ul>
<li> Any setting with the exception of the process and selector definitions
can be given in the <code>(run){...}(run)</code> section of the run card.
</li><li> Tags (<code>FSF</code>, <code>RSF</code> and <code>QSF</code>) have been introduced for
easy scale variations. Tags are replaced throughout the entire run card by
their defined value, see <a href="#Tags">Tags</a>.
</li><li> Tags (<code>LJET</code>, <code>NJET</code> and <code>QCUT</code>) have been introduced
to be used in the process setup, defining the multiplicity of the MC@NLO
subprocesses, the maximal number of extra jets, and the merging cut.
</li><li> A custom particle container, cf. <a href="#Particle-containers">Particle containers</a>, has
been declared, facilitating the process declaration.
</li><li> As the bottom quark is treated masslessly by default, a five flavour
calculation is performed. The particle container ensures that no external
bottom quarks, however, are considered to resolve the overlap with single
top and top pair processes.
</li><li> The <code>LOOPGEN</code> tag is used to name the provider of the one-loop
matrix elements. Here, OpenLoops [<a href="#Cascioli2011va">Cas11</a>] is used.
</li><li> To enable the decays of the Higgs, W and Z bosons and tau lepton the hard
decay handler is invoked. For details on the hard decay handling and how
to enable specific decay modes see <a href="#Hard-decays">Hard decays</a>.
</li></ul>


<hr>
<a name="LHC_005fHll_005fMC_0040NLO"></a>
<a name="Higgs-production-in-association-with-lepton-pairs"></a>
<h4 class="subsubsection">9.3.4.3 Higgs production in association with lepton pairs</h4>

<p>This is an example setup for Higgs boson production in association with
an electron-positron pair using the MC@NLO technique. The Higgs boson
is decayed to b-quark pairs. Contrary to the previous examples this setup
does not use on-shell intermediate vector bosons in its matrix element
calculation.
</p>
<div class="example">
<div class="smallformat">
<pre class="example"><pre class="verbatim">(run){
  % general settings
  EVENTS 1M; ERROR 0.1;

  % scales, tags for scale variations
  FSF:=1; RSF:=1; QSF:=1;
  SCLDEF:=Abs2(p[2]+p[3]+p[4]);
  SCALES VAR{FSF*SCLDEF}{RSF*SCLDEF}{QSF*SCLDEF};

  % me generator settings
  ME_SIGNAL_GENERATOR Comix Amegic LOOPGEN;
  EVENT_GENERATION_MODE Weighted;
  LOOPGEN:=OpenLoops;

  % particle properties (ME widths need to be zero if external)
  MASSIVE[5] 1; MASSIVE[15] 1;
  STABLE[25] 0; WIDTH[25] 0.;

  % hard decays setup, specify allowed decay channels
  % h-&gt;bb
  HARD_DECAYS On;
  HDH_STATUS[25,5,-5]=2;
  HDH_BR_WEIGHTS 0;

  % collider setup
  BEAM_1 2212; BEAM_ENERGY_1 6500;
  BEAM_2 2212; BEAM_ENERGY_2 6500;
}(run);

(processes){
  Process 93 93 -&gt; 11 -11 25;
  Order (*,3);
  NLO_QCD_Mode MC@NLO;
  Loop_Generator LOOPGEN;
  ME_Generator Amegic;
  RS_ME_Generator Comix;
  End process;
}(processes);

</pre></pre></div>
</div>

<p>Things to notice:
</p><ul>
<li> Any setting with the exception of the process and selector definitions
can be given in the <code>(run){...}(run)</code> section of the run card.
</li><li> Tags (<code>FSF</code>, <code>RSF</code> and <code>QSF</code>) have been introduced for
easy scale variations. Tags are replaced throughout the entire run card by
their defined value, see <a href="#Tags">Tags</a>. The central scale is set to the
invariant mass of the Higgs boson and the lepton pair.
</li><li> As the bottom quark is set to be treated massively, a four flavour
calculation is performed.
</li><li> The <code>LOOPGEN</code> tag is used to name the provider of the one-loop
matrix elements. Here, OpenLoops [<a href="#Cascioli2011va">Cas11</a>] is used.
</li><li> To enable the decays of the Higgs the hard
decay handler is invoked. For details on the hard decay handling and how
to enable specific decay modes see <a href="#Hard-decays">Hard decays</a>.
</li></ul>


<hr>
<a name="LHC_005fHTTBar"></a>
<a name="Associated-t-anti_002dt-H-production-at-the-LHC"></a>
<h3 class="subsection">9.3.5 Associated t anti-t H production at the LHC</h3>

<p>This set-up illustrates the interface to an external loop matrix element
generator as well as the possibility of specifying hard decays for 
particles emerging from the hard interaction. The process generated 
is the production of a Higgs boson in association with a top quark pair 
from two light partons in the initial state. Each top quark decays into 
an (anti-)bottom quark and a W boson. The W bosons in turn decay to either 
quarks or leptons.
</p>
<div class="example">
<div class="smallformat">
<pre class="example"><pre class="verbatim">(run){
  # generator parameters
  EVENTS 0; LGEN:=TTH;
  ME_SIGNAL_GENERATOR Amegic LGEN;
  HARD_DECAYS On; HARD_MASS_SMEARING 0;
  STABLE[6] 0; STABLE[24] 0;
  WIDTH[25] 0; WIDTH[6] 0; 

  # physics parameters
  SCALES VAR{sqr(175+125/2)};
  PDF_LIBRARY LHAPDFSherpa;
  PDF_SET MSTW2008nlo90cl;
  USE_PDF_ALPHAS 1;

  # collider parameters
  BEAM_1 2212; BEAM_ENERGY_1 7000;
  BEAM_2 2212; BEAM_ENERGY_2 7000;  
}(run);

(processes){
  Process 93 93 -&gt; 25 6 -6;
  NLO_QCD_Mode MC@NLO;
  Loop_Generator LGEN;
  Order (*,1);
  End process;
}(processes);
</pre></pre></div>
</div>

<p>Things to notice:
</p><ul>
<li> The matrix elements are interfaced from [<a href="#Reina2001sf">Rei01</a>],
  [<a href="#Reina2001bc">Rei01a</a>], [<a href="#Dawson2002tg">Daw02</a>], [<a href="#Dawson2003zu">Daw03</a>].
  The shared library necessary for running this setup is built using
  <a href="http://www.scons.org/">scons</a>.
</li><li> The top quarks are stable in the hard matrix elements.
  They are decayed using the internal decay module, indicated by
  the settings &lsquo;<samp>HARD_DECAYS 1</samp>&rsquo; and &lsquo;<samp>STABLE[6] 0; STABLE[24] 0</samp>&rsquo;.
</li><li> <a href="http://projects.hepforge.org/lhapdf">LHAPDF</a> is used 
  (see <a href="#ISR-Parameters">ISR parameters</a>) with the parametrization of the strong coupling 
  taken from LHAPDF itself as indicated by &lsquo;<samp>USE_PDF_ALPHAS 1</samp>&rsquo;
  (see <a href="#SM">Standard Model</a>).
</li></ul>
 


<hr>
<a name="TopsJets"></a>
<a name="Top-quark-_0028pair_0029-_002b-jets-production"></a>
<h2 class="section">9.4 Top quark (pair) + jets production</h2>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Top-quark-pair-production">9.4.1 Top quark pair production</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Top-quark-pair-production-including-approximate-EW-corrections">9.4.2 Top quark pair production including approximate EW corrections</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Tops-plus-W-in-MC_0040NLO">9.4.3 Production of a top quark pair in association with a W-boson</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<a name="Top-quark-pair-production"></a>
<a name="Top-quark-pair-production-1"></a>
<h3 class="subsection">9.4.1 Top quark pair production</h3>

<div class="example">
<div class="smallformat">
<pre class="example"><pre class="verbatim">(run){
  % general setting
  EVENTS 1M; ERROR 0.99;

  % scales, tags for scale variations
  FSF:=1.; RSF:=1.; QSF:=1.;
  SCALES METS{FSF*MU_F2}{RSF*MU_R2}{QSF*MU_Q2};
  SCALE_VARIATIONS 0.25,0.25 0.25,1. 1.,0.25 1.,1. 1.,4. 4.,1. 4.,4.;
  CORE_SCALE QCD;
  METS_BBAR_MODE 5;

  % tags for process setup
  NJET:=3; LJET:=2,3; QCUT:=20.;

  % me generator settings
  ME_SIGNAL_GENERATOR Comix Amegic LOOPGEN;
  EVENT_GENERATION_MODE Weighted;
  LOOPGEN:=OpenLoops;

  % collider setup
  BEAM_1 2212; BEAM_ENERGY_1 13500.;
  BEAM_2 2212; BEAM_ENERGY_2 13500.;

  % decays
  HARD_DECAYS On;
  HDH_STATUS[24,2,-1]=0
  HDH_STATUS[24,4,-3]=0
  HDH_STATUS[-24,-2,1]=0
  HDH_STATUS[-24,-4,3]=0
  STABLE[24] 0; STABLE[6] 0; WIDTH[6] 0;

  NLO_SMEAR_THRESHOLD 1;
  NLO_SMEAR_POWER 2;
}(run)

(processes){
  Process : 93 93 -&gt;  6 -6 93{NJET};
  Order (*,0); CKKW sqr(QCUT/E_CMS);
  NLO_QCD_Mode MC@NLO {LJET};
  ME_Generator Amegic {LJET};
  RS_ME_Generator Comix {LJET};
  Loop_Generator LOOPGEN {LJET};
  Max_N_Quarks 6 {5,6,7,8};
  Integration_Error 0.05 {5,6,7,8};
  Scales LOOSE_METS{FSF*MU_F2}{RSF*MU_R2}{QSF*MU_Q2} {5,6,7,8};
  End process
}(processes)
</pre></pre></div>
</div>

<p>Things to notice:
</p><ul>
<li> We use OpenLoops to compute the virtual corrections [<a href="#Cascioli2011va">Cas11</a>].
</li><li> We match matrix elements and parton showers using the MC@NLO technique 
for massive particles, as described in [<a href="#Hoeche2013mua">Hoe13</a>].
</li><li> A non-default METS core scale setter is used, cf. <a href="#METS-scale-setting-with-multiparton-core-processes">METS scale setting with multiparton core processes</a>
</li><li> We enable top decays through the internal decay module using &lsquo;<samp>HARD_DECAYS 1</samp>&rsquo;
</li><li> We calculate on-the-fly a 7-point scale variation, cf. <a href="#Scale-and-PDF-variations">Scale and PDF variations</a>.
</li></ul>



<hr>
<a name="Top-quark-pair-production-including-approximate-EW-corrections"></a>
<a name="Top-quark-pair-production-including-approximate-EW-corrections-1"></a>
<h3 class="subsection">9.4.2 Top quark pair production including approximate EW corrections</h3>

<div class="example">
<div class="smallformat">
<pre class="example"><pre class="verbatim">(run){
  % general setting
  EVENTS 1M; ERROR 0.99;

  % scales, tags for scale variations
  FSF:=1.; RSF:=1.; QSF:=1.;
  SCALES METS{FSF*MU_F2}{RSF*MU_R2}{QSF*MU_Q2};
  SCALE_VARIATIONS 0.25,0.25 0.25,1. 1.,0.25 1.,1. 1.,4. 4.,1. 4.,4.;
  ASSOCIATED_CONTRIBUTIONS_VARIATIONS EW EW|LO1 EW|LO1|LO2 EW|LO1|LO2|LO3;
  CORE_SCALE QCD;
  METS_BBAR_MODE 5;

  % tags for process setup
  NJET:=3; LJET:=2,3; QCUT:=20.;

  % me generator settings
  ME_SIGNAL_GENERATOR Comix Amegic LOOPGEN;
  EVENT_GENERATION_MODE Weighted;
  OL_PARAMETERS preset 2 ew_renorm_scheme 1;
  LOOPGEN:=OpenLoops;

  % collider setup
  BEAM_1 2212; BEAM_ENERGY_1 13500.;
  BEAM_2 2212; BEAM_ENERGY_2 13500.;

  % decays
  HARD_DECAYS On;
  HDH_STATUS[24,2,-1]=0
  HDH_STATUS[24,4,-3]=0
  HDH_STATUS[-24,-2,1]=0
  HDH_STATUS[-24,-4,3]=0
  STABLE[24] 0; STABLE[6] 0; WIDTH[6] 0;

  NLO_SMEAR_THRESHOLD 1;
  NLO_SMEAR_POWER 2;
}(run)

(processes){
  Process : 93 93 -&gt;  6 -6 93{NJET};
  Order (*,0); CKKW sqr(QCUT/E_CMS);
  NLO_QCD_Mode MC@NLO {LJET};
  ME_Generator Amegic {LJET};
  RS_ME_Generator Comix {LJET};
  Loop_Generator LOOPGEN {LJET};
  Associated_Contributions EW|LO1|LO2|LO3 {2};
  Associated_Contributions EW|LO1|LO2|LO3 {3};
  Max_N_Quarks 6 {5,6,7,8};
  Integration_Error 0.05 {5,6,7,8};
  Scales LOOSE_METS{FSF*MU_F2}{RSF*MU_R2}{QSF*MU_Q2} {5,6,7,8};
  End process
}(processes)
</pre></pre></div>
</div>

<p>Things to notice:
</p><ul>
<li> In addition to the setup in <a href="#Top-quark-pair-production">Top quark pair production</a> we add approximate EW corrections, cf. [<a href="#Gutschow2018tuk">Gut18</a>].
</li><li> Please note: this setup currently only works with a beta version of the upcoming OpenLoops release.
</li><li> The approximate EW corrections are added as additional variations on the event weight.
</li></ul>
<hr>
<a name="Tops-plus-W-in-MC_0040NLO"></a>
<a name="Production-of-a-top-quark-pair-in-association-with-a-W_002dboson"></a>
<h3 class="subsection">9.4.3 Production of a top quark pair in association with a W-boson</h3>

<div class="example">
<div class="smallformat">
<pre class="example"><pre class="verbatim">(run){
  % general settings
  EVENTS 10000;

  % tags and settings for scale definitions
  FSF:=1.0; RSF:=1.0; QSF:=1.0;
  SCALES STRICT_METS{FSF*MU_F2}{RSF*MU_R2}{QSF*MU_Q2};

  % tags and settings for ME generators
  LGEN:=OpenLoops;
  ME_SIGNAL_GENERATOR Comix Amegic LGEN;
  EVENT_GENERATION_MODE Weighted;

  % settings for hard decays
  HARD_DECAYS On;
  HDH_STATUS[24,2,-1]=0;
  HDH_STATUS[24,4,-3]=0;
  HDH_STATUS[24,16,-15]=0;

  % model parameters
  WIDTH[6] 0; WIDTH[24] 0;

  % technical parameters
  EXCLUSIVE_CLUSTER_MODE 1;

  % collider setup
  BEAM_1 2212; BEAM_ENERGY_1 4000;
  BEAM_2 2212; BEAM_ENERGY_2 4000;
}(run);

(processes){
  Process 93 93 -&gt; 6 -6 24;
  NLO_QCD_Mode MC@NLO;
  ME_Generator Amegic;
  RS_ME_Generator Comix;
  Loop_Generator LGEN;
  Order (*,1);
  End process;
}(processes);
</pre></pre></div>
</div>

<p>Things to notice:
</p><ul>
<li> Hard decays are enabled through &lsquo;<samp>HARD_DECAYS=On</samp>&rsquo;
and spin correlations are switched on through 
&lsquo;<samp>HARD_SPIN_CORRELATIONS=1</samp>&rsquo;
</li><li> Top quarks and W bosons are set unstable through 
&lsquo;<samp>STABLE[6]=0</samp>&rsquo; &lsquo;<samp>STABLE[24]=0</samp>&rsquo;. As they are 
final states in the hard matrix elements, their width is set 
to zero using &lsquo;<samp>WIDTH[6]=0</samp>&rsquo; and &lsquo;<samp>WIDTH[24]=0</samp>&rsquo;.
</li><li> Certain decay channels are disabled using 
&lsquo;<samp>HDH_NO_DECAY={24,2,-1}|{24,4,-3}|{24,16,-15}</samp>&rsquo;
</li></ul>
 

<hr>
<a name="SingleTopChannels"></a>
<a name="Single_002dtop-production-in-the-s_002c-t-and-tW-channel"></a>
<h2 class="section">9.5 Single-top production in the s, t and tW channel</h2>

<p>In this section, examples for single-top production in three different channels
are described.  For the channel definitions and a validation of these setups,
see [<a href="#Bothmann2017jfv">Both17</a>].
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#t_002dchannel-single_002dtop-production">9.5.1 t-channel single-top production</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#t_002dchannel-single_002dtop-production-with-N_005ff_003d4">9.5.2 t-channel single-top production with N_f=4</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#s_002dchannel-single_002dtop-production">9.5.3 s-channel single-top production</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#tW_002dchannel-single_002dtop-production">9.5.4 tW-channel single-top production</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<a name="t_002dchannel-single_002dtop-production"></a>
<a name="t_002dchannel-single_002dtop-production-1"></a>
<h3 class="subsection">9.5.1 t-channel single-top production</h3>

<div class="example">
<div class="smallformat">
<pre class="example"><pre class="verbatim"># SHERPA run card for t-channel single top-quark production at MC@NLO
# and N_f = 5

(run){
  # general setting
  EVENTS 1M

  # me generator settings
  ME_SIGNAL_GENERATOR Comix Amegic LOOPGEN
  EVENT_GENERATION_MODE Weighted
  LOOPGEN:=OpenLoops
  HARD_DECAYS On

  # scales, tags for scale variations
  # SCALES STRICT_METS:
  #   use CKKW clustering scale for real/MC@NLO emission
  # CORESCALE SingleTop:
  #   use Mandelstam \hat{t} for t-channel 2-&gt;2 core process
  SCF:=1.; FSF:=SCF; RSF:=SCF; QSF:=SCF
  SCALES STRICT_METS{FSF*MU_F2}{RSF*MU_R2}{QSF*MU_Q2}
  CORE_SCALE SingleTop

  # collider setup
  BEAM_1 2212; BEAM_ENERGY_1 4000
  BEAM_2 2212; BEAM_ENERGY_2 4000

  # disable hadronic W decays
  HDH_STATUS[24,2,-1] 0
  HDH_STATUS[24,4,-3] 0
  HDH_STATUS[-24,-2,1] 0
  HDH_STATUS[-24,-4,3] 0

  # choose EW Gmu input scheme
  EW_SCHEME 3

  # required for using top-quark in ME
  WIDTH[6]  0.
}(run)

(processes){
  Process 93 93 -&gt; 6 93
  NLO_QCD_Mode MC@NLO
  Order (*,2)
  ME_Generator Amegic
  RS_ME_Generator Comix
  Loop_Generator LOOPGEN
  Min_N_TChannels 1  # require t-channel W
  End process
}(processes)
</pre></pre></div>
</div>

<p>Things to notice:
</p><ul>
<li> We use OpenLoops to compute the virtual corrections [<a href="#Cascioli2011va">Cas11</a>].
</li><li> We match matrix elements and parton showers using the MC@NLO technique 
for massive particles, as described in [<a href="#Hoeche2013mua">Hoe13</a>].
</li><li> A non-default METS core scale setter is used, cf. <a href="#METS-scale-setting-with-multiparton-core-processes">METS scale setting with multiparton core processes</a>
</li><li> We enable top and W decays through the internal decay module using &lsquo;<samp>HARD_DECAYS On</samp>&rsquo;.
The W is restricted to its leptonic decay channels.
</li><li> By setting &lsquo;<samp>Min_N_TChannels 1</samp>&rsquo;, only t-channel diagrams are used for the calculation
</li></ul>


<hr>
<a name="t_002dchannel-single_002dtop-production-with-N_005ff_003d4"></a>
<a name="t_002dchannel-single_002dtop-production-with-N_005ff_003d4-1"></a>
<h3 class="subsection">9.5.2 t-channel single-top production with N_f=4</h3>

<div class="example">
<div class="smallformat">
<pre class="example"><pre class="verbatim"># SHERPA run card for t-channel single top-quark production at MC@NLO
# and N_f = 4

(run){
  # general setting
  EVENTS 1M

  # me generator settings
  ME_SIGNAL_GENERATOR Comix Amegic LOOPGEN
  EVENT_GENERATION_MODE Weighted
  LOOPGEN:=OpenLoops
  HARD_DECAYS On

  # scales, tags for scale variations
  #   muR = transverse momentum of the bottom
  #   muF = muQ = transverse momentum of the top
  SCF:=1.; FSF:=SCF; RSF:=SCF; QSF:=SCF
  rscl2:=MPerp2(p[3])
  fscl2:=MPerp2(p[2])
  SCALES VAR{FSF*fscl2}{RSF*rscl2}{QSF*fscl2}

  # collider setup
  BEAM_1 2212; BEAM_ENERGY_1 4000
  BEAM_2 2212; BEAM_ENERGY_2 4000

  # disable hadronic W decays
  HDH_STATUS[24,2,-1] 0
  HDH_STATUS[24,4,-3] 0
  HDH_STATUS[-24,-2,1] 0
  HDH_STATUS[-24,-4,3] 0

  # choose EW Gmu input scheme
  EW_SCHEME 3

  # required for using top-quark in ME
  WIDTH[6]  0.

  # configure for N_f = 4
  PDF_LIBRARY LHAPDFSherpa
  PDF_SET NNPDF30_nlo_as_0118_nf_4
  USE_PDF_ALPHAS 1
  MASS[5] 4.18  # as in NNPDF30_nlo_as_0118_nf_4
  MASSIVE[5] 1
}(run)

(processes){
  Process 93 93 -&gt; 6 -5 93
  NLO_QCD_Mode MC@NLO
  Order (*,2)
  ME_Generator Amegic
  RS_ME_Generator Comix
  Loop_Generator LOOPGEN
  Min_N_TChannels 1  # require t-channel W
  End process
}(processes)
</pre></pre></div>
</div>

<p>Things to notice:
</p><ul>
<li> We use an Nf4 PDF and use its definition of the bottom mass
</li><li> See <a href="#t_002dchannel-single_002dtop-production">t-channel single-top production</a> for more comments
</li></ul>
<hr>
<a name="s_002dchannel-single_002dtop-production"></a>
<a name="s_002dchannel-single_002dtop-production-1"></a>
<h3 class="subsection">9.5.3 s-channel single-top production</h3>

<div class="example">
<div class="smallformat">
<pre class="example"><pre class="verbatim"># SHERPA run card for s-channel single top-quark production at MC@NLO
# and N_f = 5

(run){
  # general setting
  EVENTS 1M

  # me generator settings
  ME_SIGNAL_GENERATOR Comix Amegic LOOPGEN
  EVENT_GENERATION_MODE Weighted
  LOOPGEN:=OpenLoops
  HARD_DECAYS On

  # scales, tags for scale variations
  # SCALES STRICT_METS:
  #   use CKKW clustering scale for real/MC@NLO emission
  # CORESCALE SingleTop:
  #   use Mandelstam \hat{s} for s-channel 2-&gt;2 core process
  SCF:=1.; FSF:=SCF; RSF:=SCF; QSF:=SCF
  SCALES STRICT_METS{FSF*MU_F2}{RSF*MU_R2}{QSF*MU_Q2}
  CORE_SCALE SingleTop

  # collider setup
  BEAM_1 2212; BEAM_ENERGY_1 4000
  BEAM_2 2212; BEAM_ENERGY_2 4000

  # disable hadronic W decays
  HDH_STATUS[24,2,-1] 0
  HDH_STATUS[24,4,-3] 0
  HDH_STATUS[-24,-2,1] 0
  HDH_STATUS[-24,-4,3] 0

  # choose EW Gmu input scheme
  EW_SCHEME 3

  # required for using top-quark in ME
  WIDTH[6]  0.

  # there is no bottom in the initial-state in s-channel production
  PARTICLE_CONTAINER 900 lj 1 -1 2 -2 3 -3 4 -4 21
}(run)

(processes){
  Process 900 900 -&gt; 6 93
  NLO_QCD_Mode MC@NLO
  Order (*,2)
  ME_Generator Amegic
  RS_ME_Generator Comix
  Loop_Generator LOOPGEN
  Max_N_TChannels 0  # require s-channel W
  End process
}(processes)
</pre></pre></div>
</div>

<p>Things to notice:
</p><ul>
<li> By excluding the bottom quark from the initial-state at Born level using
&lsquo;<samp>PARTICLE_CONTAINER</samp>&rsquo;, and by setting &lsquo;<samp>Max_N_TChannels 0</samp>&rsquo;, only
s-channel diagrams are used for the calculation
</li><li> See <a href="#t_002dchannel-single_002dtop-production">t-channel single-top production</a> for more comments
</li></ul>
<hr>
<a name="tW_002dchannel-single_002dtop-production"></a>
<a name="tW_002dchannel-single_002dtop-production-1"></a>
<h3 class="subsection">9.5.4 tW-channel single-top production</h3>

<div class="example">
<div class="smallformat">
<pre class="example"><pre class="verbatim"># SHERPA run card for tW-channel single top-quark production at MC@NLO
# and N_f = 5

(run){
  # general setting
  EVENTS 1M

  # me generator settings
  ME_SIGNAL_GENERATOR Comix Amegic LOOPGEN
  EVENT_GENERATION_MODE Weighted
  LOOPGEN:=OpenLoops
  HARD_DECAYS On

  # scales, tags for scale variations
  #   mu = transverse momentum of the top
  SCF:=1.; FSF:=SCF; RSF:=SCF; QSF:=SCF;
  scl2:=MPerp2(p[3]);
  SCALES VAR{FSF*scl2}{RSF*scl2}{QSF*scl2};

  # collider setup
  BEAM_1 2212; BEAM_ENERGY_1 4000
  BEAM_2 2212; BEAM_ENERGY_2 4000

  # disable hadronic W decays
  HDH_STATUS[24,2,-1] 0
  HDH_STATUS[24,4,-3] 0
  HDH_STATUS[-24,-2,1] 0
  HDH_STATUS[-24,-4,3] 0

  # choose EW Gmu input scheme
  EW_SCHEME 3

  # required for using top-quark/W-boson in ME
  WIDTH[6]   0.
  WIDTH[24]  0.
}(run)

(processes){
  Process 93 93 -&gt; 6 -24
  No_Decay -6  # remove ttbar diagrams
  NLO_QCD_Mode MC@NLO
  Order (*,1)
  ME_Generator Amegic
  RS_ME_Generator Comix
  Loop_Generator LOOPGEN
  End process
}(processes)
</pre></pre></div>
</div>

<p>Things to notice:
</p><ul>
<li> By setting &lsquo;<samp>No_Decay -6</samp>&rsquo;, the doubly-resonant TTbar diagrams are
removed. Only the singly-resonant diagrams remain as required by the definition
of the channel.
</li><li> See <a href="#t_002dchannel-single_002dtop-production">t-channel single-top production</a> for more comments
</li></ul>

<hr>
<a name="VVJets"></a>
<a name="Vector-boson-pairs-_002b-jets-production"></a>
<h2 class="section">9.6 Vector boson pairs + jets production</h2>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Dilepton-missing-energy-and-jets-production">9.6.1 Dilepton, missing energy and jets production</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Dilepton-missing-energy-and-jets-production-_0028gluon-initiated_0029">9.6.2 Dilepton, missing energy and jets production (gluon initiated)</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Four-lepton-and-jets-production">9.6.3 Four lepton and jets production</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Four-lepton-and-jets-production-_0028gluon-initiated_0029">9.6.4 Four lepton and jets production (gluon initiated)</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#WZ-production-with-jets-production">9.6.5 WZ production with jets production</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Same-sign-dilepton-missing-energy-and-jets-production">9.6.6 Same sign dilepton, missing energy and jets production</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<a name="Dilepton-missing-energy-and-jets-production"></a>
<a name="Dilepton_002c-missing-energy-and-jets-production"></a>
<h3 class="subsection">9.6.1 Dilepton, missing energy and jets production</h3>

<div class="example">
<div class="smallformat">
<pre class="example"><pre class="verbatim">(run){
  % general settings
  EVENTS 1M;

  % scales, tags for scale variations
  FSF:=1.; RSF:=1.; QSF:=1.;
  SCALES METS{FSF*MU_F2}{RSF*MU_R2}{QSF*MU_Q2};

  % tags for process setup
  NJET:=3; LJET:=4,5; QCUT:=30.;

  % me generator settings
  ME_SIGNAL_GENERATOR Comix Amegic LOOPGEN;
  EVENT_GENERATION_MODE Weighted;
  LOOPGEN:=OpenLoops;
  EXCLUSIVE_CLUSTER_MODE 1;
  METS_CLUSTER_MODE 16;

  % define parton container without b-quarks to
  % remove any processes with top contributions
  PARTICLE_CONTAINER 901 lightflavs 1 -1 2 -2 3 -3 4 -4 21;
  NLO_CSS_DISALLOW_FLAVOUR 5;

  % collider setup
  BEAM_1 2212; BEAM_ENERGY_1 6500.;
  BEAM_2 2212; BEAM_ENERGY_2 6500.;
}(run)

(processes){
  Process 901 901 -&gt; 90 91 90 91 901{NJET};
  Order (*,4); CKKW sqr(QCUT/E_CMS);
  NLO_QCD_Mode MC@NLO {LJET};
  ME_Generator Amegic {LJET};
  RS_ME_Generator Comix {LJET};
  Loop_Generator LOOPGEN {LJET};
  Integration_Error 0.05 {5,6,7,8};
  End process;
}(processes)

(selector){
  &quot;PT&quot; 90 5.0,E_CMS:5.0,E_CMS [PT_UP]
  Mass 11 -11 10.0 E_CMS
  Mass 13 -13 10.0 E_CMS
  Mass 15 -15 10.0 E_CMS
}(selector)
</pre></pre></div>
</div>

<p>Things to notice:
</p><ul>
</ul>


<hr>
<a name="Dilepton-missing-energy-and-jets-production-_0028gluon-initiated_0029"></a>
<a name="Dilepton_002c-missing-energy-and-jets-production-_0028gluon-initiated_0029"></a>
<h3 class="subsection">9.6.2 Dilepton, missing energy and jets production (gluon initiated)</h3>

<div class="example">
<div class="smallformat">
<pre class="example"><pre class="verbatim">(run){
  % general settings
  EVENTS 1M;

  % scales, tags for scale variations
  FSF:=1.; RSF:=1.; QSF:=1.;
  SCALES STRICT_METS{FSF*MU_F2}{RSF*MU_R2}{QSF*MU_Q2};
  CORE_SCALE VAR{Abs2(p[2]+p[3]+p[4]+p[5])/4.0};
  EXCLUSIVE_CLUSTER_MODE 1;

  % tags for process setup
  NJET:=1; QCUT:=20;

  % me generator settings
  ME_SIGNAL_GENERATOR Amegic LOOPGEN;
  EVENT_GENERATION_MODE Weighted;
  LOOPGEN:=OpenLoops;
  AMEGIC_ALLOW_MAPPING 0;
  % the following phase space libraries have to be generated with the
  % corresponding qq-&gt;llvv setup (RUNDATA=Run.tree.dat) first;
  % they will appear in Process/Amegic/lib/libProc_fsrchannels*.so
  SHERPA_LDADD Proc_fsrchannels4 Proc_fsrchannels5;

  % collider setup
  BEAM_1 2212; BEAM_ENERGY_1 6500.;
  BEAM_2 2212; BEAM_ENERGY_2 6500.;
}(run)


(processes){
  Process 93 93 -&gt; 90 90 91 91 93{1};
  CKKW sqr(QCUT/E_CMS);
  Order (2,4) {4};
  Order (3,4) {5};
  Integrator fsrchannels4 {4};
  Integrator fsrchannels5 {5};
  Enable_MHV 10; # initialises external process
  Loop_Generator LOOPGEN;
  Integration_Error 0.02 {5};
  End process;
}(processes)

(selector){
  Mass 11 -11 10.0 E_CMS;
  Mass 13 -13 10.0 E_CMS;
  Mass 15 -15 10.0 E_CMS;
}(selector)
</pre></pre></div>
</div>

<p>Things to notice:
</p><ul>
</ul>


<hr>
<a name="Four-lepton-and-jets-production"></a>
<a name="Four-lepton-and-jets-production-1"></a>
<h3 class="subsection">9.6.3 Four lepton and jets production</h3>

<div class="example">
<div class="smallformat">
<pre class="example"><pre class="verbatim">(run){
  % general settings
  EVENTS 1M;

  % scales, tags for scale variations
  FSF:=1.; RSF:=1.; QSF:=1.;
  SCALES METS{FSF*MU_F2}{RSF*MU_R2}{QSF*MU_Q2};

  % tags for process setup
  NJET:=3; LJET:=4,5; QCUT:=30.;

  % me generator settings
  ME_SIGNAL_GENERATOR Comix Amegic LOOPGEN;
  EVENT_GENERATION_MODE Weighted;
  LOOPGEN:=OpenLoops;
  EXCLUSIVE_CLUSTER_MODE 1;
  METS_CLUSTER_MODE 16;

  % collider setup
  BEAM_1 2212; BEAM_ENERGY_1 6500.;
  BEAM_2 2212; BEAM_ENERGY_2 6500.;
}(run)

(processes){
  Process 93 93 -&gt; 90 90 90 90 93{NJET};
  Order (*,4); CKKW sqr(QCUT/E_CMS);
  NLO_QCD_Mode MC@NLO {LJET};
  ME_Generator Amegic {LJET};
  RS_ME_Generator Comix {LJET};
  Loop_Generator LOOPGEN {LJET};
  Integration_Error 0.05 {5,6,7,8};
  End process;
}(processes)

(selector){
  &quot;PT&quot; 90 5.0,E_CMS:5.0,E_CMS [PT_UP]
  Mass 11 -11 10.0 E_CMS
  Mass 13 -13 10.0 E_CMS
  Mass 15 -15 10.0 E_CMS
}(selector)
</pre></pre></div>
</div>

<p>Things to notice:
</p><ul>
</ul>


<hr>
<a name="Four-lepton-and-jets-production-_0028gluon-initiated_0029"></a>
<a name="Four-lepton-and-jets-production-_0028gluon-initiated_0029-1"></a>
<h3 class="subsection">9.6.4 Four lepton and jets production (gluon initiated)</h3>

<div class="example">
<div class="smallformat">
<pre class="example"><pre class="verbatim">(run){
  % general settings
  EVENTS 1M;

  % scales, tags for scale variations
  FSF:=1.; RSF:=1.; QSF:=1.;
  SCALES STRICT_METS{FSF*MU_F2}{RSF*MU_R2}{QSF*MU_Q2};
  CORE_SCALE VAR{Abs2(p[2]+p[3]+p[4]+p[5])/4.0};
  EXCLUSIVE_CLUSTER_MODE 1;

  % tags for process setup
  NJET:=1; QCUT:=20;

  % me generator settings
  ME_SIGNAL_GENERATOR Amegic LOOPGEN;
  EVENT_GENERATION_MODE Weighted;
  LOOPGEN:=OpenLoops;
  AMEGIC_ALLOW_MAPPING 0;
  % the following phase space libraries have to be generated with the
  % corresponding qq-&gt;llll setup (RUNDATA=Run.tree.dat) first;
  % they will appear in Process/Amegic/lib/libProc_fsrchannels*.so
  SHERPA_LDADD Proc_fsrchannels4 Proc_fsrchannels5;

  % collider setup
  BEAM_1 2212; BEAM_ENERGY_1 6500.;
  BEAM_2 2212; BEAM_ENERGY_2 6500.;
}(run)


(processes){
  Process 93 93 -&gt; 90 90 90 90 93{1};
  CKKW sqr(QCUT/E_CMS);
  Order (2,4) {4};
  Order (3,4) {5};
  Integrator fsrchannels4 {4};
  Integrator fsrchannels5 {5};
  Enable_MHV 10; # initialises external process
  Loop_Generator LOOPGEN;
  Integration_Error 0.02 {5};
  End process;
}(processes)

(selector){
  Mass 11 -11 10.0 E_CMS;
  Mass 13 -13 10.0 E_CMS;
  Mass 15 -15 10.0 E_CMS;
}(selector)
</pre></pre></div>
</div>

<p>Things to notice:
</p><ul>
</ul>


<hr>
<a name="WZ-production-with-jets-production"></a>
<a name="WZ-production-with-jets-production-1"></a>
<h3 class="subsection">9.6.5 WZ production with jets production</h3>

<div class="example">
<div class="smallformat">
<pre class="example"><pre class="verbatim">(run){
  % general settings
  EVENTS 1M;

  % scales, tags for scale variations
  FSF:=1.; RSF:=1.; QSF:=1.;
  SCALES METS{FSF*MU_F2}{RSF*MU_R2}{QSF*MU_Q2};
  CORE_SCALE VAR{Abs2(p[2]+p[3])/4.0};
  EXCLUSIVE_CLUSTER_MODE 1;

  % tags for process setup
  NJET:=3; LJET:=2,3; QCUT:=30.;

  % me generator settings
  ME_SIGNAL_GENERATOR Comix Amegic LOOPGEN;
  EVENT_GENERATION_MODE Weighted;
  LOOPGEN:=OpenLoops;

  % decay setup
  HARD_DECAYS On;
  WIDTH[23] 0; WIDTH[24] 0;
  HDH_STATUS[24,2,-1] 2;
  HDH_STATUS[24,4,-3] 2;
  HDH_STATUS[-24,-2,1] 2;
  HDH_STATUS[-24,-4,3] 2;
  HDH_STATUS[23,12,-12] 2;
  HDH_STATUS[23,14,-14] 2;
  HDH_STATUS[23,16,-16] 2;

  % collider setup
  BEAM_1 2212; BEAM_ENERGY_1 6500.;
  BEAM_2 2212; BEAM_ENERGY_2 6500.;
}(run)

(processes){
  Process 93 93 -&gt; 24 23 93{NJET};
  Order (*,2); CKKW sqr(QCUT/E_CMS);
  NLO_QCD_Mode MC@NLO {LJET};
  ME_Generator Amegic {LJET};
  RS_ME_Generator Comix {LJET};
  Loop_Generator LOOPGEN {LJET};
  Integration_Error 0.05 {3,4,5,6,7};
  End process;

  Process 93 93 -&gt; -24 23 93{NJET};
  Order (*,2); CKKW sqr(QCUT/E_CMS);
  NLO_QCD_Mode MC@NLO {LJET};
  ME_Generator Amegic {LJET};
  RS_ME_Generator Comix {LJET};
  Loop_Generator LOOPGEN {LJET};
  Integration_Error 0.05 {3,4,5,6,7};
  End process;
}(processes)
</pre></pre></div>
</div>

<p>Things to notice:
</p><ul>
</ul>


<hr>
<a name="Same-sign-dilepton-missing-energy-and-jets-production"></a>
<a name="Same-sign-dilepton_002c-missing-energy-and-jets-production"></a>
<h3 class="subsection">9.6.6 Same sign dilepton, missing energy and jets production</h3>

<div class="example">
<div class="smallformat">
<pre class="example"><pre class="verbatim">(run){
  % general settings
  EVENTS 1M;

  % choose EW Gmu input scheme
  EW_SCHEME 3;

  % tags for process setup
  NJET:=1; QCUT:=30.;

  %scales, tags for scale variations
  FSF:=1.0; RSF:=1.0; QSF:=1.0;
  SCALES=STRICT_METS{FSF*MU_F2}{RSF*MU_R2}{QSF*MU_Q2};
  CORE_SCALE=VAR{Abs2(p[2]+p[3]+p[4]+p[5])};
  EXCLUSIVE_CLUSTER_MODE 1;

  %solves problem with dipole QED modeling
  ME_QED_CLUSTERING_THRESHOLD 10;

  % improve integration performance
  PSI_ITMIN 25000;
  INTEGRATION_ERROR 0.05;

  % collider setup
  BEAM_1 2212; BEAM_ENERGY_1 6500.;
  BEAM_2 2212; BEAM_ENERGY_2 6500.;
}(run)


(processes){
  Process 93 93 -&gt; 11 11 -12 -12 93 93 93{NJET};
  Order (*,6);
  CKKW sqr(QCUT/E_CMS);
  End process;

  Process 93 93 -&gt; 13 13 -14 -14 93 93 93{NJET};
  Order (*,6);
  CKKW sqr(QCUT/E_CMS);
  End process;

  Process 93 93 -&gt; 15 15 -16 -16 93 93 93{NJET};
  Order (*,6);
  CKKW sqr(QCUT/E_CMS);
  End process;

  Process 93 93 -&gt; 11 13 -12 -14 93 93 93{NJET};
  Order (*,6);
  CKKW sqr(QCUT/E_CMS);
  End process;

  Process 93 93 -&gt; 11 15 -12 -16 93 93 93{NJET};
  Order (*,6);
  CKKW sqr(QCUT/E_CMS);
  End process;

  Process 93 93 -&gt; 13 15 -14 -16 93 93 93{NJET};
  Order (*,6);
  CKKW sqr(QCUT/E_CMS);
  End process;

  Process 93 93 -&gt; -11 -11 12 12 93 93 93{NJET};
  Order (*,6);
  CKKW sqr(QCUT/E_CMS);
  End process;

  Process 93 93 -&gt; -13 -13 14 14 93 93 93{NJET};
  Order (*,6);
  CKKW sqr(QCUT/E_CMS);
  End process;

  Process 93 93 -&gt; -15 -15 16 16 93 93 93{NJET};
  Order (*,6);
  CKKW sqr(QCUT/E_CMS);
  End process;

  Process 93 93 -&gt; -11 -13 12 14 93 93 93{NJET};
  Order (*,6);
  CKKW sqr(QCUT/E_CMS);
  End process;

  Process 93 93 -&gt; -11 -15 12 16 93 93 93{NJET};
  Order (*,6);
  CKKW sqr(QCUT/E_CMS);
  End process;

  Process 93 93 -&gt; -13 -15 14 16 93 93 93{NJET};
  Order (*,6);
  CKKW sqr(QCUT/E_CMS);
  End process;
}(processes)

(selector){
  PT 90 5.0 E_CMS;
  NJetFinder 2 15. 0. 0.4 -1;
}(selector)
</pre></pre></div>
</div>

<p>Things to notice:
</p><ul>
</ul>



<hr>
<a name="MSSM_002fUFO"></a>
<a name="Event-generation-in-the-MSSM-using-UFO"></a>
<h2 class="section">9.7 Event generation in the MSSM using UFO</h2>

<p>This is an example for event generation in the MSSM using Sherpa&rsquo;s UFO
support. In the corresponding Example directory
<code>&lt;prefix&gt;/share/SHERPA-MC/Examples/UFO_MSSM/</code>, you will find a directory
<code>MSSM</code> that contains the UFO output for the MSSM
(<a href="https://feynrules.irmp.ucl.ac.be/wiki/MSSM">https://feynrules.irmp.ucl.ac.be/wiki/MSSM</a>). To run the example,
generate the model as described in <a href="#UFO-Model-Interface">UFO Model Interface</a> by
executing
</p><pre class="verbatim">cd &lt;prefix&gt;/share/SHERPA-MC/Examples/UFO_MSSM/
&lt;prefix&gt;/bin/Sherpa-generate-model MSSM
</pre><p>An example run card will be written to the working directory. Use this
run card as a template to generate events.
</p> 

<hr>
<a name="DIS"></a>
<a name="Deep_002dinelastic-scattering"></a>
<h2 class="section">9.8 Deep-inelastic scattering</h2>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#HERA">9.8.1 DIS at HERA</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<a name="HERA"></a>
<a name="DIS-at-HERA"></a>
<h3 class="subsection">9.8.1 DIS at HERA</h3>

<p>This is an example of a setup for hadronic final states in deep-inelastic 
lepton-nucleon scattering at a centre-of-mass energy of 300 GeV.
Corresponding measurements were carried out by the H1 and ZEUS collaborations
at the HERA collider at DESY Hamburg.
</p>
<div class="example">
<div class="smallformat">
<pre class="example"><pre class="verbatim">(run){
  EVENTS 1M;
  # technical parameters
  NJET:=4; QCUT:=5; SDIS:=1.0;
  LJET:=2,3; LGEN:=BlackHat;
  ME_SIGNAL_GENERATOR Comix Amegic LGEN;
  EVENT_GENERATION_MODE Weighted;
  RESPECT_MASSIVE_FLAG 1;
  CSS_KIN_SCHEME 1;
  # collider setup
  BEAM_1 -11 27.5; BEAM_2 2212 820; 
  PDF_SET_1 None;
  # hadronization tune
  PARJ(21) 0.432; PARJ(41) 1.05; PARJ(42) 1.0;
  PARJ(47) 0.65; MSTJ(11) 5;
  FRAGMENTATION Lund; DECAYMODEL Lund; 
}(run);

(processes){
  Process -11 93 -&gt; -11 93 93{NJET};
  CKKW sqr(QCUT/E_CMS)/(1.0+sqr(QCUT/SDIS)/Abs2(p[2]-p[0]));
  NLO_QCD_Mode MC@NLO {LJET};
  Order (*,2); Max_N_Quarks 6;
  ME_Generator Amegic {LJET};
  RS_ME_Generator Comix {LJET};
  Loop_Generator LGEN;
  PSI_ItMin 25000 {3};
  Integration_Error 0.03 {3};
  End process;
}(processes);

(selector){
  Q2 -11 -11 4 1e12;
}(selector)
</pre></pre></div>
</div>
 
<p>Things to notice:
</p><ul>
<li> the beams are asymmetric with the positrons at an energy of 27.6 GeV,
while the protons carry 820 GeV of energy.

</li><li> the multi-jet merging cut is set dynamically for each event, depending 
on the photon virtuality, see [<a href="#Carli2009cg">Car09</a>].

</li><li> there is a selector cut on the photon virtuality. This cut implements
the experimental requirements for idenitfying the deep-inelastic scattering process.

</li></ul>

<hr>
<a name="FONLO"></a>
<a name="Fixed_002dorder-next_002dto_002dleading-order-calculations"></a>
<h2 class="section">9.9 Fixed-order next-to-leading order calculations</h2>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#NTuple-production">9.9.1 Production of NTuples</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"> Production of Root NTuples with Sherpa
</td></tr>
</table>

<hr>
<a name="NTuple-production"></a>
<a name="Production-of-NTuples"></a>
<h3 class="subsection">9.9.1 Production of NTuples</h3>
<p>Root NTuples are a convenient way to store the result of cumbersome 
fixed-order calculations in order to perform multiple analyses. 
This example shows how to generate such NTuples and reweighted them 
in order to change factorisation and renormalisation scales. 
Note that in order to use this setup, Sherpa must be configured 
with option <code>--enable-root=/path/to/root</code>, see <a href="#Event-output-formats">Event output formats</a>. 
If Sherpa has not been configured with Rivet analysis support, 
please disable the analysis using &lsquo;<samp>-a0</samp>&rsquo; on the command line, 
see <a href="#Command-line">Command line options</a>.
</p>
<p>When using NTuples, one needs to bear in mind that every calculation
involving jets in the final state is exclusive in the sense that a lower
cutoff on the jet transverse momenta must be imposed.
It is therefore necessary to check whether the event sample stored in the
NTuple is sufficiently inclusive before using it. Similar remarks apply
when photons are present in the NLO calculation or when cuts on
leptons have been applied at generation level to increase efficiency.
Every NTuple should therefore be accompanied by an appropriate documentation.
</p>
<p>This example will generate NTuples for the process pp-&gt;lvj,
where l is an electron or positron, and v is an electron (anti-)neutrino.
We identify parton-level jets using the anti-k_T algorithm with R=0.4 
[<a href="#Cacciari2008gp">Cac08</a>]. We require the transverse momentum of these jets 
to be larger than 20 GeV. No other cuts are applied at generation level.
</p>
<div class="example">
<div class="smallformat">
<pre class="example"><pre class="verbatim">(run){
  EVENTS 100k;
  EVENT_GENERATION_MODE Weighted;
  LGEN:=BlackHat; ME_SIGNAL_GENERATOR Amegic LGEN;
  ### Analysis (please configure with --enable-rivet &amp; --enable-hepmc2)
  ANALYSIS Rivet; ANALYSIS_OUTPUT Analysis/HTp/BVI/;
  ### NTuple output (please configure with '--enable-root')
  EVENT_OUTPUT Root[NTuple_B-like];

  BEAM_1 2212; BEAM_ENERGY_1 3500;
  BEAM_2 2212; BEAM_ENERGY_2 3500;
  SCF:=1; ### default scale factor
  SCALES VAR{SCF*sqr(sqrt(H_T2)-PPerp(p[2])-PPerp(p[3])+MPerp(p[2]+p[3]))};
  EW_SCHEME 0; WIDTH_SCHEME Fixed; # sin\theta_w -&gt; 0.23
  DIPOLE_ALPHA 0.03;
  MASSIVE[13] 1; MASSIVE[15] 1;
}(run);
(processes){
  ### The Born piece
  Process 93 93 -&gt; 90 91 93;
  NLO_QCD_Mode Fixed_Order;
  NLO_QCD_Part B;
  Order (*,2);
  End process;
  ### The virtual piece
  Process 93 93 -&gt; 90 91 93;
  NLO_QCD_Mode Fixed_Order;
  NLO_QCD_Part V;
  Loop_Generator LGEN;
  Order (*,2);
  End process;
  ### The integrated subtraction piece
  Process 93 93 -&gt; 90 91 93;
  NLO_QCD_Mode Fixed_Order;
  NLO_QCD_Part I;
  Order (*,2);
  End process;
}(processes);
(selector){
  FastjetFinder antikt 1 20 0 0.4;
}(selector);

(analysis){
  BEGIN_RIVET {
    -a ATLAS_2012_I1083318;
    USE_HEPMC_SHORT 1;
    IGNOREBEAMS 1;
  } END_RIVET;
}(analysis);
</pre></pre></div>
</div>

<p>Things to notice:
</p><ul>
<li> NTuple production is enabled by &lsquo;<samp>EVENT_OUTPUT Root[NTuple_B-like]</samp>&rsquo;,
  see <a href="#Event-output-formats">Event output formats</a>.
</li><li> The scale used is defined as in [<a href="#Berger2009ep">Ber09a</a>].
</li><li> &lsquo;<samp>EW_SCHEME 0; WIDTH_SCHEME Fixed;</samp>&rsquo; are used to set
  the value of the weak mixing angle to 0.23, 
  consistent with EW precision measurements.
</li><li> &lsquo;<samp>DIPOLE_ALPHA 0.03</samp>&rsquo; is used to limit the active phase space of
  dipole subtractions.
</li><li> &lsquo;<samp>MASSIVE[13] 1; MASSIVE[15] 1;</samp>&rsquo; are used to limit the number of
  active lepton flavours to electron and positron.
</li><li> The option &lsquo;<samp>USE_HEPMC_SHORT 1</samp>&rsquo; is used in the Rivet analysis
  section as the events produced by Sherpa are not at particle level.
</li></ul>

<hr>
<a name="NTuple-production-1"></a>
<h4 class="subsubsection">9.9.1.1 NTuple production</h4>
<p>Start Sherpa using the command line
</p><pre class="verbatim">  Sherpa -f Run.B-like.dat
</pre><p>Sherpa will first create source code for its matrix-element calculations.
This process will stop with a message instructing you to compile. 
Do so by running
</p><pre class="verbatim">  ./makelibs -j4
</pre><p>Launch Sherpa again, using
</p><pre class="verbatim">  Sherpa -f Run.B-like.dat
</pre><p>Sherpa will then compute the Born, virtual and integrated subtraction contribution
to the NLO cross section and generate events. These events are analyzed using the 
Rivet library and stored in a Root NTuple file called <kbd>NTuple_B-like.root</kbd>. 
We will use this NTuple later to compute an NLO uncertainty band.
</p>
<p>The real-emission contribution, including subtraction terms, to the NLO cross section
is computed using
</p><pre class="verbatim">  Sherpa -f Run.R-like.dat
</pre><p>Events are generated, analyzed by Rivet and stored in the Root NTuple file
<kbd>NTuple_R-like.root</kbd>.
</p>
<p>The two analyses of events with Born-like and real-emission-like kinematics
need to be merged, which can be achieved using scripts like <kbd>aidaadd</kbd>.
The result can then be plotted and displayed.
</p>
<hr>
<a name="Usage-of-NTuples-in-Sherpa"></a>
<h4 class="subsubsection">9.9.1.2 Usage of NTuples in Sherpa</h4>
<p>Next we will compute the NLO uncertainty band using Sherpa.
To this end, we make use of the Root NTuples generated in the previous steps.
Note that the setup files for reweighting are almost identical to those for
generating the NTuples. We have simply replaced &lsquo;<samp>EVENT_OUTPUT</samp>&rsquo; by
&lsquo;<samp>EVENT_INPUT</samp>&rsquo;.
</p>
<p>First we re-evaluate the events with the scale increased by a factor 2:
</p><pre class="verbatim">  Sherpa -f Reweight.B-like.dat
  Sherpa -f Reweight.R-like.dat
</pre><p>Then we re-evaluate the events with the scale decreased by a factor 2:
</p><pre class="verbatim">  Sherpa -f Reweight.B-like.dat SCF:=0.25 -A Analysis/025HTp/BVI
  Sherpa -f Reweight.R-like.dat SCF:=0.25 -A Analysis/025HTp/RS
</pre><p>The two contributions can again be combined using <kbd>aidaadd</kbd>.
</p>
<hr>
<a name="SoftQCD"></a>
<a name="Soft-QCD_003a-Minimum-Bias-and-Cross-Sections"></a>
<h2 class="section">9.10 Soft QCD: Minimum Bias and Cross Sections</h2>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Calculation-of-inclusive-cross-sections">9.10.1 Calculation of inclusive cross sections</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Simulation-of-Minimum-Bias-events">9.10.2 Simulation of Minimum Bias events</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<a name="Calculation-of-inclusive-cross-sections"></a>
<a name="Calculation-of-inclusive-cross-sections-1"></a>
<h3 class="subsection">9.10.1 Calculation of inclusive cross sections</h3>

<div class="example">
<div class="smallformat">
<pre class="example"><pre class="verbatim">(run){
  OUTPUT              = 2
  EVENT_TYPE          = MinimumBias 
  SOFT_COLLISIONS     = Shrimps
  Shrimps_Mode        = Xsecs

  deltaY    =  1.5;
  Lambda2   =  1.7;
  beta_0^2  =  20.0;
  kappa     =  0.6;
  xi        =  0.2;
  lambda    =  0.3;
  Delta     =  0.4;
}(run)

(beam){
  BEAM_1 =  2212; BEAM_ENERGY_1 = 450.;
  BEAM_2 =  2212; BEAM_ENERGY_2 = 450.;
}(beam)

(me){
  ME_SIGNAL_GENERATOR = None
}(me)

</pre></pre></div>
</div>

<p>Things to notice:
</p><ul>
<li> Inclusive cross sections (total, inelastic, low-mass single-diffractive,
      low-mass double-diffractive, elastic) and the elastic slope are
      calculated for varying c.m. energies in pp collisions
</li><li> The results are written to the file InclusiveQuantities/xsecs_total.dat
      and to the screen.  The directory will automatically be created in the
      path from where Sherpa is run.
</li><li> The parameters of the model are not very well tuned.
</li></ul>
 
<hr>
<a name="Simulation-of-Minimum-Bias-events"></a>
<a name="Simulation-of-Minimum-Bias-events-1"></a>
<h3 class="subsection">9.10.2 Simulation of Minimum Bias events</h3>

<div class="example">
<div class="smallformat">
<pre class="example"><pre class="verbatim">(run){
  EVENTS              = 50k
  OUTPUT              = 2
  EVENT_TYPE          = MinimumBias 
  SOFT_COLLISIONS     = Shrimps
  Shrimps_Mode        = Inelastic 

  ANALYSIS            = Rivet

  ANALYSIS_OUTPUT     = test6

  ALPHAS(MZ) 0.118;
  ORDER_ALPHAS 1;
  CSS_FS_PT2MIN       1.00
  MAX_PROPER_LIFETIME = 10.

  deltaY    =  1.5;
  Lambda2   =  1.376;
  beta_0^2  =  18.76;
  kappa     =  0.6;
  xi        =  0.2;
  lambda    =  0.2151;
  Delta     =  0.3052;

  Q_0^2           = 2.25;
  Chi_S           = 1.0;
  Shower_Min_KT2  = 4.0;
  Diff_Factor     = 4.0;
  KT2_Factor      = 4.0;
  RescProb        = 2.0;
  RescProb1       = 0.5;
  Q_RC^2          = 0.9;
  ReconnProb      = -25.;
  Resc_KTMin      = off;

  Misha           = 0
}(run)

(beam){
  BEAM_1 =  2212; BEAM_ENERGY_1 = 3500.;
  BEAM_2 =  2212; BEAM_ENERGY_2 = 3500.;
}(beam)

(analysis){
  BEGIN_RIVET {
  -a ATLAS_2010_S8918562 ATLAS_2010_S8894728 ATLAS_2011_S8994773 ATLAS_2012_I1084540 TOTEM_2012_DNDETA ATLAS_2011_I919017 CMS_2011_S8978280 CMS_2011_S9120041 CMS_2011_S9215166 CMS_2010_S8656010 CMS_2011_S8884919 CMS_QCD_10_024
  } END_RIVET
}(analysis)

(me){
  ME_SIGNAL_GENERATOR = None
}(me)


</pre></pre></div>
</div>

<p>Things to notice:
</p><ul>
<li> The SHRiMPS model is not properly tuned yet &ndash; all parameters are set 
      to very natural values, such as for example 1.0 GeV for infrared
      parameters.
</li><li> Eleastic scattering and low-mass diffraction are not included.
</li><li> A large number of Minimum Bias-type analyses is enabled.
</li></ul>
 

<hr>
<a name="BFactories"></a>
<a name="Setups-for-event-production-at-B_002dfactories"></a>
<h2 class="section">9.11 Setups for event production at B-factories</h2>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#QCD-continuum">9.11.1 QCD continuum</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Signal-process">9.11.2 Signal process</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Single-hadron-decay-chains">9.11.3 Single hadron decay chains</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<a name="QCD-continuum"></a>
<a name="QCD-continuum-1"></a>
<h3 class="subsection">9.11.1 QCD continuum</h3>

<p>Example setup for QCD continuum production at the Belle/KEK collider.
Please note, it does not include any hadronic resonance.
</p><div class="example">
<div class="smallformat">
<pre class="example"><pre class="verbatim">(run){
  % general settings
  EVENTS 5M;
  % model parameters
  ALPHAS(MZ) 0.1188;
  ORDER_ALPHAS 1;
  MASSIVE[4] 1;
  MASSIVE[5] 1;
  MASSIVE_PS 3;
  % collider setup
  BEAM_1  11; BEAM_ENERGY_1 7.;
  BEAM_2 -11; BEAM_ENERGY_2 4.;
}(run)

(processes){
  Process 11 -11 -&gt; 93 93;
  Order (*,2);
  End process;
  Process 11 -11 -&gt; 4 -4;
  Order (*,2);
  End process;
  Process 11 -11 -&gt; 5 -5;
  Order (*,2);
  End process;
}(processes)
</pre></pre></div>
</div>

<p>Things to notice:
</p><ul>
<li> Asymmetric beam energies, photon ISR is switched on per default.
</li><li> Full mass effects of c and b quarks computed.
</li><li> Strong coupling constant value set to 0.1188 and two loop (NLO)
       running.
</li></ul>

<hr>
<a name="Signal-process"></a>
<a name="Signal-process-1"></a>
<h3 class="subsection">9.11.2 Signal process</h3>

<p>Example setup for B-hadron pair production on the Y(4S) pole.
</p><div class="example">
<div class="smallformat">
<pre class="example"><pre class="verbatim">(run){
  % general settings
  EVENTS 5M;
  % model parameters
  ALPHAS(MZ) 0.1188;
  ORDER_ALPHAS 1;
  MASSIVE[4] 1;
  MASSIVE[5] 1;
  MASSIVE_PS 3;
  ME_SIGNAL_GENERATORS Internal;
  SCALES VAR{sqr(91.2)};
  % collider setup
  BEAM_1  11; BEAM_ENERGY_1 7.;
  BEAM_2 -11; BEAM_ENERGY_2 4.;
}(run)

(processes){
  #
  # electron positron -&gt; Y(4S) -&gt; B+ B-
  #
  Process 11 -11 -&gt; 300553[a];
  Decay 300553[a] -&gt; 521 -521;
  End process;
  #
  # electron positron -&gt; Y(4S) -&gt; B0 B0bar
  #
  Process 11 -11 -&gt; 300553[a];
  Decay 300553[a] -&gt; 511 -511;
  End process;
}(processes)
</pre></pre></div>
</div>

<p>Things to notice:
</p><ul>
<li> Same setup as <a href="#QCD-continuum">QCD continuum</a>, except for process specification.
</li><li> Production of both B0 and B+ pairs, in due proportion.
</li></ul>

<hr>
<a name="Single-hadron-decay-chains"></a>
<a name="Single-hadron-decay-chains-1"></a>
<h3 class="subsection">9.11.3 Single hadron decay chains</h3>

<p>This setup is not a collider setup, but a simulation of a hadronic
decay chain.
</p><div class="example">
<div class="smallformat">
<pre class="example"><pre class="verbatim">(run){
  % general settings
  EVENTS 5M;
  EVENT_TYPE HadronDecay;

  % specify hadron to be decayed
  DECAYER 511;

  % initialise rest for Sherpa not to complain
  % model parameters
  ME_SIGNAL_GENERATORS Internal;
  SCALES VAR{sqr(91.2)};
  % collider setup
  BEAM_1  11; BEAM_ENERGY_1 7.;
  BEAM_2 -11; BEAM_ENERGY_2 4.;
#  ANALYSIS=Rivet
}(run)

(processes){
  Process 11 -11 -&gt; 13 -13;
  End process;
}(processes)

#(analysis){
#  BEGIN_RIVET {
#  -a BELLE_2015_I1397632
#  } END_RIVET
#}(analysis)
</pre></pre></div>
</div>

<p>Things to notice:
</p><ul>
<li> <code>EVENT_TYPE</code> is set to <code>HadronDecay</code>.
</li><li> <code>DECAYER</code> specifies the hadron flavour initialising the decay
      chain.
</li><li> A place holder process is declared such that the Sherpa framework
      can be initialised. That process will not be used.
</li></ul>


<hr>
<a name="MEvalues"></a>
<a name="Calculating-matrix-element-values-for-externally-given-configurations"></a>
<h2 class="section">9.12 Calculating matrix element values for externally given configurations</h2>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Matrix-Element-values-through-Python-interface">9.12.1 Computing matrix elements for idividual phase space points using the Python Interface</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Matrix-Element-values-through-C_002b_002b-interface">9.12.2 Computing matrix elements for idividual phase space points using the C++ Interface</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<a name="Matrix-Element-values-through-Python-interface"></a>
<a name="Computing-matrix-elements-for-idividual-phase-space-points-using-the-Python-Interface"></a>
<h3 class="subsection">9.12.1 Computing matrix elements for idividual phase space points using the Python Interface</h3>
<p>Sherpa&rsquo;s Python interface (see <a href="#Python-Interface">Python Interface</a>) can be used to
compute matrix elemtents for individual phase space points.  Access to a
designated class &ldquo;MEProcess&rdquo; is provided by interface to compute
matrix elements as illustrated in the example script.
</p>
<p>Please note that the process in the script must be compatible with the
one specified in the run card in the working directory. A random phase
space point for the process of interes can be generated as shown in the
example.
</p>
<p>If AMEGIC++ is used as the matrix element generator, executing the
script will result in AMEGIC++ writing out libraries and exiting.
After compiling the libraries using <code>./makelibs</code>, the script must
be executed again in order to obtain the matrix element.
</p>
<div class="example">
<div class="smallformat">
<pre class="example"><pre class="verbatim">#!/usr/bin/env python2
@LOADMPIFORPY@
import sys
sys.path.append('@PYLIBDIR@')
import Sherpa

# Add this to the execution arguments to prevent Sherpa from starting the cross section integration
sys.argv.append('INIT_ONLY=2')

Generator=Sherpa.Sherpa()
try:
    Generator.InitializeTheRun(len(sys.argv),sys.argv)
    Process=Sherpa.MEProcess(Generator)

    # Incoming flavors must be added first!
    Process.AddInFlav(11);
    Process.AddInFlav(-11);
    Process.AddOutFlav(1);
    Process.AddOutFlav(-1);
    Process.Initialize();

    # First argument corresponds to particle index:
    # index 0 correspons to particle added first, index 1 is the particle added second, and so on...
    Process.SetMomentum(0, 45.6,0.,0.,45.6)
    Process.SetMomentum(1, 45.6,0.,0.,-45.6)
    Process.SetMomentum(2, 45.6,0.,45.6,0.)
    Process.SetMomentum(3, 45.6,0.,-45.6,0.)
    print '\nSquared ME: ', Process.CSMatrixElement()

    # Momentum setting via list of floats
    Process.SetMomenta([[45.6,0.,0.,45.6],
                        [45.6,0.,0.,-45.6],
                        [45.6,0.,45.6,0.],
                        [45.6,0.,-45.6,0.]])
    print '\nSquared ME: ', Process.CSMatrixElement()
    
    # Random momenta
    E_cms = 500.0
    tp = Process.TestPoint(E_cms)
    print '\nRandom test point: ', tp[0], tp[1], tp[2], tp[3]
    print 'Squared ME: ', Process.CSMatrixElement(), '\n'

except Sherpa.Exception as exc:
    print exc
    exit(1)
</pre></pre></div>
</div>

<hr>
<a name="Matrix-Element-values-through-C_002b_002b-interface"></a>
<a name="Computing-matrix-elements-for-idividual-phase-space-points-using-the-C_002b_002b-Interface"></a>
<h3 class="subsection">9.12.2 Computing matrix elements for idividual phase space points using the C++ Interface</h3>
<a name="index-NUMBER_005fOF_005fPOINTS"></a>
<a name="index-MOMENTA_005fDATA_005fFILE"></a>

<p>Matrix elements values for user defined phase space points can also be
quarried using a small C++ executable provided in <code>Examples/API/ME2</code>.
It can be compiled using the provided <code>Makefile</code>. The test program is
then run typing (note: the <code>LD_LIBRARY_PATH</code> must be set to include
<code>&lt;Sherpa-installation&gt;/lib/SHERPA-MC</code>)
</p>
<pre class="verbatim">./test &lt;options&gt;
</pre>
<p>where the usual options for Sherpa are passed. An example run card, giving
both the process and the requested phase space points looks like
</p>
<div class="example">
<div class="smallformat">
<pre class="example"><pre class="verbatim">(run){
  EVENTS 0;
  INIT_ONLY 2;
}(run)

(beam){
  BEAM_1  11; BEAM_ENERGY_1 45.6;
  BEAM_2 -11; BEAM_ENERGY_2 45.6;
}(beam)

(isr){
  PDF_LIBRARY None;
}(isr)

(processes){
  Process 11 -11 -&gt; 2 -2 21 21 21 21
  End process;
}(processes)

(momenta){
  NUMBER_OF_POINTS 4
  Point 1
  11  45.6   0.0   0.0  45.6
 -11  45.6   0.0   0.0 -45.6
  21  10.0   0.0   0.0 -10.0 1 2
  21  10.0   0.0   0.0  10.0 2 3
  21  10.0  10.0   0.0   0.0 3 1
  21  10.0 -10.0   0.0   0.0 1 3
   2  25.6   0.0  25.6   0.0 3 0
  -2  25.6   0.0 -25.6   0.0 0 1
  End point
  Point 2
  11  45.6   0.0   0.0  45.6
 -11  45.6   0.0   0.0 -45.6
  21  12.0   0.0   0.0 -12.0 1 2
  21  12.0   0.0   0.0  12.0 2 3
  21  12.0  12.0   0.0   0.0 3 1
  21  12.0 -12.0   0.0   0.0 1 3
   2  21.6   0.0  21.6   0.0 3 0
  -2  21.6   0.0 -21.6   0.0 0 1
  End point
  Point 3
  11  45.6   0.0   0.0  45.6
 -11  45.6   0.0   0.0 -45.6
  21  14.0   0.0   0.0 -14.0 1 2
  21  14.0   0.0   0.0  14.0 2 3
  21  14.0  14.0   0.0   0.0 3 1
  21  14.0 -14.0   0.0   0.0 1 3
   2  17.6   0.0  17.6   0.0 3 0
  -2  17.6   0.0 -17.6   0.0 0 1
  End point
  Point 4
  11  45.6   0.0   0.0  45.6
 -11  45.6   0.0   0.0 -45.6
  21  16.0   0.0   0.0 -16.0 1 2
  21  16.0   0.0   0.0  16.0 2 3
  21  16.0  16.0   0.0   0.0 3 1
  21  16.0 -16.0   0.0   0.0 1 3
   2  13.6   0.0  13.6   0.0 3 0
  -2  13.6   0.0 -13.6   0.0 0 1
  End point
}(momenta)
</pre></pre></div>
</div>

<p>Please note that both the process and the beam specifications need to be
present in order for Sherpa to initialise properly. The momenta need to be
given in the proper ordering employed in Sherpa, which can be read from the
process name printed on screen. For each entry the sequence is the following
</p>
<pre class="verbatim">  &lt;pdg-id&gt; &lt;E&gt; &lt;px&gt; &lt;py&gt; &lt;pz&gt; [triplet-index antitriplet-index]
</pre>
<p>with the colour indices ranging from 1..3 for both the triplet and the
antitriplet index in the colour-flow basis. The colour information is only
needed if Comix is used for the calculation as Comix then also gives the
squared matrix element value for this colour cinfiguration. In any case, the
colour-summed value is printed to screen.
</p>
<p>Alternatively, the momenta can be given in a separate file specified through
<code>MOMENTA_DATA_FILE=&lt;file&gt;</code>.
</p>

<hr>
<a name="APIexamples"></a>
<a name="Using-the-Python-interface"></a>
<h2 class="section">9.13 Using the Python interface</h2>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Events">9.13.1 Generate events using scripts</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"> Generating events
</td></tr>
<tr><td align="left" valign="top"><a href="#MPIEvents">9.13.2 Generate events with MPI using scripts</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"> Generating events with MPI
</td></tr>
</table>

<hr>
<a name="Events"></a>
<a name="Generate-events-using-scripts"></a>
<h3 class="subsection">9.13.1 Generate events using scripts</h3>

<p>This example shows how to generate events with Sherpa
using a Python wrapper script. For each event the weight,
the number of trials and the particle information is printed
to stdout. This script can be used as a basis for constructing
interfaces to own analysis routines.
</p>
<div class="example">
<div class="smallformat">
<pre class="example"><pre class="verbatim">#!/usr/bin/python2
@LOADMPIFORPY@
import sys
sys.path.append('@PYLIBDIR@')
import Sherpa

Generator=Sherpa.Sherpa()
try:
    Generator.InitializeTheRun(len(sys.argv),sys.argv)
    Generator.InitializeTheEventHandler()
    for n in range(1,1+Generator.NumberOfEvents()):
        Generator.GenerateOneEvent()
        blobs=Generator.GetBlobList();
        print &quot;Event&quot;,n,&quot;{&quot;
        ## print blobs
        print &quot;  Weight &quot;,blobs.GetFirst(1)[&quot;Weight&quot;];
        print &quot;  Trials &quot;,blobs.GetFirst(1)[&quot;Trials&quot;];
        for i in range(0,blobs.size()):
            print &quot;  Blob&quot;,i,&quot;{&quot;
            ## print blobs[i];
            print &quot;    Incoming particles&quot;
            for j in range(0,blobs[i].NInP()):
                part=blobs[i].InPart(j)
                ## print part
                s=part.Stat()
                f=part.Flav()
                p=part.Momentum()
                print &quot;     &quot;,j,&quot;: &quot;,s,f,p
            print &quot;    Outgoing particles&quot;
            for j in range(0,blobs[i].NOutP()):
                part=blobs[i].OutPart(j)
                ## print part
                s=part.Stat()
                f=part.Flav()
                p=part.Momentum()
                print &quot;     &quot;,j,&quot;: &quot;,s,f,p
            print &quot;  } Blob&quot;,i
        print &quot;} Event&quot;,n
        if ((n%100)==0): print &quot;  Event &quot;,n
    Generator.SummarizeRun()
        
except Sherpa.Exception as exc:
    exit(1)
</pre></pre></div>
</div>
<hr>
<a name="MPIEvents"></a>
<a name="Generate-events-with-MPI-using-scripts"></a>
<h3 class="subsection">9.13.2 Generate events with MPI using scripts</h3>

<p>This example shows how to generate events with Sherpa
using a Python wrapper script and MPI. For each event the weight,
the number of trials and the particle information is send to the
MPI master node and written into a single gzip&rsquo;ed output file.
Note that you need the <a href="http://mpi4py.scipy.org">mpi4py</a>
module to run this Example. Sherpa must be configured and 
installed using &lsquo;<samp>--enable-mpi</samp>&rsquo;, see <a href="#MPI-parallelization">MPI parallelization</a>.
</p>
<div class="example">
<div class="smallformat">
<pre class="example"><pre class="verbatim">#!/usr/bin/python2
@LOADMPIFORPY@
import sys
sys.path.append('@PYLIBDIR@')
import Sherpa
import gzip

class MyParticle:
    def __init__(self,p):
        self.kfc=p.Flav().Kfcode()
        if p.Flav().IsAnti(): self.kfc=-self.kfc
        self.E=p.Momentum()[0]
        self.px=p.Momentum()[1]
        self.py=p.Momentum()[2]
        self.pz=p.Momentum()[3]
    def __str__(self):
        return (str(self.kfc)+&quot; &quot;+str(self.E)+&quot; &quot;
                +str(self.px)+&quot; &quot;+str(self.py)+&quot; &quot;+str(self.pz))

Generator=Sherpa.Sherpa()
try:
    Generator.InitializeTheRun(len(sys.argv),sys.argv)
    Generator.InitializeTheEventHandler()
    comm=MPI.COMM_WORLD
    rank=comm.Get_rank()
    size=comm.Get_size()
    if rank==0:
        outfile=gzip.GzipFile(&quot;events.gz&quot;,'w')
        for n in range(1,1+Generator.NumberOfEvents()):
            for t in range(1,size):
                weight=comm.recv(source=t,tag=t)
                trials=comm.recv(source=t,tag=2*t)
                parts=comm.recv(source=t,tag=3*t)
                outfile.write(&quot;E &quot;+str(weight)+&quot; &quot;+str(trials)+&quot;\n&quot;)
                for p in parts:
                    outfile.write(str(p)+&quot;\n&quot;)
            if (n%100)==0: print &quot;  Event&quot;,n
        outfile.close()
    else:
        for n in range(1,1+Generator.NumberOfEvents()):
            Generator.GenerateOneEvent()
            blobs=Generator.GetBlobList();
            weight=blobs.GetFirst(1)[&quot;Weight&quot;]
            trials=blobs.GetFirst(1)[&quot;Trials&quot;]
            parts=[]
            for i in range(0,blobs.size()):
                for j in range(0,blobs[i].NOutP()):
                    part=blobs[i].OutPart(j)
                    if part.Stat()==1 and part.HasDecBlob()==0:
                        parts.append(MyParticle(part))
            comm.send(weight,dest=0,tag=rank)
            comm.send(trials,dest=0,tag=2*rank)
            comm.send(parts,dest=0,tag=3*rank)
    Generator.SummarizeRun()

except Sherpa.Exception as exc:
    exit(1)
</pre></pre></div>
</div>


<hr>
<a name="Getting-help"></a>
<a name="Getting-help-1"></a>
<h1 class="chapter">10 Getting help</h1>

<p>If Sherpa exits abnormally, first check the Sherpa output 
for hints on the reason of program abort, and try to figure 
out what has gone wrong with the help of the Manual. Note 
that Sherpa throwing a ‘normal_exit’ exception does not 
imply any abnormal program termination! When using AMEGIC++
Sherpa will exit with the message:
</p><div class="example">
<pre class="example">   New libraries created. Please compile.
</pre></div>
<p>In this case, follow the instructions given in
<a href="#Running-Sherpa-with-AMEGIC_002b_002b">Running Sherpa with AMEGIC++</a>.
</p>
<p>If this does not help, contact the Sherpa team (see the 
Sherpa Team section of the website 
<a href="http://sherpa.hepforge.org">sherpa.hepforge.org</a>), providing 
all information on your setup. Please include
</p><ol>
<li> A complete tarred and gzipped set of the &lsquo;<samp>.dat</samp>&rsquo; 
files leading to the crash. Use the status recovery directory 
<code>Status__&lt;date of crash&gt;</code> produced before the program abort.
</li><li> The command line (including possible parameters) you used to start Sherpa.
</li><li> The installation log file, if available.
</li></ol>


<hr>
<a name="Authors"></a>
<a name="Authors-1"></a>
<h1 class="chapter">11 Authors</h1>

<p>Sherpa was written by the Sherpa Team, see 
<a href="http://sherpa.hepforge.org">sherpa.hepforge.org</a>.
</p>

<hr>
<a name="Copying"></a>
<a name="Copying-1"></a>
<h1 class="chapter">12 Copying</h1>

<p>Sherpa is free software.   
You can redistribute it and/or modify it under the
terms of the GNU General Public License as published by the  
Free Software Foundation. You should have received a copy 
of the GNU General Public License along with the source  
for Sherpa; see the file COPYING. If not, write
to the Free Software Foundation, 59 Temple Place, Suite 330, 
Boston, MA  02111-1307, USA.
</p>
<p>Sherpa is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty  
of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.   
See the GNU General Public License for more details.
</p>
<p>Sherpa was created during the Marie Curie RTN&rsquo;s HEPTOOLS, MCnet and LHCphenonet.
The MCnet Guidelines apply, see the file GUIDELINES and
<a href="http://www.montecarlonet.org/index.php?p=Publications/Guidelines">http://www.montecarlonet.org/index.php?p=Publications/Guidelines</a>.
</p>

<hr>
<a name="References"></a>
<a name="References-1"></a>
<h1 class="appendix">Appendix A References</h1>
<ul class="no-bullet">
<li>
<a name="Alekhin2005dx"></a>[<a href="http://inspirehep.net/search?p=hep-ph/0601012">Ale05</a>] 
S. Alekhin and others, <em>HERA and the LHC - A workshop on the implications of HERA for LHC physics: Proceedings Part A</em>,  <b></b>   hep-ph/0601012.
<br>
<br>
</li><li>
<a name="Alioli2013nda"></a>[<a href="http://inspirehep.net/search?p=">Ali13</a>] 
S. Alioli and others, <em>Update of the Binoth Les Houches Accord for a standard interface between Monte Carlo tools and one-loop programs</em>,  <b></b>   arXiv:1308.3462.
<br>
<br>
</li><li>
<a name="Alwall2007fs"></a>[<a href="http://inspirehep.net/search?p=arXiv:0706.2569">Alw07</a>] 
J. Alwall and others, <em>Comparative study of various algorithms for the merging of parton showers and matrix elements in hadronic collisions</em>, Eur. Phys. J. <b>C53</b> (2008) 473-500 [arXiv:0706.2569].
<br>
<br>
</li><li>
<a name="Archibald2008aa"></a>[<a href="http://inspirehep.net/search?p=F+J+Nucl. Phys.%2C179%2C218">Arc08</a>] 
J. Archibald and T. Gleisberg and S. Hoche and F.  Krauss and M. Schonherr and S. Schumann and F.  Siegert and J. C. Winter, <em>Simulation of photon-photon interactions in hadron collisions with Sherpa</em>, Nucl. Phys. <b>179</b> (2008) 218-225 .
<br>
<br>
</li><li>
<a name="Bahr2008pv"></a>[<a href="http://inspirehep.net/search?p=arXiv:0803.0883">Bah08b</a>] 
M. Bahr and others, <em>Herwig++ Physics and Manual</em>, Eur. Phys. J. <b>C58</b> (2008) 639-707 [arXiv:0803.0883].
<br>
<br>
</li><li>
<a name="Ball2008by"></a>[<a href="http://inspirehep.net/search?p=arXiv:0808.1231">Bal08</a>] 
R. D. Ball and others, <em>A determination of parton distributions with faithful uncertainty estimation</em>, Nucl. Phys. <b>B809</b> (2009) 1-63 [arXiv:0808.1231].
<br>
<br>
</li><li>
<a name="Ball2009mk"></a>[<a href="http://inspirehep.net/search?p=arXiv:0906.1958">Bal09</a>] 
R. D. Ball and others, <em>Precision determination of electroweak parameters and the strange content of the proton from neutrino deep-inelastic scattering</em>, Nucl. Phys. <b>B823</b> (2009) 195-233 [arXiv:0906.1958].
<br>
<br>
</li><li>
<a name="Ballestrero1992dv"></a>[<a href="http://inspirehep.net/search?p=hep-ph/9212246">Bal92</a>] 
A. Ballestrero and E. Maina and S. Moretti, <em>Heavy quarks and leptons at e^+e^- colliders</em>, Nucl. Phys. <b>B415</b> (1994) 265-292 [hep-ph/9212246].
<br>
<br>
</li><li>
<a name="Barberio1993qi"></a>[<a href="http://inspirehep.net/search?p=F+J+Comput. Phys. Commun.%2C79%2C291">Bar93</a>] 
E. Barberio and Z. Wc as, <em>PHOTOS - a universal monte carlo for QED radiative corrections: version 2.0</em>, Comput. Phys. Commun. <b>79</b> (1994) 291-308 .
<br>
<br>
</li><li>
<a name="Bern2002jx"></a>[<a href="http://inspirehep.net/search?p=hep-ph/0206194">Ber02</a>] 
Z. Bern and L. J. Dixon and C. Schmidt, <em>Isolating a light Higgs boson from the di-photon background at the LHC</em>, Phys. Rev. <b>D66</b> (2002) 074018 [hep-ph/0206194].
<br>
<br>
</li><li>
<a name="Berger2009ep"></a>[<a href="http://inspirehep.net/search?p=arXiv:0907.1984">Ber09a</a>] 
C. F. Berger and Z. Bern and L. J. Dixon and F. Febres-Cordero and D. Forde and T. Gleisberg and H. Ita and D. A. Kosower and D. Ma^itre, <em>Next-to-leading order QCD predictions for W+3-Jet distributions at hadron colliders</em>, Phys. Rev. <b>D80</b> (2009) 074036 [arXiv:0907.1984].
<br>
<br>
</li><li>
<a name="Berends1994pv"></a>[<a href="http://inspirehep.net/search?p=hep-ph/9404313">Ber94</a>] 
F. A. Berends and R. Pittau and R. Kleiss, <em>All electroweak four-fermion processes in electron-positron collisions</em>, Nucl. Phys. <b>B424</b> (1994) 308 [hep-ph/9404313].
<br>
<br>
</li><li>
<a name="Binoth2010xt"></a>[<a href="http://inspirehep.net/search?p=arXiv:1001.1307">Bin10a</a>] 
T. Binoth and others, <em>A proposal for a standard interface between Monte Carlo tools and one-loop programs</em>, Comput. Phys. Commun. <b>181</b> (2010) 1612-1622 [arXiv:1001.1307].
<br>
<br>
</li><li>
<a name="Budnev1974de"></a>[<a href="http://inspirehep.net/search?p=F+J+Phys. Rept.%2C15%2C181">Bud74</a>] 
V. M. Budnev and I. F. Ginzburg and G. V. Meledin and V. G. Serbo, <em>The two photon particle production mechanism. Physical problems. Applications. Equivalent photon approximation</em>, Phys. Rept. <b>15</b> (1974) 181-281 .
<br>
<br>
</li><li>
<a name="Cacciari2008gp"></a>[<a href="http://inspirehep.net/search?p=arXiv:0802.1189">Cac08</a>] 
M. Cacciari and G. P. Salam and G. Soyez, <em>The Anti-k(t) jet clustering algorithm</em>, JHEP <b>0804</b> (2008) 063 [arXiv:0802.1189].
<br>
<br>
</li><li>
<a name="Carli2009cg"></a>[<a href="http://inspirehep.net/search?p=arXiv:0912.3715">Car09</a>] 
T. Carli and T. Gehrmann and S. Hoche, <em>Hadronic final states in deep-inelastic scattering with Sherpa</em>, Eur. Phys. J. <b>C67</b> (2010) 73 [arXiv:0912.3715].
<br>
<br>
</li><li>
<a name="Cascioli2011va"></a>[<a href="http://inspirehep.net/search?p=arXiv:1111.5206">Cas11</a>] 
F. Cascioli and P. Maierhofer and S. Pozzorini, <em>Scattering Amplitudes with Open Loops</em>, Eur.Phys.J. <b>C72</b> (2012) 1889 [arXiv:1111.5206].
<br>
<br>
</li><li>
<a name="Catani2001cc"></a>[<a href="http://inspirehep.net/search?p=hep-ph/0109231">Cat01a</a>] 
S. Catani and F. Krauss and R. Kuhn and B. R. Webber, <em>QCD matrix elements + parton showers</em>, JHEP <b>11</b> (2001) 063 [hep-ph/0109231].
<br>
<br>
</li><li>
<a name="Catani2002hc"></a>[<a href="http://inspirehep.net/search?p=hep-ph/0201036">Cat02</a>] 
S. Catani and S. Dittmaier and M. H. Seymour and Z.  Trocsanyi, <em>The dipole formalism for next-to-leading order QCD calculations with massive partons</em>, Nucl. Phys. <b>B627</b> (2002) 189-265 [hep-ph/0201036].
<br>
<br>
</li><li>
<a name="Catani1996vz"></a>[<a href="http://inspirehep.net/search?p=hep-ph/9605323">Cat96b</a>] 
S. Catani and M. H. Seymour, <em>A general algorithm for calculating jet cross sections in NLO QCD</em>, Nucl. Phys. <b>B485</b> (1997) 291-419 [hep-ph/9605323].
<br>
<br>
</li><li>
<a name="Christensen2008py"></a>[<a href="http://inspirehep.net/search?p=arXiv:0806.4194">Chr08</a>] 
N. D. Christensen and C. Duhr, <em>FeynRules - Feynman rules made easy</em>, Comput. Phys. Commun. <b>180</b> (2009) 1614-1641 [arXiv:0806.4194].
<br>
<br>
</li><li>
<a name="Christensen2009jx"></a>[<a href="http://inspirehep.net/search?p=arXiv:0906.2474">Chr09</a>] 
N. D. Christensen and P. de Aquino and C. Degrande and  C. Duhr and B. Fuks and M. Herquet and F. Maltoni and S. Schumann, <em>A comprehensive approach to new physics simulations</em>, Eur. Phys. J. <b>C71</b> (2011) 1541 [arXiv:0906.2474].
<br>
<br>
</li><li>
<a name="Dawson2002tg"></a>[<a href="http://inspirehep.net/search?p=hep-ph/0211438">Daw02</a>] 
S. Dawson and L.H. Orr and L. Reina and D. Wackeroth, <em>Associated top quark Higgs boson production at the LHC</em>, Phys.Rev. <b>D67</b> (2003) 071503 [hep-ph/0211438].
<br>
<br>
</li><li>
<a name="Dawson2003zu"></a>[<a href="http://inspirehep.net/search?p=hep-ph/0305087">Daw03</a>] 
S. Dawson and C. Jackson and L.H. Orr and L. Reina and  D. Wackeroth, <em>Associated Higgs production with top quarks at the large hadron collider: NLO QCD corrections</em>, Phys.Rev. <b>D68</b> (2003) 034022 [hep-ph/0305087].
<br>
<br>
</li><li>
<a name="Degrande2011ua"></a>[<a href="http://inspirehep.net/search?p=arXiv:1108.2040">Deg11</a>] 
C. Degrande and C. Duhr and B. Fuks and D. Grellscheid and O. Mattelaer and T. Reiter, <em>UFO - The Universal FeynRules Output</em>, Comput. Phys. Commun. <b>138</b> (2012) 1201 [arXiv:1108.2040].
<br>
<br>
</li><li>
<a name="Dixon2013haa"></a>[<a href="http://inspirehep.net/search?p=arXiv:1305.3854">Dix13</a>] 
L. J. Dixon and Y. Li, <em>Bounding the Higgs Boson Width Through Interferometry</em>,  <b></b>   arXiv:1305.3854.
<br>
<br>
</li><li>
<a name="Draggiotis2000gm"></a>[<a href="http://inspirehep.net/search?p=hep-ph/0004047">Dra00</a>] 
P. D. Draggiotis and A. van Hameren and R. Kleiss, <em>SARGE: An algorithm for generating QCD-antennas</em>, Phys. Lett. <b>B483</b> (2000) 124-130 [hep-ph/0004047].
<br>
<br>
</li><li>
<a name="Duhr2006iq"></a>[<a href="http://inspirehep.net/search?p=hep-ph/0607057">Duh06</a>] 
C. Duhr and S. Hoche and F. Maltoni, <em>Color-dressed recursive relations for multi-parton amplitudes</em>, JHEP <b>08</b> (2006) 062 [hep-ph/0607057].
<br>
<br>
</li><li>
<a name="FebresCordero2006sj"></a>[<a href="http://inspirehep.net/search?p=hep-ph/0606102">Feb06</a>] 
F. Febres Cordero and L. Reina and D. Wackeroth, <em>NLO QCD corrections to W boson production with a massive b-quark jet pair at the Tevatron p anti-p collider</em>, Phys.Rev. <b>D74</b> (2006) 034007 [hep-ph/0606102].
<br>
<br>
</li><li>
<a name="Field1982dg"></a>[<a href="http://inspirehep.net/search?p=F+J+Nucl. Phys.%2CB213%2C65">Fie82a</a>] 
R. D. Field and S. Wolfram, <em>A QCD model for e^+e^- annihilation</em>, Nucl. Phys. <b>B213</b> (1983) 65 .
<br>
<br>
</li><li>
<a name="Frixione1998jh"></a>[<a href="http://inspirehep.net/search?p=hep-ph/9801442">Fri98</a>] 
S. Frixione, <em>Isolated photons in perturbative QCD</em>, Phys. Lett. <b>B429</b> (1998) 369-374 [hep-ph/9801442].
<br>
<br>
</li><li>
<a name="Gao2013xoa"></a>[<a href="http://inspirehep.net/search?p=arXiv:1302.6246">Gao13</a>] 
J. Gao and M. Guzzi and J. Huston and H. L. Lai and Z.  Li and others, <em>The CT10 NNLO Global Analysis of QCD</em>,  <b></b>   arXiv:1302.6246.
<br>
<br>
</li><li>
<a name="Gehrmann2012yg"></a>[<a href="http://inspirehep.net/search?p=arXiv:1207.5031">Geh12</a>] 
T. Gehrmann and S. Hoche and F. Krauss and  M. Schonherr and F. Siegert, <em>NLO QCD matrix elements + parton showers in e^+e^- -&gt; hadrons</em>, JHEP <b>01</b> (2013) 144 [arXiv:1207.5031].
<br>
<br>
</li><li>
<a name="Gleisberg2003bi"></a>[<a href="http://inspirehep.net/search?p=hep-ph/0311273">Gle03b</a>] 
T. Gleisberg and F. Krauss and C. G. Papadopoulos and  A. Schalicke and S. Schumann, <em>Cross sections for multi-particle final states at a linear collider</em>, Eur. Phys. J. <b>C34</b> (2004) 173-180 [hep-ph/0311273].
<br>
<br>
</li><li>
<a name="Gleisberg2005qq"></a>[<a href="http://inspirehep.net/search?p=hep-ph/0504032">Gle05</a>] 
T. Gleisberg and F. Krauss and A. Schalicke and S.  Schumann and J. C. Winter, <em>Studying W^+ W^- production at the Fermilab Tevatron with Sherpa</em>, Phys. Rev. <b>D72</b> (2005) 034028 [hep-ph/0504032].
<br>
<br>
</li><li>
<a name="Gleisberg2007md"></a>[<a href="http://inspirehep.net/search?p=arXiv:0709.2881">Gle07</a>] 
T. Gleisberg and F. Krauss, <em>Automating dipole subtraction for QCD NLO calculations</em>, Eur. Phys. J. <b>C53</b> (2008) 501-523 [arXiv:0709.2881].
<br>
<br>
</li><li>
<a name="Gleisberg2008fv"></a>[<a href="http://inspirehep.net/search?p=arXiv:0808.3674">Gle08</a>] 
T. Gleisberg and S. Hoche, <em>Comix a new matrix element generator</em>, JHEP <b>12</b> (2008) 039 [arXiv:0808.3674].
<br>
<br>
</li><li>
<a name="Gleisberg2008ta"></a>[<a href="http://inspirehep.net/search?p=arXiv:0811.4622">Gle08b</a>] 
T. Gleisberg and S. Hoche and F. Krauss and  M. Schonherr and S. Schumann and F Siegert and J. Winter, <em>Event generation with Sherpa 1.1</em>, JHEP <b>02</b> (2009) 007 [arXiv:0811.4622].
<br>
<br>
</li><li>
<a name="Gluck1991ee"></a>[<a href="http://inspirehep.net/search?p=F+J+Phys. Rev.%2CD45%2C3986">Glu91</a>] 
M. Gluck and E. Reya and A. Vogt, <em>Parton structure of the photon beyond the leading order</em>, Phys. Rev. <b>D45</b> (1992) 3986-3994 .
<br>
<br>
</li><li>
<a name="Gluck1991jc"></a>[<a href="http://inspirehep.net/search?p=F+J+Phys. Rev.%2CD46%2C1973">Glu91a</a>] 
M. Gluck and E. Reya and A. Vogt, <em>Photonic parton distributions</em>, Phys. Rev. <b>D46</b> (1992) 1973-1979 .
<br>
<br>
</li><li>
<a name="Gottschalk1982yt"></a>[<a href="http://inspirehep.net/search?p=F+J+Nucl. Phys.%2CB214%2C201">Got82</a>] 
T. D. Gottschalk, <em>A realistic model for e^+e^- annihilation including parton bremsstrahlung effects</em>, Nucl. Phys. <b>B214</b> (1983) 201 .
<br>
<br>
</li><li>
<a name="Gottschalk1983fm"></a>[<a href="http://inspirehep.net/search?p=F+J+Nucl. Phys.%2CB239%2C349">Got83</a>] 
T. D. Gottschalk, <em>An improved description of hadronization in the QCD cluster model for e^+e^- annihilation</em>, Nucl. Phys. <b>B239</b> (1984) 349 .
<br>
<br>
</li><li>
<a name="Gottschalk1986bv"></a>[<a href="http://inspirehep.net/search?p=F+J+Nucl. Phys.%2CB288%2C729">Got86</a>] 
T. D. Gottschalk and D. A. Morris, <em>A new model for hadronization and e^+e^- annihilation</em>, Nucl. Phys. <b>B288</b> (1987) 729 .
<br>
<br>
</li><li>
<a name="Hagiwara2005wg"></a>[<a href="http://inspirehep.net/search?p=hep-ph/0512260">Hag05</a>] 
K. Hagiwara and others, <em>Supersymmetry simulations with off-shell effects for the CERN LHC and an ILC</em>, Phys. Rev. <b>D73</b> (2006) 055005 [hep-ph/0512260].
<br>
<br>
</li><li>
<a name="vanHameren2002tc"></a>[<a href="http://inspirehep.net/search?p=hep-ph/0204055">Ham02</a>] 
A. van Hameren and C. G. Papadopoulos, <em>A hierarchical phase space generator for QCD antenna structures</em>, Eur. Phys. J. <b>C25</b> (2002) 563-574 [hep-ph/0204055].
<br>
<br>
</li><li>
<a name="Hamilton2009ne"></a>[<a href="http://inspirehep.net/search?p=arXiv:0905.3072">Ham09a</a>] 
K. Hamilton and P. Richardson and J. Tully, <em>A modified CKKW matrix element merging approach to angular-ordered parton showers</em>, JHEP <b>11</b> (2009) 038 [arXiv:0905.3072].
<br>
<br>
</li><li>
<a name="Hamilton2010wh"></a>[<a href="http://inspirehep.net/search?p=arXiv:1004.1764">Ham10</a>] 
K. Hamilton and P. Nason, <em>Improving NLO-parton shower matched simulations with higher order matrix elements</em>, JHEP <b>06</b> (2010) 039 [arXiv:1004.1764].
<br>
<br>
</li><li>
<a name="Hoche2006ph"></a>[<a href="http://inspirehep.net/search?p=hep-ph/0602031">Hoc06</a>] 
S. Hoche and others, <em>Matching Parton Showers and Matrix Elements</em>,  <b></b>   hep-ph/0602031.
<br>
<br>
</li><li>
<a name="Hoeche2009rj"></a>[<a href="http://inspirehep.net/search?p=arXiv:0903.1219">Hoe09</a>] 
S. Hoche and F. Krauss and S. Schumann and  F. Siegert, <em>QCD matrix elements and truncated showers</em>, JHEP <b>05</b> (2009) 053 [arXiv:0903.1219].
<br>
<br>
</li><li>
<a name="Hoeche2009xc"></a>[<a href="http://inspirehep.net/search?p=arXiv:0912.3501">Hoe09a</a>] 
S. Hoche and S. Schumann and F. Siegert, <em>Hard photon production and matrix-element parton-shower merging</em>, Phys. Rev. <b>D81</b> (2010) 034026 [arXiv:0912.3501].
<br>
<br>
</li><li>
<a name="Hoeche2010kg"></a>[<a href="http://inspirehep.net/search?p=arXiv:1009.1127">Hoe10</a>] 
S. Hoche and F. Krauss and M. Schonherr and F. Siegert, <em>NLO matrix elements and truncated showers</em>, JHEP <b>08</b> (2011) 123 [arXiv:1009.1127].
<br>
<br>
</li><li>
<a name="Hoeche2011fd"></a>[<a href="http://inspirehep.net/search?p=arXiv:1111.1220">Hoe11</a>] 
S. Hoche and F. Krauss and M. Schonherr and F. Siegert, <em>A critical appraisal of NLO+PS matching methods</em>, JHEP <b>09</b> (2012) 049 [arXiv:1111.1220].
<br>
<br>
</li><li>
<a name="Hoeche2012yf"></a>[<a href="http://inspirehep.net/search?p=arXiv:1207.5030">Hoe12a</a>] 
S. Hoche and F. Krauss and M. Schonherr and F. Siegert, <em>QCD matrix elements + parton showers: The NLO case</em>, JHEP <b>04</b> (2013) 027 [arXiv:1207.5030].
<br>
<br>
</li><li>
<a name="Hoeche2012fm"></a>[<a href="http://inspirehep.net/search?p=arXiv:1208.2815">Hoe12b</a>] 
S. Hoche and M. Schonherr, <em>Uncertainties in NLO + parton shower matched simulations of inclusive jet and dijet production</em>, Phys.Rev. <b>D86</b> (2012) 094042 arXiv:1208.2815.
<br>
<br>
</li><li>
<a name="Hoeche2013mua"></a>[<a href="http://inspirehep.net/search?p=arXiv:1306.2703">Hoe13</a>] 
S. Hoeche and J. Huang and G. Luisoni and  M. Schoenherr and J. Winter, <em>Zero and one jet combined NLO analysis of the top quark forward-backward asymmetry</em>, Phys.Rev. <b>D88</b> (2013) 014040 arXiv:1306.2703.
<br>
<br>
</li><li>
<a name="Hoeche2014lxa"></a>[<a href="http://inspirehep.net/search?p=arXiv:1401.7971">Hoe14a</a>] 
S. Hoeche and F. Krauss and M. Schoenherr, <em>Uncertainties in MEPS@NLO calculations of h+jets</em>,  <b></b>   arXiv:1401.7971.
<br>
<br>
</li><li>
<a name="Hoeche2014rya"></a>[<a href="http://inspirehep.net/search?p=arXiv:1403.7516">Hoe14b</a>] 
S. Hoeche and F. Krauss and S. Pozzorini and M. Schoenherr and J. M. Thompson and K. C. Zapp, <em>Triple vector boson production through Higgs-Strahlung with NLO multijet merging</em>,  <b></b>   arXiv:1403.7516.
<br>
<br>
</li><li>
<a name="Hoeche2014kca"></a>[<a href="http://inspirehep.net/search?p=arXiv:1412.6478">Hoe14c</a>] 
S. Hoeche and S. Kuttimalai and S. Schumann and F. Siegert, <em>Beyond Standard Model calculations with Sherpa</em>, Eur. Phys. J. <b>C75</b> (2015) 135 [arXiv:1412.6478].
<br>
<br>
</li><li>
<a name="Hoche2015sya"></a>[<a href="http://inspirehep.net/search?p=arXiv:1506.05057">Hoe15</a>] 
S. Hoeche and S. Prestel, <em>The midpoint between dipole and parton showers</em>,  <b></b>   arXiv:1506.05057.
<br>
<br>
</li><li>
<a name="Jadach1993hs"></a>[<a href="http://inspirehep.net/search?p=F+J+Comput. Phys. Commun.%2C76%2C361">Jad93</a>] 
S. Jadach and Z. Was and R. Decker and J. H. Kuhn, <em>The tau decay library TAUOLA: Version 2.4</em>, Comput. Phys. Commun. <b>76</b> (1993) 361-380 .
<br>
<br>
</li><li>
<a name="Kanaki2000ey"></a>[<a href="http://inspirehep.net/search?p=hep-ph/0002082">Kan00</a>] 
A. Kanaki and C. G. Papadopoulos, <em>HELAC: A package to compute electroweak helicity amplitudes</em>, Comput. Phys. Commun. <b>132</b> (2000) 306-315 [hep-ph/0002082].
<br>
<br>
</li><li>
<a name="Kleiss1985yh"></a>[<a href="http://inspirehep.net/search?p=F+J+Nucl. Phys.%2CB262%2C235">Kle85</a>] 
R. Kleiss and W. J. Stirling, <em>Spinor techniques for calculating pbarpto W^pm/Z^0+jets</em>, Nucl. Phys. <b>B262</b> (1985) 235-262 .
<br>
<br>
</li><li>
<a name="Kleiss1985gy"></a>[<a href="http://inspirehep.net/search?p=F+J+Comput. Phys. Commun.%2C40%2C359">Kle85a</a>] 
R. Kleiss and W. J. Stirling and S. D. Ellis, <em>A new Monte Carlo treatment of multiparticle phase space at high energies</em>, Comput. Phys. Commun. <b>40</b> (1986) 359 .
<br>
<br>
</li><li>
<a name="Kleiss1994qy"></a>[<a href="http://inspirehep.net/search?p=hep-ph/9405257">Kle94</a>] 
R. Kleiss and R. Pittau, <em>Weight optimization in multichannel Monte Carlo</em>, Comput. Phys. Commun. <b>83</b> (1994) 141-146 [hep-ph/9405257].
<br>
<br>
</li><li>
<a name="Krauss2001iv"></a>[<a href="http://inspirehep.net/search?p=hep-ph/0109036">Kra01</a>] 
F. Krauss and R. Kuhn and G. Soff, <em>AMEGIC++ 1.0: A Matrix Element Generator In C++</em>, JHEP <b>02</b> (2002) 044 [hep-ph/0109036].
<br>
<br>
</li><li>
<a name="Krauss2002up"></a>[<a href="http://inspirehep.net/search?p=hep-ph/0205283">Kra02</a>] 
F. Krauss, <em>Matrix elements and parton showers in hadronic interactions</em>, JHEP <b>0208</b> (2002) 015 [hep-ph/0205283].
<br>
<br>
</li><li>
<a name="Krauss2004bs"></a>[<a href="http://inspirehep.net/search?p=hep-ph/0409106">Kra04</a>] 
F. Krauss and A. Schalicke and S. Schumann and G.  Soff, <em>Simulating W/Z + jets production at the Tevatron</em>, Phys. Rev. <b>D70</b> (2004) 114009 [hep-ph/0409106].
<br>
<br>
</li><li>
<a name="Krauss2005nu"></a>[<a href="http://inspirehep.net/search?p=hep-ph/0503280">Kra05</a>] 
F. Krauss and A. Schalicke and S. Schumann and G.  Soff, <em>Simulating W/Z + jets production at the CERN LHC</em>, Phys. Rev. <b>D72</b> (2005) 054017 [hep-ph/0503280].
<br>
<br>
</li><li>
<a name="Krauss2010xx"></a>[<a href="http://inspirehep.net/search?p=">Kra10</a>] 
F. Krauss and T. Laubrich and F. Siegert, <em>Simulation of hadron decays in Sherpa</em>,  <b></b>   .
<br>
<br>
</li><li>
<a name="Lai2010vv"></a>[<a href="http://inspirehep.net/search?p=arXiv:1007.2241">Lai10</a>] 
H. L. Lai and M. Guzzi and J. Huston and Z. Li and P. M. Nadolsky and others, <em>New parton distributions for collider physics</em>, Phys.Rev. <b>D82</b> (2010) 074024 [arXiv:1007.2241].
<br>
<br>
</li><li>
<a name="Lange2001uf"></a>[<a href="http://inspirehep.net/search?p=F+J+Nucl. Instrum. Meth.%2CA462%2C152">Lan01</a>] 
D. J. Lange, <em>The EvtGen particle decay simulation package</em>, Nucl. Instrum. Meth. <b>A462</b> (2001) 152-155 .
<br>
<br>
</li><li>
<a name="Lavesson2005xu"></a>[<a href="http://inspirehep.net/search?p=hep-ph/0503293">Lav05</a>] 
N. Lavesson and L. Lonnblad, <em>W+jets matrix elements and the dipole cascade</em>, JHEP <b>07</b> (2005) 054 [hep-ph/0503293].
<br>
<br>
</li><li>
<a name="Lavesson2008ah"></a>[<a href="http://inspirehep.net/search?p=arXiv:0811.2912">Lav08</a>] 
N. Lavesson and L. Lonnblad, <em>Extending CKKW-merging to one-loop matrix elements</em>, JHEP <b>12</b> (2008) 070 [arXiv:0811.2912].
<br>
<br>
</li><li>
<a name="Lepage1980dq"></a>[<a href="http://inspirehep.net/search?p=">Lep80</a>] 
G. P. Lepage, <em>VEGAS - An Adaptive Multi-dimensional Integration Program</em>,  <b></b>   .
<br>
<br>
</li><li>
<a name="Lonnblad2001iq"></a>[<a href="http://inspirehep.net/search?p=hep-ph/0112284">Lon01</a>] 
L. Lonnblad, <em>Correcting the colour-dipole cascade model with fixed order matrix elements</em>, JHEP <b>05</b> (2002) 046 [hep-ph/0112284].
<br>
<br>
</li><li>
<a name="Lonnblad2011xx"></a>[<a href="http://inspirehep.net/search?p=arXiv:1109.4829">Lon11</a>] 
L. Lonnblad and S. Prestel, <em>Matching Tree-Level Matrix Elements with Interleaved Showers</em>, JHEP <b>03</b> (2012) 019 [arXiv:1109.4829].
<br>
<br>
</li><li>
<a name="Lonnblad2012ix"></a>[<a href="http://inspirehep.net/search?p=arXiv:1211.7278">Lon12a</a>] 
L. Lonnblad and S. Prestel, <em>Merging Multi-leg NLO Matrix Elements with Parton Showers</em>,  <b></b>   arXiv:1211.7278.
<br>
<br>
</li><li>
<a name="Lonnblad2012ng"></a>[<a href="http://inspirehep.net/search?p=arXiv:1211.4827">Lon12b</a>] 
L. Lonnblad and S. Prestel, <em>Unitarising Matrix Element + Parton Shower merging</em>,  <b></b>   arXiv:1211.4827.
<br>
<br>
</li><li>
<a name="Lonnblad1992tz"></a>[<a href="http://inspirehep.net/search?p=F+J+Comput. Phys. Commun.%2C71%2C15">Lon92</a>] 
L. Lonnblad, <em>Ariadne version 4: A program for simulation of QCD cascades implementing the colour dipole model</em>, Comput. Phys. Commun. <b>71</b> (1992) 15-31 .
<br>
<br>
</li><li>
<a name="Maltoni2002qb"></a>[<a href="http://inspirehep.net/search?p=hep-ph/0208156">Mal02a</a>] 
F. Maltoni and T. Stelzer, <em>MadEvent: automatic event generation with MadGraph</em>, JHEP <b>02</b> (2003) 027 [hep-ph/0208156].
<br>
<br>
</li><li>
<a name="Mangano2001xp"></a>[<a href="http://inspirehep.net/search?p=hep-ph/0108069">Man01</a>] 
M. L. Mangano and M. Moretti and R. Pittau, <em>Multijet matrix elements and shower evolution in hadronic collisions: W bbarb+n-jets as a case study</em>, Nucl. Phys. <b>B632</b> (2002) 343-362 [hep-ph/0108069].
<br>
<br>
</li><li>
<a name="Mangano2002ea"></a>[<a href="http://inspirehep.net/search?p=hep-ph/0206293">Man02</a>] 
M. L. Mangano and M. Moretti and F. Piccinini and R. Pittau and A. D. Polosa, <em>ALPGEN a generator for hard multiparton processes in hadronic collisions</em>, JHEP <b>07</b> (2003) 001 [hep-ph/0206293].
<br>
<br>
</li><li>
<a name="Mangano2006rw"></a>[<a href="http://inspirehep.net/search?p=hep-ph/0611129">Man06</a>] 
M. L. Mangano and M. Moretti and F. Piccinini and M. Treccani, <em>Matching matrix elements and shower evolution for top-pair production in hadronic collisions</em>, JHEP <b>01</b> (2007) 013 [hep-ph/0611129].
<br>
<br>
</li><li>
<a name="Martin2001es"></a>[<a href="http://inspirehep.net/search?p=hep-ph/0110215">Mar01</a>] 
A. D. Martin and R. G. Roberts and W. J. Stirling and  R. S. Thorne, <em>MRST2001: Partons and alpha_s from precise deep inelastic scattering and Tevatron jet data</em>, Eur. Phys. J. <b>C23</b> (2002) 73-87 [hep-ph/0110215].
<br>
<br>
</li><li>
<a name="Martin2004dh"></a>[<a href="http://inspirehep.net/search?p=hep-ph/0411040">Mar04</a>] 
A. D. Martin and R. G. Roberts and W. J. Stirling and  R. S. Thorne, <em>Parton distributions incorporating QED contributions</em>, Eur. Phys. J. <b>C39</b> (2005) 155-161 [hep-ph/0411040].
<br>
<br>
</li><li>
<a name="Martin2009iq"></a>[<a href="http://inspirehep.net/search?p=arXiv:0901.0002">Mar09a</a>] 
A. D. Martin and W. J. Stirling and R. S. Thorne and G. Watt, <em>Parton distributions for the LHC</em>, Eur. Phys. J. <b>C63</b> (2009) 189-295 [arXiv:0901.0002].
<br>
<br>
</li><li>
<a name="Marchesini1987cf"></a>[<a href="http://inspirehep.net/search?p=F+J+Nucl. Phys.%2CB310%2C461">Mar87</a>] 
G. Marchesini and B. R. Webber, <em>Monte Carlo Simulation of General Hard Processes with Coherent QCD Radiation</em>, Nucl. Phys. <b>B310</b> (1988) 461 .
<br>
<br>
</li><li>
<a name="Martin1999ww"></a>[<a href="http://inspirehep.net/search?p=hep-ph/9907231">Mar99</a>] 
A. D. Martin and R. G. Roberts and W. J. Stirling and  R. S. Thorne, <em>Parton distributions and the LHC: W and Z production</em>, Eur. Phys. J. <b>C14</b> (2000) 133-145 [hep-ph/9907231].
<br>
<br>
</li><li>
<a name="Nadolsky2008zw"></a>[<a href="http://inspirehep.net/search?p=arXiv:0802.0007">Nad08</a>] 
P. M. Nadolsky and others, <em>Implications of CTEQ global analysis for collider observables</em>, Phys. Rev. <b>D78</b> (2008) 013004 [arXiv:0802.0007].
<br>
<br>
</li><li>
<a name="Nagy2003tz"></a>[<a href="http://inspirehep.net/search?p=hep-ph/0307268">Nag03</a>] 
Z. Nagy, <em>Next-to-leading order calculation of three-jet observables in hadron-hadron collisions</em>, Phys. Rev. <b>D68</b> (2003) 094002 [hep-ph/0307268].
<br>
<br>
</li><li>
<a name="Nagy2005aa"></a>[<a href="http://inspirehep.net/search?p=hep-ph/0503053">Nag05</a>] 
Z. Nagy and D. E. Soper, <em>Matching parton showers to NLO computations</em>, JHEP <b>10</b> (2005) 024 [hep-ph/0503053].
<br>
<br>
</li><li>
<a name="Nagy2006kb"></a>[<a href="http://inspirehep.net/search?p=hep-ph/0601021">Nag06</a>] 
Z. Nagy and D. E. Soper, <em>A new parton shower algorithm: Shower evolution matching at leading and next-to-leading order level</em>,  <b></b>   hep-ph/0601021.
<br>
<br>
</li><li>
<a name="Papadopoulos2005ky"></a>[<a href="http://inspirehep.net/search?p=hep-ph/0512150">Pap05</a>] 
C. G. Papadopoulos and M. Worek, <em>Multi-parton cross sections at hadron colliders</em>, Eur. Phys. J. <b>C50</b> (2007) 843-856 [hep-ph/0512150].
<br>
<br>
</li><li>
<a name="Reina2001sf"></a>[<a href="http://inspirehep.net/search?p=hep-ph/0107101">Rei01</a>] 
L. Reina and S. Dawson, <em>Next-to-leading order results for t anti-t h production at the Tevatron</em>, Phys.Rev.Lett. <b>87</b> (2001) 201804 [hep-ph/0107101].
<br>
<br>
</li><li>
<a name="Reina2001bc"></a>[<a href="http://inspirehep.net/search?p=hep-ph/0109066">Rei01a</a>] 
L. Reina and S. Dawson and D. Wackeroth, <em>QCD corrections to associated t anti-t h production at the Tevatron</em>, Phys.Rev. <b>D65</b> (2002) 053017 [hep-ph/0109066].
<br>
<br>
</li><li>
<a name="Ryskin2009tj"></a>[<a href="http://inspirehep.net/search?p=arXiv:0812.2407">Rys09</a>] 
M. G. Ryskin and A. D. Martin and V. A. Khoze, <em>Soft processes at the LHC I: Multi-component model</em>, Eur. Phys. J. <b>C60</b> (2009) 249-264 [arXiv:0812.2407].
<br>
<br>
</li><li>
<a name="Schumann2007mg"></a>[<a href="http://inspirehep.net/search?p=arXiv:0709.1027">Sch07a</a>] 
S. Schumann and F. Krauss, <em>A parton shower algorithm based on Catani-Seymour dipole factorisation</em>, JHEP <b>03</b> (2008) 038 [arXiv:0709.1027].
<br>
<br>
</li><li>
<a name="Schonherr2008av"></a>[<a href="http://inspirehep.net/search?p=arXiv:0810.5071">Sch08</a>] 
M. Schonherr and F. Krauss, <em>Soft photon radiation in particle decays in Sherpa</em>, JHEP <b>12</b> (2008) 018 [arXiv:0810.5071].
<br>
<br>
</li><li>
<a name="Sjostrand2006za"></a>[<a href="http://inspirehep.net/search?p=hep-ph/0603175">Sjo06</a>] 
T. Sjostrand and S. Mrenna and P. Skands, <em>PYTHIA 6.4 physics and manual</em>, JHEP <b>05</b> (2006) 026 [hep-ph/0603175].
<br>
<br>
</li><li>
<a name="Sjostrand2007gs"></a>[<a href="http://inspirehep.net/search?p=arXiv:0710.3820">Sjo07</a>] 
T. Sjostrand and S. Mrenna and P. Skands, <em>A brief introduction to PYTHIA 8.1</em>, Comput. Phys. Commun. <b>178</b> (2008) 852-867 [arXiv:0710.3820].
<br>
<br>
</li><li>
<a name="Sjostrand1987su"></a>[<a href="http://inspirehep.net/search?p=F+J+Phys. Rev.%2CD36%2C2019">Sjo87</a>] 
T. Sjostrand and M. van Zijl, <em>A multiple-interaction model for the event structure in hadron collisions</em>, Phys. Rev. <b>D36</b> (1987) 2019 .
<br>
<br>
</li><li>
<a name="Stelzer1994ta"></a>[<a href="http://inspirehep.net/search?p=hep-ph/9401258">Ste94</a>] 
T. Stelzer and W. F. Long, <em>Automatic generation of tree level helicity amplitudes</em>, Comput. Phys. Commun. <b>81</b> (1994) 357-371 [hep-ph/9401258].
<br>
<br>
</li><li>
<a name="Webber1983if"></a>[<a href="http://inspirehep.net/search?p=F+J+Nucl. Phys.%2CB238%2C492">Web83</a>] 
B. R. Webber, <em>A QCD model for jet fragmentation including soft gluon interference</em>, Nucl. Phys. <b>B238</b> (1984) 492 .
<br>
<br>
</li><li>
<a name="Whalley2005nh"></a>[<a href="http://inspirehep.net/search?p=hep-ph/0508110">Wha05</a>] 
M. R. Whalley and D. Bourilkov and R. C. Group, <em>The Les Houches Accord PDFs (LHAPDF) and LHAGLUE</em>,  <b></b>   hep-ph/0508110.
<br>
<br>
</li><li>
<a name="Winter2003tt"></a>[<a href="http://inspirehep.net/search?p=hep-ph/0311085">Win03</a>] 
J. C. Winter and F. Krauss and G. Soff, <em>A modified cluster-hadronisation model</em>, Eur. Phys. J. <b>C36</b> (2004) 381-395 [hep-ph/0311085].
<br>
<br>
</li><li>
<a name="Wolfenstein1983yz"></a>[<a href="http://inspirehep.net/search?p=F+J+Phys. Rev. Lett.%2C51%2C1945">Wol83</a>] 
L. Wolfenstein, <em>Parametrization of the Kobayashi-Maskawa Matrix</em>, Phys. Rev. Lett. <b>51</b> (1983) 1945 .
<br>
<br>
</li><li>
<a name="Yennie1961ad"></a>[<a href="http://inspirehep.net/search?p=F+J+Ann. Phys.%2C13%2C379">Yen61</a>] 
D. R. Yennie and S. C. Frautschi and H. Suura, <em>The Infrared Divergence Phenomena and High-Energy Processes</em>, Ann. Phys. <b>13</b> (1961) 379-452 .
<br>
<br>
</li><li>
<a name="Zarnecki2002qr"></a>[<a href="http://inspirehep.net/search?p=hep-ex/0207021">Zar02</a>] 
A. F. Zarnecki, <em>CompAZ: Parametrization of the luminosity spectra for the photon collider</em>, Acta Phys. Polon. <b>B34</b> (2003) 2741-2758 [hep-ex/0207021].
<br>
<br>
</li><li>
<a name="Beazley2003"></a>[<a href="http://inspirehep.net/search?p=">Bea03</a>] 
D. M. Beazley, <em>Automated scientific software scripting with SWIG</em>, Future Generation Computer Systems <b>19</b> (2003) 599-609 .
<br>
<br>
</li><li>
<a name="Buschmann2014sia"></a>[<a href="http://inspirehep.net/search?p=">Bu03</a>] 
M. Buschmann and others, <em>Mass Effects in the Higgs-Gluon Coupling: Boosted vs Off-Shell Production</em>, JHEP <b>1502</b> (2015) 038 [hep-ph/1410.5806].
<br>
<br>
</li><li>
<a name="Bothmann2017jfv"></a>[<a href="http://inspirehep.net/search?p=">Both17</a>] 
E. Bothmann and M. Schonherr and F. Krauss, <em>Single top-quark production with Sherpa</em>, [arXiv:1711.02568] <b></b>   .
<br>
<br>
</li><li>
<a name="Gutschow2018tuk"></a>[<a href="http://inspirehep.net/search?p=">Gut18</a>] 
C. Gutschow and J. M. Lindert and M. Schonherr, <em>Multi-jet merged top-pair production including electroweak corrections</em>, Eur. Phys. J. <b>C78</b> (2018) 317 [arXiv:1803.00950].
<br>
<br>
</li></ul>

<hr>
<a name="Index"></a>
<a name="Index-1"></a>
<h1 class="appendix">Appendix B Index</h1>

<table><tr><th valign="top">Jump to: &nbsp; </th><td><a class="summary-letter" href="#Index-1_cp_symbol-1"><b>1</b></a>
 &nbsp; 
<br>
<a class="summary-letter" href="#Index-1_cp_letter-A"><b>A</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-1_cp_letter-B"><b>B</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-1_cp_letter-C"><b>C</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-1_cp_letter-D"><b>D</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-1_cp_letter-E"><b>E</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-1_cp_letter-F"><b>F</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-1_cp_letter-H"><b>H</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-1_cp_letter-I"><b>I</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-1_cp_letter-K"><b>K</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-1_cp_letter-L"><b>L</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-1_cp_letter-M"><b>M</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-1_cp_letter-N"><b>N</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-1_cp_letter-O"><b>O</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-1_cp_letter-P"><b>P</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-1_cp_letter-Q"><b>Q</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-1_cp_letter-R"><b>R</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-1_cp_letter-S"><b>S</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-1_cp_letter-T"><b>T</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-1_cp_letter-U"><b>U</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-1_cp_letter-V"><b>V</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-1_cp_letter-W"><b>W</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-1_cp_letter-X"><b>X</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-1_cp_letter-Y"><b>Y</b></a>
 &nbsp; 
</td></tr></table>
<table class="index-cp" border="0">
<tr><td></td><th align="left">Index Entry</th><td>&nbsp;</td><th align="left"> Section</th></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Index-1_cp_symbol-1">1</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-1_002fALPHAQED_00280_0029">1/ALPHAQED(0)</a></td><td>&nbsp;</td><td valign="top"><a href="#SM">5.4.1.1 Standard Model</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Index-1_cp_letter-A">A</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-A">A</a></td><td>&nbsp;</td><td valign="top"><a href="#SM">5.4.1.1 Standard Model</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ACTIVE_005b_003cid_003e_005d">ACTIVE[&lt;id&gt;]</a></td><td>&nbsp;</td><td valign="top"><a href="#SM">5.4.1.1 Standard Model</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ALPHAQED_005fDEFAULT_005fSCALE">ALPHAQED_DEFAULT_SCALE</a></td><td>&nbsp;</td><td valign="top"><a href="#SM">5.4.1.1 Standard Model</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ALPHAS_0028MZ_0029">ALPHAS(MZ)</a></td><td>&nbsp;</td><td valign="top"><a href="#SM">5.4.1.1 Standard Model</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ANALYSIS">ANALYSIS</a></td><td>&nbsp;</td><td valign="top"><a href="#ANALYSIS">5.1.9 ANALYSIS</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ANALYSIS_005fOUTPUT">ANALYSIS_OUTPUT</a></td><td>&nbsp;</td><td valign="top"><a href="#ANALYSIS_005fOUTPUT">5.1.10 ANALYSIS_OUTPUT</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ANALYSIS_005fOUTPUT-1">ANALYSIS_OUTPUT</a></td><td>&nbsp;</td><td valign="top"><a href="#Rivet-analyses">6.2 Rivet analyses</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ANALYSIS_005fOUTPUT-2">ANALYSIS_OUTPUT</a></td><td>&nbsp;</td><td valign="top"><a href="#HZTool-analyses">6.3 HZTool analyses</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Index-1_cp_letter-B">B</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-BARYON_005fFRACTION">BARYON_FRACTION</a></td><td>&nbsp;</td><td valign="top"><a href="#Cluster-transition-to-hadrons-_002d-flavour-part">5.12.1.4 Cluster transition to hadrons - flavour part</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-BATCH_005fMODE">BATCH_MODE</a></td><td>&nbsp;</td><td valign="top"><a href="#BATCH_005fMODE">5.1.13 BATCH_MODE</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-BEAM_005f1">BEAM_1</a></td><td>&nbsp;</td><td valign="top"><a href="#Beam-Parameters">5.2 Beam parameters</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-BEAM_005f2">BEAM_2</a></td><td>&nbsp;</td><td valign="top"><a href="#Beam-Parameters">5.2 Beam parameters</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-BEAM_005fENERGY_005f1">BEAM_ENERGY_1</a></td><td>&nbsp;</td><td valign="top"><a href="#Beam-Parameters">5.2 Beam parameters</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-BEAM_005fENERGY_005f2">BEAM_ENERGY_2</a></td><td>&nbsp;</td><td valign="top"><a href="#Beam-Parameters">5.2 Beam parameters</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-BEAM_005fREMNANTS">BEAM_REMNANTS</a></td><td>&nbsp;</td><td valign="top"><a href="#Intrinsic-Transverse-Momentum">5.2.2 Intrinsic Transverse Momentum</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-BEAM_005fSMAX">BEAM_SMAX</a></td><td>&nbsp;</td><td valign="top"><a href="#Beam-Spectra">5.2.1 Beam Spectra</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-BEAM_005fSMIN">BEAM_SMIN</a></td><td>&nbsp;</td><td valign="top"><a href="#Beam-Spectra">5.2.1 Beam Spectra</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-BEAM_005fSPECTRUM_005f1">BEAM_SPECTRUM_1</a></td><td>&nbsp;</td><td valign="top"><a href="#Beam-Spectra">5.2.1 Beam Spectra</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-BEAM_005fSPECTRUM_005f2">BEAM_SPECTRUM_2</a></td><td>&nbsp;</td><td valign="top"><a href="#Beam-Spectra">5.2.1 Beam Spectra</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-beta_005f0_005e2">beta_0^2</a></td><td>&nbsp;</td><td valign="top"><a href="#Parameters-of-the-eikonals">5.14.2.3 Parameters of the eikonals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-BH_005fSETTINGS_005fFILE">BH_SETTINGS_FILE</a></td><td>&nbsp;</td><td valign="top"><a href="#BlackHat-Interface">5.6.31.1 BlackHat Interface</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-BUNCH_005f1">BUNCH_1</a></td><td>&nbsp;</td><td valign="top"><a href="#ISR-Parameters">5.3 ISR parameters</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-BUNCH_005f2">BUNCH_2</a></td><td>&nbsp;</td><td valign="top"><a href="#ISR-Parameters">5.3 ISR parameters</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Index-1_cp_letter-C">C</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-CABIBBO">CABIBBO</a></td><td>&nbsp;</td><td valign="top"><a href="#SM">5.4.1.1 Standard Model</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-CHECK_005fBORN">CHECK_BORN</a></td><td>&nbsp;</td><td valign="top"><a href="#Checking-the-pole-cancellation">6.7.5 Checking the pole cancellation</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-CHECK_005fFINITE">CHECK_FINITE</a></td><td>&nbsp;</td><td valign="top"><a href="#Checking-the-pole-cancellation">6.7.5 Checking the pole cancellation</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-CHECK_005fPOLES">CHECK_POLES</a></td><td>&nbsp;</td><td valign="top"><a href="#Checking-the-pole-cancellation">6.7.5 Checking the pole cancellation</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-CHECK_005fPOLES_005fTHRESHOLD">CHECK_POLES_THRESHOLD</a></td><td>&nbsp;</td><td valign="top"><a href="#Checking-the-pole-cancellation">6.7.5 Checking the pole cancellation</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Chi_005fS">Chi_S</a></td><td>&nbsp;</td><td valign="top"><a href="#Parameters-for-event-generation">5.14.2.4 Parameters for event generation</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-CKMORDER">CKMORDER</a></td><td>&nbsp;</td><td valign="top"><a href="#SM">5.4.1.1 Standard Model</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-CORE_005fSCALE">CORE_SCALE</a></td><td>&nbsp;</td><td valign="top"><a href="#METS-scale-setting-with-multiparton-core-processes">5.5.4.6 METS scale setting with multiparton core processes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-COUPLINGS">COUPLINGS</a></td><td>&nbsp;</td><td valign="top"><a href="#COUPLINGS">5.5.6 COUPLINGS</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-COUPLING_005fSCHEME">COUPLING_SCHEME</a></td><td>&nbsp;</td><td valign="top"><a href="#COUPLING_005fSCHEME">5.5.5 COUPLING_SCHEME</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-CSS_005fALPHAS_005fFREEZE_005fMODE">CSS_ALPHAS_FREEZE_MODE</a></td><td>&nbsp;</td><td valign="top"><a href="#CS-Shower-options">5.10.5 CS Shower options</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-CSS_005fEVOLUTION_005fSCHEME">CSS_EVOLUTION_SCHEME</a></td><td>&nbsp;</td><td valign="top"><a href="#CS-Shower-options">5.10.5 CS Shower options</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-CSS_005fEW_005fMODE">CSS_EW_MODE</a></td><td>&nbsp;</td><td valign="top"><a href="#CS-Shower-options">5.10.5 CS Shower options</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-CSS_005fFS_005fAS_005fFAC">CSS_FS_AS_FAC</a></td><td>&nbsp;</td><td valign="top"><a href="#CS-Shower-options">5.10.5 CS Shower options</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-CSS_005fFS_005fPT2MIN">CSS_FS_PT2MIN</a></td><td>&nbsp;</td><td valign="top"><a href="#CS-Shower-options">5.10.5 CS Shower options</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-CSS_005fIS_005fAS_005fFAC">CSS_IS_AS_FAC</a></td><td>&nbsp;</td><td valign="top"><a href="#CS-Shower-options">5.10.5 CS Shower options</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-CSS_005fIS_005fPT2MIN">CSS_IS_PT2MIN</a></td><td>&nbsp;</td><td valign="top"><a href="#CS-Shower-options">5.10.5 CS Shower options</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-CSS_005fKIN_005fSCHEME">CSS_KIN_SCHEME</a></td><td>&nbsp;</td><td valign="top"><a href="#CS-Shower-options">5.10.5 CS Shower options</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-CSS_005fMASS_005fTHRESHOLD">CSS_MASS_THRESHOLD</a></td><td>&nbsp;</td><td valign="top"><a href="#CS-Shower-options">5.10.5 CS Shower options</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-CSS_005fMAXEM">CSS_MAXEM</a></td><td>&nbsp;</td><td valign="top"><a href="#CS-Shower-options">5.10.5 CS Shower options</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-CSS_005fNOEM">CSS_NOEM</a></td><td>&nbsp;</td><td valign="top"><a href="#CS-Shower-options">5.10.5 CS Shower options</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-CSS_005fSCALE_005fSCHEME">CSS_SCALE_SCHEME</a></td><td>&nbsp;</td><td valign="top"><a href="#CS-Shower-options">5.10.5 CS Shower options</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Index-1_cp_letter-D">D</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-DEACTIVATE_005fGGH">DEACTIVATE_GGH</a></td><td>&nbsp;</td><td valign="top"><a href="#HEFT">5.4.1.2 Effective Higgs Couplings</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-DEACTIVATE_005fPPH">DEACTIVATE_PPH</a></td><td>&nbsp;</td><td valign="top"><a href="#HEFT">5.4.1.2 Effective Higgs Couplings</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-DECAYMODEL">DECAYMODEL</a></td><td>&nbsp;</td><td valign="top"><a href="#Hadron-decays">5.12.2 Hadron decays</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-DECAYPATH">DECAYPATH</a></td><td>&nbsp;</td><td valign="top"><a href="#Hadron-decays">5.12.2 Hadron decays</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-DECAY_005fOFFSET">DECAY_OFFSET</a></td><td>&nbsp;</td><td valign="top"><a href="#Cluster-transition-to-hadrons-_002d-flavour-part">5.12.1.4 Cluster transition to hadrons - flavour part</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-DECAY_005fRESULT_005fDIRECTORY">DECAY_RESULT_DIRECTORY</a></td><td>&nbsp;</td><td valign="top"><a href="#DECAY_005fRESULT_005fDIRECTORY">5.9.5 DECAY_RESULT_DIRECTORY</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-DECAY_005fTAU_005fHARD">DECAY_TAU_HARD</a></td><td>&nbsp;</td><td valign="top"><a href="#DECAY_005fTAU_005fHARD">5.9.10 DECAY_TAU_HARD</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Delphes">Delphes</a></td><td>&nbsp;</td><td valign="top"><a href="#Event-output-formats">5.1.17 Event output formats</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Delta">Delta</a></td><td>&nbsp;</td><td valign="top"><a href="#Parameters-of-the-eikonals">5.14.2.3 Parameters of the eikonals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-deltaY">deltaY</a></td><td>&nbsp;</td><td valign="top"><a href="#Parameters-of-the-eikonals">5.14.2.3 Parameters of the eikonals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-DIPOLE_005fALPHA">DIPOLE_ALPHA</a></td><td>&nbsp;</td><td valign="top"><a href="#Dipole-subtraction">5.5.9 Dipole subtraction</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-DIPOLE_005fAMIN">DIPOLE_AMIN</a></td><td>&nbsp;</td><td valign="top"><a href="#Dipole-subtraction">5.5.9 Dipole subtraction</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-DIPOLE_005fKAPPA">DIPOLE_KAPPA</a></td><td>&nbsp;</td><td valign="top"><a href="#Dipole-subtraction">5.5.9 Dipole subtraction</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-DIPOLE_005fNF_005fGSPLIT">DIPOLE_NF_GSPLIT</a></td><td>&nbsp;</td><td valign="top"><a href="#Dipole-subtraction">5.5.9 Dipole subtraction</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Index-1_cp_letter-E">E</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-EPA_005fAlphaQED">EPA_AlphaQED</a></td><td>&nbsp;</td><td valign="top"><a href="#EPA">5.2.1.3 EPA</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-EPA_005fForm_005fFactor_005f1">EPA_Form_Factor_1</a></td><td>&nbsp;</td><td valign="top"><a href="#EPA">5.2.1.3 EPA</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-EPA_005fForm_005fFactor_005f2">EPA_Form_Factor_2</a></td><td>&nbsp;</td><td valign="top"><a href="#EPA">5.2.1.3 EPA</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-EPA_005fptMin_005f1">EPA_ptMin_1</a></td><td>&nbsp;</td><td valign="top"><a href="#EPA">5.2.1.3 EPA</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-EPA_005fptMin_005f2">EPA_ptMin_2</a></td><td>&nbsp;</td><td valign="top"><a href="#EPA">5.2.1.3 EPA</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-EPA_005fq2Max_005f1">EPA_q2Max_1</a></td><td>&nbsp;</td><td valign="top"><a href="#EPA">5.2.1.3 EPA</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-EPA_005fq2Max_005f2">EPA_q2Max_2</a></td><td>&nbsp;</td><td valign="top"><a href="#EPA">5.2.1.3 EPA</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ETA">ETA</a></td><td>&nbsp;</td><td valign="top"><a href="#SM">5.4.1.1 Standard Model</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-EVENTS">EVENTS</a></td><td>&nbsp;</td><td valign="top"><a href="#EVENTS">5.1.1 EVENTS</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-EVENT_005fDISPLAY_005fINTERVAL">EVENT_DISPLAY_INTERVAL</a></td><td>&nbsp;</td><td valign="top"><a href="#BATCH_005fMODE">5.1.13 BATCH_MODE</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-EVENT_005fGENERATION_005fMODE">EVENT_GENERATION_MODE</a></td><td>&nbsp;</td><td valign="top"><a href="#EVENT_005fGENERATION_005fMODE">5.5.3 EVENT_GENERATION_MODE</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-EVENT_005fINPUT">EVENT_INPUT</a></td><td>&nbsp;</td><td valign="top"><a href="#Event-output-formats">5.1.17 Event output formats</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-EVENT_005fOUTPUT">EVENT_OUTPUT</a></td><td>&nbsp;</td><td valign="top"><a href="#Event-output-formats">5.1.17 Event output formats</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-EVENT_005fTYPE">EVENT_TYPE</a></td><td>&nbsp;</td><td valign="top"><a href="#EVENT_005fTYPE">5.1.2 EVENT_TYPE</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-EVENT_005fTYPE-1">EVENT_TYPE</a></td><td>&nbsp;</td><td valign="top"><a href="#Generating-minimum-bias-events">5.14.2.1 Generating minimum bias events</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-EVT_005fFILE_005fPATH">EVT_FILE_PATH</a></td><td>&nbsp;</td><td valign="top"><a href="#Event-output-formats">5.1.17 Event output formats</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-EVT_005fOUTPUT">EVT_OUTPUT</a></td><td>&nbsp;</td><td valign="top"><a href="#OUTPUT">5.1.5 OUTPUT</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-EW_005fSCHEME">EW_SCHEME</a></td><td>&nbsp;</td><td valign="top"><a href="#SM">5.4.1.1 Standard Model</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-E_005fLASER_005f">E_LASER_</a></td><td>&nbsp;</td><td valign="top"><a href="#Laser-Backscattering">5.2.1.1 Laser Backscattering</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-E_005fLASER_005f-1">E_LASER_</a></td><td>&nbsp;</td><td valign="top"><a href="#Laser-Backscattering">5.2.1.1 Laser Backscattering</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Index-1_cp_letter-F">F</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-FILE_005fSIZE">FILE_SIZE</a></td><td>&nbsp;</td><td valign="top"><a href="#Event-output-formats">5.1.17 Event output formats</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-FINISH_005fOPTIMIZATION">FINISH_OPTIMIZATION</a></td><td>&nbsp;</td><td valign="top"><a href="#FINISH_005fOPTIMIZATION">5.8.4 FINISH_OPTIMIZATION</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-FINITE_005fTOP_005fMASS">FINITE_TOP_MASS</a></td><td>&nbsp;</td><td valign="top"><a href="#HEFT">5.4.1.2 Effective Higgs Couplings</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-FINITE_005fW_005fMASS">FINITE_W_MASS</a></td><td>&nbsp;</td><td valign="top"><a href="#HEFT">5.4.1.2 Effective Higgs Couplings</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-FRAGMENTATION">FRAGMENTATION</a></td><td>&nbsp;</td><td valign="top"><a href="#Fragmentation-models">5.12.1.1 Fragmentation models</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Index-1_cp_letter-H">H</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-HARD_005fDECAYS">HARD_DECAYS</a></td><td>&nbsp;</td><td valign="top"><a href="#Hard-decays">5.9 Hard decays</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-HARD_005fMASS_005fSMEARING">HARD_MASS_SMEARING</a></td><td>&nbsp;</td><td valign="top"><a href="#HARD_005fMASS_005fSMEARING">5.9.8 HARD_MASS_SMEARING</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-HARD_005fSPIN_005fCORRELATIONS">HARD_SPIN_CORRELATIONS</a></td><td>&nbsp;</td><td valign="top"><a href="#HARD_005fSPIN_005fCORRELATIONS">5.9.3 HARD_SPIN_CORRELATIONS</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-HARD_005fSPIN_005fCORRELATIONS-1">HARD_SPIN_CORRELATIONS</a></td><td>&nbsp;</td><td valign="top"><a href="#Further-remarks">5.12.2.5 Further remarks</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-HDH_005fBR_005fWEIGHTS">HDH_BR_WEIGHTS</a></td><td>&nbsp;</td><td valign="top"><a href="#HDH_005fBR_005fWEIGHTS">5.9.7 HDH_BR_WEIGHTS</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-HDH_005fINT_005fACCURACY">HDH_INT_ACCURACY</a></td><td>&nbsp;</td><td valign="top"><a href="#Decay-table-integration-settings">5.9.11 Decay table integration settings</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-HDH_005fINT_005fNITER">HDH_INT_NITER</a></td><td>&nbsp;</td><td valign="top"><a href="#Decay-table-integration-settings">5.9.11 Decay table integration settings</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-HDH_005fINT_005fTARGET_005fMODE">HDH_INT_TARGET_MODE</a></td><td>&nbsp;</td><td valign="top"><a href="#Decay-table-integration-settings">5.9.11 Decay table integration settings</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-HDH_005fSET_005fWIDTHS">HDH_SET_WIDTHS</a></td><td>&nbsp;</td><td valign="top"><a href="#HDH_005fSET_005fWIDTHS">5.9.6 HDH_SET_WIDTHS</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-HDH_005fSTATUS_005b_003cidcode_003e_005d">HDH_STATUS[&lt;idcode&gt;]</a></td><td>&nbsp;</td><td valign="top"><a href="#HDH_005fSTATUS">5.9.1 HDH_STATUS</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-HDH_005fWIDTH_005b_003cidcode_003e_005d">HDH_WIDTH[&lt;idcode&gt;]</a></td><td>&nbsp;</td><td valign="top"><a href="#HDH_005fWIDTH">5.9.2 HDH_WIDTH</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-HEAVY_005fBARYON_005fENHANCEMEMT">HEAVY_BARYON_ENHANCEMEMT</a></td><td>&nbsp;</td><td valign="top"><a href="#Hadron-multiplets">5.12.1.3 Hadron multiplets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-HEPEVT">HEPEVT</a></td><td>&nbsp;</td><td valign="top"><a href="#Event-output-formats">5.1.17 Event output formats</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-HepMC_005fGenEvent">HepMC_GenEvent</a></td><td>&nbsp;</td><td valign="top"><a href="#Event-output-formats">5.1.17 Event output formats</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-HepMC_005fShort">HepMC_Short</a></td><td>&nbsp;</td><td valign="top"><a href="#Event-output-formats">5.1.17 Event output formats</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-HIGGS_005fINTERFERENCE_005fMODE">HIGGS_INTERFERENCE_MODE</a></td><td>&nbsp;</td><td valign="top"><a href="#LHC_005fHInt">9.3.1 H production in gluon fusion with interference effects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-HIGGS_005fINTERFERENCE_005fONLY">HIGGS_INTERFERENCE_ONLY</a></td><td>&nbsp;</td><td valign="top"><a href="#LHC_005fHInt">9.3.1 H production in gluon fusion with interference effects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-HIGGS_005fINTERFERENCE_005fSPIN">HIGGS_INTERFERENCE_SPIN</a></td><td>&nbsp;</td><td valign="top"><a href="#LHC_005fHInt">9.3.1 H production in gluon fusion with interference effects</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Index-1_cp_letter-I">I</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-INTEGRATION_005fERROR">INTEGRATION_ERROR</a></td><td>&nbsp;</td><td valign="top"><a href="#INTEGRATION_005fERROR">5.8.1 INTEGRATION_ERROR</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-INTEGRATOR">INTEGRATOR</a></td><td>&nbsp;</td><td valign="top"><a href="#INTEGRATOR">5.8.2 INTEGRATOR</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ISR_005fE_005fORDER">ISR_E_ORDER</a></td><td>&nbsp;</td><td valign="top"><a href="#ISR-Parameters">5.3 ISR parameters</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ISR_005fE_005fSCHEME">ISR_E_SCHEME</a></td><td>&nbsp;</td><td valign="top"><a href="#ISR-Parameters">5.3 ISR parameters</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ISR_005fSMAX">ISR_SMAX</a></td><td>&nbsp;</td><td valign="top"><a href="#ISR-Parameters">5.3 ISR parameters</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ISR_005fSMIN">ISR_SMIN</a></td><td>&nbsp;</td><td valign="top"><a href="#ISR-Parameters">5.3 ISR parameters</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Index-1_cp_letter-K">K</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-kappa">kappa</a></td><td>&nbsp;</td><td valign="top"><a href="#Parameters-of-the-eikonals">5.14.2.3 Parameters of the eikonals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-KFACTOR">KFACTOR</a></td><td>&nbsp;</td><td valign="top"><a href="#KFACTOR">5.5.7 KFACTOR</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-KT2_005fFactor">KT2_Factor</a></td><td>&nbsp;</td><td valign="top"><a href="#Parameters-for-event-generation">5.14.2.4 Parameters for event generation</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-K_005fPERP_005fMEAN_005f1">K_PERP_MEAN_1</a></td><td>&nbsp;</td><td valign="top"><a href="#Intrinsic-Transverse-Momentum">5.2.2 Intrinsic Transverse Momentum</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-K_005fPERP_005fMEAN_005f2">K_PERP_MEAN_2</a></td><td>&nbsp;</td><td valign="top"><a href="#Intrinsic-Transverse-Momentum">5.2.2 Intrinsic Transverse Momentum</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-K_005fPERP_005fSIGMA_005f1">K_PERP_SIGMA_1</a></td><td>&nbsp;</td><td valign="top"><a href="#Intrinsic-Transverse-Momentum">5.2.2 Intrinsic Transverse Momentum</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-K_005fPERP_005fSIGMA_005f2">K_PERP_SIGMA_2</a></td><td>&nbsp;</td><td valign="top"><a href="#Intrinsic-Transverse-Momentum">5.2.2 Intrinsic Transverse Momentum</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Index-1_cp_letter-L">L</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-LAMBDA">LAMBDA</a></td><td>&nbsp;</td><td valign="top"><a href="#SM">5.4.1.1 Standard Model</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lambda">lambda</a></td><td>&nbsp;</td><td valign="top"><a href="#Parameters-of-the-eikonals">5.14.2.3 Parameters of the eikonals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Lambda2">Lambda2</a></td><td>&nbsp;</td><td valign="top"><a href="#Parameters-of-the-eikonals">5.14.2.3 Parameters of the eikonals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LASER_005fANGLES">LASER_ANGLES</a></td><td>&nbsp;</td><td valign="top"><a href="#Laser-Backscattering">5.2.1.1 Laser Backscattering</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LASER_005fMODE">LASER_MODE</a></td><td>&nbsp;</td><td valign="top"><a href="#Laser-Backscattering">5.2.1.1 Laser Backscattering</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LASER_005fNONLINEARITY">LASER_NONLINEARITY</a></td><td>&nbsp;</td><td valign="top"><a href="#Laser-Backscattering">5.2.1.1 Laser Backscattering</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LHEF">LHEF</a></td><td>&nbsp;</td><td valign="top"><a href="#Event-output-formats">5.1.17 Event output formats</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LHOLE_005fBOOST_005fTO_005fCMS">LHOLE_BOOST_TO_CMS</a></td><td>&nbsp;</td><td valign="top"><a href="#External-one_002dloop-ME">8.3 External one-loop ME</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LHOLE_005fCONTRACTFILE">LHOLE_CONTRACTFILE</a></td><td>&nbsp;</td><td valign="top"><a href="#External-one_002dloop-ME">8.3 External one-loop ME</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LHOLE_005fIR_005fREGULARISATION">LHOLE_IR_REGULARISATION</a></td><td>&nbsp;</td><td valign="top"><a href="#External-one_002dloop-ME">8.3 External one-loop ME</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LHOLE_005fOLP">LHOLE_OLP</a></td><td>&nbsp;</td><td valign="top"><a href="#External-one_002dloop-ME">8.3 External one-loop ME</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LHOLE_005fORDERFILE">LHOLE_ORDERFILE</a></td><td>&nbsp;</td><td valign="top"><a href="#External-one_002dloop-ME">8.3 External one-loop ME</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LOG_005fFILE">LOG_FILE</a></td><td>&nbsp;</td><td valign="top"><a href="#LOG_005fFILE">5.1.6 LOG_FILE</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Loop_005fGenerator">Loop_Generator</a></td><td>&nbsp;</td><td valign="top"><a href="#MCFM-interface">6.4 MCFM interface</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LOOP_005fME_005fINIT">LOOP_ME_INIT</a></td><td>&nbsp;</td><td valign="top"><a href="#Enforcing-the-renormalization-scheme">6.7.4 Enforcing the renormalization scheme</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Index-1_cp_letter-M">M</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-MassExponent_005fC_002d_003eHH">MassExponent_C-&gt;HH</a></td><td>&nbsp;</td><td valign="top"><a href="#Cluster-transition-and-decay-weights">5.12.1.5 Cluster transition and decay weights</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-MASSIVE_005b_003cid_003e_005d">MASSIVE[&lt;id&gt;]</a></td><td>&nbsp;</td><td valign="top"><a href="#SM">5.4.1.1 Standard Model</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-MASS_005b_003cid_003e_005d">MASS[&lt;id&gt;]</a></td><td>&nbsp;</td><td valign="top"><a href="#SM">5.4.1.1 Standard Model</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-MASS_005b_003cid_003e_005d-1">MASS[&lt;id&gt;]</a></td><td>&nbsp;</td><td valign="top"><a href="#Hadron-decays">5.12.2 Hadron decays</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-MAX_005fPROPER_005fLIFETIME">MAX_PROPER_LIFETIME</a></td><td>&nbsp;</td><td valign="top"><a href="#Hadron-decays">5.12.2 Hadron decays</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-MEMLEAK_005fWARNING_005fTHRESHOLD">MEMLEAK_WARNING_THRESHOLD</a></td><td>&nbsp;</td><td valign="top"><a href="#RLIMIT_005fAS">5.1.12 RLIMIT_AS</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ME_005fQED">ME_QED</a></td><td>&nbsp;</td><td valign="top"><a href="#ME_005fQED">5.13.2.1 ME_QED</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ME_005fQED_005fCLUSTERING">ME_QED_CLUSTERING</a></td><td>&nbsp;</td><td valign="top"><a href="#ME_005fQED_005fCLUSTERING">5.13.2.2 ME_QED_CLUSTERING</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ME_005fQED_005fCLUSTERING_005fTHRESHOLD">ME_QED_CLUSTERING_THRESHOLD</a></td><td>&nbsp;</td><td valign="top"><a href="#ME_005fQED_005fCLUSTERING_005fTHRESHOLD">5.13.2.3 ME_QED_CLUSTERING_THRESHOLD</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ME_005fSIGNAL_005fGENERATOR">ME_SIGNAL_GENERATOR</a></td><td>&nbsp;</td><td valign="top"><a href="#ME_005fSIGNAL_005fGENERATOR">5.5.1 ME_SIGNAL_GENERATOR</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Mixing_005f0_002b">Mixing_0+</a></td><td>&nbsp;</td><td valign="top"><a href="#Hadron-multiplets">5.12.1.3 Hadron multiplets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Mixing_005f1_002d">Mixing_1-</a></td><td>&nbsp;</td><td valign="top"><a href="#Hadron-multiplets">5.12.1.3 Hadron multiplets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-MI_005fHANDLER">MI_HANDLER</a></td><td>&nbsp;</td><td valign="top"><a href="#MI_005fHANDLER">5.11.1 MI_HANDLER</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-MI_005fRESULT_005fDIRECTORY">MI_RESULT_DIRECTORY</a></td><td>&nbsp;</td><td valign="top"><a href="#MI_005fRESULT_005fDIRECTORY">5.11.10 MI_RESULT_DIRECTORY</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-MI_005fRESULT_005fDIRECTORY_005fSUFFIX">MI_RESULT_DIRECTORY_SUFFIX</a></td><td>&nbsp;</td><td valign="top"><a href="#MI_005fRESULT_005fDIRECTORY_005fSUFFIX">5.11.11 MI_RESULT_DIRECTORY_SUFFIX</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-MODEL">MODEL</a></td><td>&nbsp;</td><td valign="top"><a href="#Models">5.4 Models</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-MOMENTA_005fDATA_005fFILE">MOMENTA_DATA_FILE</a></td><td>&nbsp;</td><td valign="top"><a href="#Matrix-Element-values-through-C_002b_002b-interface">9.12.2 Computing matrix elements for idividual phase space points using the C++ Interface</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-MSTJ">MSTJ</a></td><td>&nbsp;</td><td valign="top"><a href="#Fragmentation-models">5.12.1.1 Fragmentation models</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-MSTP">MSTP</a></td><td>&nbsp;</td><td valign="top"><a href="#Fragmentation-models">5.12.1.1 Fragmentation models</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-MSTU">MSTU</a></td><td>&nbsp;</td><td valign="top"><a href="#Fragmentation-models">5.12.1.1 Fragmentation models</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-MULTI_005fWEIGHT_005fL0R0_005fDELTA_005f3_002f2">MULTI_WEIGHT_L0R0_DELTA_3/2</a></td><td>&nbsp;</td><td valign="top"><a href="#Hadron-multiplets">5.12.1.3 Hadron multiplets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-MULTI_005fWEIGHT_005fL0R0_005fN_002a_005f1_002f2">MULTI_WEIGHT_L0R0_N*_1/2</a></td><td>&nbsp;</td><td valign="top"><a href="#Hadron-multiplets">5.12.1.3 Hadron multiplets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-MULTI_005fWEIGHT_005fL0R0_005fN_005f1_002f2">MULTI_WEIGHT_L0R0_N_1/2</a></td><td>&nbsp;</td><td valign="top"><a href="#Hadron-multiplets">5.12.1.3 Hadron multiplets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-MULTI_005fWEIGHT_005fL0R0_005fPSEUDOSCALARS">MULTI_WEIGHT_L0R0_PSEUDOSCALARS</a></td><td>&nbsp;</td><td valign="top"><a href="#Hadron-multiplets">5.12.1.3 Hadron multiplets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-MULTI_005fWEIGHT_005fL0R0_005fTENSORS2">MULTI_WEIGHT_L0R0_TENSORS2</a></td><td>&nbsp;</td><td valign="top"><a href="#Hadron-multiplets">5.12.1.3 Hadron multiplets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-MULTI_005fWEIGHT_005fL0R0_005fTENSORS3">MULTI_WEIGHT_L0R0_TENSORS3</a></td><td>&nbsp;</td><td valign="top"><a href="#Hadron-multiplets">5.12.1.3 Hadron multiplets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-MULTI_005fWEIGHT_005fL0R0_005fTENSORS4">MULTI_WEIGHT_L0R0_TENSORS4</a></td><td>&nbsp;</td><td valign="top"><a href="#Hadron-multiplets">5.12.1.3 Hadron multiplets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-MULTI_005fWEIGHT_005fL0R0_005fVECTORS">MULTI_WEIGHT_L0R0_VECTORS</a></td><td>&nbsp;</td><td valign="top"><a href="#Hadron-multiplets">5.12.1.3 Hadron multiplets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-MULTI_005fWEIGHT_005fL0R1_005fAXIALVECTORS">MULTI_WEIGHT_L0R1_AXIALVECTORS</a></td><td>&nbsp;</td><td valign="top"><a href="#Hadron-multiplets">5.12.1.3 Hadron multiplets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-MULTI_005fWEIGHT_005fL0R1_005fSCALARS">MULTI_WEIGHT_L0R1_SCALARS</a></td><td>&nbsp;</td><td valign="top"><a href="#Hadron-multiplets">5.12.1.3 Hadron multiplets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-MULTI_005fWEIGHT_005fL1R0_005fAXIALVECTORS">MULTI_WEIGHT_L1R0_AXIALVECTORS</a></td><td>&nbsp;</td><td valign="top"><a href="#Hadron-multiplets">5.12.1.3 Hadron multiplets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-MULTI_005fWEIGHT_005fL1R0_005fDELTA_002a_005f3_002f2">MULTI_WEIGHT_L1R0_DELTA*_3/2</a></td><td>&nbsp;</td><td valign="top"><a href="#Hadron-multiplets">5.12.1.3 Hadron multiplets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-MULTI_005fWEIGHT_005fL1R0_005fN_002a_005f1_002f2">MULTI_WEIGHT_L1R0_N*_1/2</a></td><td>&nbsp;</td><td valign="top"><a href="#Hadron-multiplets">5.12.1.3 Hadron multiplets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-MULTI_005fWEIGHT_005fL1R0_005fN_002a_005f3_002f2">MULTI_WEIGHT_L1R0_N*_3/2</a></td><td>&nbsp;</td><td valign="top"><a href="#Hadron-multiplets">5.12.1.3 Hadron multiplets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-MULTI_005fWEIGHT_005fL1R0_005fSCALARS">MULTI_WEIGHT_L1R0_SCALARS</a></td><td>&nbsp;</td><td valign="top"><a href="#Hadron-multiplets">5.12.1.3 Hadron multiplets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-MULTI_005fWEIGHT_005fL1R0_005fTENSORS2">MULTI_WEIGHT_L1R0_TENSORS2</a></td><td>&nbsp;</td><td valign="top"><a href="#Hadron-multiplets">5.12.1.3 Hadron multiplets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-MULTI_005fWEIGHT_005fL2R0_005fVECTORS">MULTI_WEIGHT_L2R0_VECTORS</a></td><td>&nbsp;</td><td valign="top"><a href="#Hadron-multiplets">5.12.1.3 Hadron multiplets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-MULTI_005fWEIGHT_005fL3R0_005fVECTORS">MULTI_WEIGHT_L3R0_VECTORS</a></td><td>&nbsp;</td><td valign="top"><a href="#Hadron-multiplets">5.12.1.3 Hadron multiplets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-M_005fBIND_005f0">M_BIND_0</a></td><td>&nbsp;</td><td valign="top"><a href="#Hadron-constituents">5.12.1.2 Hadron constituents</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-M_005fBIND_005f1">M_BIND_1</a></td><td>&nbsp;</td><td valign="top"><a href="#Hadron-constituents">5.12.1.2 Hadron constituents</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-M_005fBOTTOM">M_BOTTOM</a></td><td>&nbsp;</td><td valign="top"><a href="#Hadron-constituents">5.12.1.2 Hadron constituents</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-M_005fCHARM">M_CHARM</a></td><td>&nbsp;</td><td valign="top"><a href="#Hadron-constituents">5.12.1.2 Hadron constituents</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-M_005fDIQUARK_005fOFFSET">M_DIQUARK_OFFSET</a></td><td>&nbsp;</td><td valign="top"><a href="#Hadron-constituents">5.12.1.2 Hadron constituents</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-M_005fSTRANGE">M_STRANGE</a></td><td>&nbsp;</td><td valign="top"><a href="#Hadron-constituents">5.12.1.2 Hadron constituents</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-M_005fUP_005fDOWN">M_UP_DOWN</a></td><td>&nbsp;</td><td valign="top"><a href="#Hadron-constituents">5.12.1.2 Hadron constituents</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Index-1_cp_letter-N">N</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-NUMBER_005fOF_005fPOINTS">NUMBER_OF_POINTS</a></td><td>&nbsp;</td><td valign="top"><a href="#Matrix-Element-values-through-C_002b_002b-interface">9.12.2 Computing matrix elements for idividual phase space points using the C++ Interface</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-NUM_005fACCURACY">NUM_ACCURACY</a></td><td>&nbsp;</td><td valign="top"><a href="#NUM_005fACCURACY">5.1.14 NUM_ACCURACY</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Index-1_cp_letter-O">O</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-ORDER_005fALPHAS">ORDER_ALPHAS</a></td><td>&nbsp;</td><td valign="top"><a href="#SM">5.4.1.1 Standard Model</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-OUTPUT">OUTPUT</a></td><td>&nbsp;</td><td valign="top"><a href="#OUTPUT">5.1.5 OUTPUT</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-OUTPUT_005fPRECISION">OUTPUT_PRECISION</a></td><td>&nbsp;</td><td valign="top"><a href="#Event-output-formats">5.1.17 Event output formats</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-OVERWEIGHT_005fTHRESHOLD">OVERWEIGHT_THRESHOLD</a></td><td>&nbsp;</td><td valign="top"><a href="#EVENT_005fGENERATION_005fMODE">5.5.3 EVENT_GENERATION_MODE</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Index-1_cp_letter-P">P</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-PARJ">PARJ</a></td><td>&nbsp;</td><td valign="top"><a href="#Fragmentation-models">5.12.1.1 Fragmentation models</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-PARP">PARP</a></td><td>&nbsp;</td><td valign="top"><a href="#Fragmentation-models">5.12.1.1 Fragmentation models</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-PARTICLE_005fCONTAINER">PARTICLE_CONTAINER</a></td><td>&nbsp;</td><td valign="top"><a href="#Particle-containers">5.6.1.2 Particle containers</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-PARU">PARU</a></td><td>&nbsp;</td><td valign="top"><a href="#Fragmentation-models">5.12.1.1 Fragmentation models</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-PATH">PATH</a></td><td>&nbsp;</td><td valign="top"><a href="#Input-structure">4 Input structure</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-PDF_005fLIBRARY">PDF_LIBRARY</a></td><td>&nbsp;</td><td valign="top"><a href="#ISR-Parameters">5.3 ISR parameters</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-PDF_005fLIBRARY_005f1">PDF_LIBRARY_1</a></td><td>&nbsp;</td><td valign="top"><a href="#ISR-Parameters">5.3 ISR parameters</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-PDF_005fLIBRARY_005f2">PDF_LIBRARY_2</a></td><td>&nbsp;</td><td valign="top"><a href="#ISR-Parameters">5.3 ISR parameters</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-PDF_005fSET">PDF_SET</a></td><td>&nbsp;</td><td valign="top"><a href="#ISR-Parameters">5.3 ISR parameters</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-PDF_005fSET_005f1">PDF_SET_1</a></td><td>&nbsp;</td><td valign="top"><a href="#ISR-Parameters">5.3 ISR parameters</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-PDF_005fSET_005f2">PDF_SET_2</a></td><td>&nbsp;</td><td valign="top"><a href="#ISR-Parameters">5.3 ISR parameters</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-PDF_005fSET_005fVERSION">PDF_SET_VERSION</a></td><td>&nbsp;</td><td valign="top"><a href="#ISR-Parameters">5.3 ISR parameters</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-PROFILE_005fFUNCTION">PROFILE_FUNCTION</a></td><td>&nbsp;</td><td valign="top"><a href="#PROFILE_005fFUNCTION">5.11.4 PROFILE_FUNCTION</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-PROFILE_005fPARAMETERS">PROFILE_PARAMETERS</a></td><td>&nbsp;</td><td valign="top"><a href="#PROFILE_005fPARAMETERS">5.11.5 PROFILE_PARAMETERS</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-PSI_005fITMAX">PSI_ITMAX</a></td><td>&nbsp;</td><td valign="top"><a href="#PSI_005fITMAX">5.8.7 PSI_ITMAX</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-PSI_005fITMAX_005fBY_005fNODE">PSI_ITMAX_BY_NODE</a></td><td>&nbsp;</td><td valign="top"><a href="#PSI_005fITMAX_005fBY_005fNODE">5.8.9 PSI_ITMAX_BY_NODE</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-PSI_005fITMIN">PSI_ITMIN</a></td><td>&nbsp;</td><td valign="top"><a href="#PSI_005fITMIN">5.8.6 PSI_ITMIN</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-PSI_005fITMIN_005fBY_005fNODE">PSI_ITMIN_BY_NODE</a></td><td>&nbsp;</td><td valign="top"><a href="#PSI_005fITMIN_005fBY_005fNODE">5.8.8 PSI_ITMIN_BY_NODE</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-PSI_005fNMAX">PSI_NMAX</a></td><td>&nbsp;</td><td valign="top"><a href="#PSI_005fNMAX">5.8.5 PSI_NMAX</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-PT_005e2_005f0">PT^2_0</a></td><td>&nbsp;</td><td valign="top"><a href="#Cluster-decays-_002d-kinematics">5.12.1.6 Cluster decays - kinematics</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-PT_005fMAX">PT_MAX</a></td><td>&nbsp;</td><td valign="top"><a href="#Cluster-decays-_002d-kinematics">5.12.1.6 Cluster decays - kinematics</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-P_005fLASER_005f">P_LASER_</a></td><td>&nbsp;</td><td valign="top"><a href="#Laser-Backscattering">5.2.1.1 Laser Backscattering</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-P_005fLASER_005f-1">P_LASER_</a></td><td>&nbsp;</td><td valign="top"><a href="#Laser-Backscattering">5.2.1.1 Laser Backscattering</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-P_005f_007bQQ_005f1_007d_002fP_005f_007bQQ_005f0_007d">P_{QQ_1}/P_{QQ_0}</a></td><td>&nbsp;</td><td valign="top"><a href="#Cluster-transition-to-hadrons-_002d-flavour-part">5.12.1.4 Cluster transition to hadrons - flavour part</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-P_005f_007bQS_007d_002fP_005f_007bQQ_007d">P_{QS}/P_{QQ}</a></td><td>&nbsp;</td><td valign="top"><a href="#Cluster-transition-to-hadrons-_002d-flavour-part">5.12.1.4 Cluster transition to hadrons - flavour part</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-P_005f_007bSS_007d_002fP_005f_007bQQ_007d">P_{SS}/P_{QQ}</a></td><td>&nbsp;</td><td valign="top"><a href="#Cluster-transition-to-hadrons-_002d-flavour-part">5.12.1.4 Cluster transition to hadrons - flavour part</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Index-1_cp_letter-Q">Q</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Q_005f0_005e2">Q_0^2</a></td><td>&nbsp;</td><td valign="top"><a href="#Parameters-for-event-generation">5.14.2.4 Parameters for event generation</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Q_005fas_005e2">Q_as^2</a></td><td>&nbsp;</td><td valign="top"><a href="#Cluster-decays-_002d-kinematics">5.12.1.6 Cluster decays - kinematics</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Q_005fas_005e2-1">Q_as^2</a></td><td>&nbsp;</td><td valign="top"><a href="#Parameters-for-event-generation">5.14.2.4 Parameters for event generation</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Q_005fRC_005e2">Q_RC^2</a></td><td>&nbsp;</td><td valign="top"><a href="#Parameters-for-event-generation">5.14.2.4 Parameters for event generation</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Index-1_cp_letter-R">R</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-RANDOM_005fSEED">RANDOM_SEED</a></td><td>&nbsp;</td><td valign="top"><a href="#RANDOM_005fSEED">5.1.7 RANDOM_SEED</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ReconnProb">ReconnProb</a></td><td>&nbsp;</td><td valign="top"><a href="#Parameters-for-event-generation">5.14.2.4 Parameters for event generation</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-REFERENCE_005fSCALE">REFERENCE_SCALE</a></td><td>&nbsp;</td><td valign="top"><a href="#REFERENCE_005fSCALE">5.11.6 REFERENCE_SCALE</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-RESCALE_005fEXPONENT">RESCALE_EXPONENT</a></td><td>&nbsp;</td><td valign="top"><a href="#RESCALE_005fEXPONENT">5.11.7 RESCALE_EXPONENT</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-RescProb">RescProb</a></td><td>&nbsp;</td><td valign="top"><a href="#Parameters-for-event-generation">5.14.2.4 Parameters for event generation</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-RescProb1">RescProb1</a></td><td>&nbsp;</td><td valign="top"><a href="#Parameters-for-event-generation">5.14.2.4 Parameters for event generation</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Resc_005fKTMin">Resc_KTMin</a></td><td>&nbsp;</td><td valign="top"><a href="#Parameters-for-event-generation">5.14.2.4 Parameters for event generation</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-RESOLVE_005fDECAYS">RESOLVE_DECAYS</a></td><td>&nbsp;</td><td valign="top"><a href="#RESOLVE_005fDECAYS">5.9.9 RESOLVE_DECAYS</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-RESULT_005fDIRECTORY">RESULT_DIRECTORY</a></td><td>&nbsp;</td><td valign="top"><a href="#RESULT_005fDIRECTORY">5.5.2 RESULT_DIRECTORY</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-RHO">RHO</a></td><td>&nbsp;</td><td valign="top"><a href="#SM">5.4.1.1 Standard Model</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-RLIMIT_005fAS">RLIMIT_AS</a></td><td>&nbsp;</td><td valign="top"><a href="#RLIMIT_005fAS">5.1.12 RLIMIT_AS</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-RLIMIT_005fBY_005fCPU">RLIMIT_BY_CPU</a></td><td>&nbsp;</td><td valign="top"><a href="#RLIMIT_005fAS">5.1.12 RLIMIT_AS</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Root">Root</a></td><td>&nbsp;</td><td valign="top"><a href="#Event-output-formats">5.1.17 Event output formats</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-RUNDATA">RUNDATA</a></td><td>&nbsp;</td><td valign="top"><a href="#Input-structure">4 Input structure</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Index-1_cp_letter-S">S</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-SCALES">SCALES</a></td><td>&nbsp;</td><td valign="top"><a href="#SCALES">5.5.4 SCALES</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-SCALE_005fMIN">SCALE_MIN</a></td><td>&nbsp;</td><td valign="top"><a href="#SCALE_005fMIN">5.11.3 SCALE_MIN</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-SHERPA_005fCPP_005fPATH">SHERPA_CPP_PATH</a></td><td>&nbsp;</td><td valign="top"><a href="#SHERPA_005fCPP_005fPATH">5.1.15 SHERPA_CPP_PATH</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-SHERPA_005fLDADD">SHERPA_LDADD</a></td><td>&nbsp;</td><td valign="top"><a href="#Customization">8 Customization</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-SHERPA_005fLIB_005fPATH">SHERPA_LIB_PATH</a></td><td>&nbsp;</td><td valign="top"><a href="#SHERPA_005fLIB_005fPATH">5.1.16 SHERPA_LIB_PATH</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-SHERPA_005fVERSION">SHERPA_VERSION</a></td><td>&nbsp;</td><td valign="top"><a href="#SHERPA_005fVERSION">5.1.3 SHERPA_VERSION</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Shower_005fMin_005fKT2">Shower_Min_KT2</a></td><td>&nbsp;</td><td valign="top"><a href="#Parameters-for-event-generation">5.14.2.4 Parameters for event generation</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-SHOW_005fPDF_005fSETS">SHOW_PDF_SETS</a></td><td>&nbsp;</td><td valign="top"><a href="#ISR-Parameters">5.3 ISR parameters</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-SHOW_005fVARIABLE_005fSYNTAX">SHOW_VARIABLE_SYNTAX</a></td><td>&nbsp;</td><td valign="top"><a href="#Universal-selector">5.7.5 Universal selector</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Shrimps_005fMode">Shrimps_Mode</a></td><td>&nbsp;</td><td valign="top"><a href="#Shrimps-Mode">5.14.2.2 Shrimps Mode</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-SIGMA_005fND_005fFACTOR">SIGMA_ND_FACTOR</a></td><td>&nbsp;</td><td valign="top"><a href="#SIGMA_005fND_005fFACTOR">5.11.9 SIGMA_ND_FACTOR</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-SIN2THETAW">SIN2THETAW</a></td><td>&nbsp;</td><td valign="top"><a href="#SM">5.4.1.1 Standard Model</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-SINGLET_005fSUPPRESSION">SINGLET_SUPPRESSION</a></td><td>&nbsp;</td><td valign="top"><a href="#Hadron-multiplets">5.12.1.3 Hadron multiplets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-SOFT_005fCOLLISIONS">SOFT_COLLISIONS</a></td><td>&nbsp;</td><td valign="top"><a href="#Generating-minimum-bias-events">5.14.2.1 Generating minimum bias events</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-SOFT_005fMASS_005fSMEARING">SOFT_MASS_SMEARING</a></td><td>&nbsp;</td><td valign="top"><a href="#Hadron-decays">5.12.2 Hadron decays</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-SOFT_005fSPIN_005fCORRELATIONS">SOFT_SPIN_CORRELATIONS</a></td><td>&nbsp;</td><td valign="top"><a href="#Further-remarks">5.12.2.5 Further remarks</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-SPECTRUM_005fFILE_005f1">SPECTRUM_FILE_1</a></td><td>&nbsp;</td><td valign="top"><a href="#Beam-Spectra">5.2.1 Beam Spectra</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-SPECTRUM_005fFILE_005f2">SPECTRUM_FILE_2</a></td><td>&nbsp;</td><td valign="top"><a href="#Beam-Spectra">5.2.1 Beam Spectra</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-STABLE_005b_003cid_003e_005d">STABLE[&lt;id&gt;]</a></td><td>&nbsp;</td><td valign="top"><a href="#SM">5.4.1.1 Standard Model</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-STABLE_005b_003cid_003e_005d-1">STABLE[&lt;id&gt;]</a></td><td>&nbsp;</td><td valign="top"><a href="#Hard-decays">5.9 Hard decays</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-STABLE_005b_003cid_003e_005d-2">STABLE[&lt;id&gt;]</a></td><td>&nbsp;</td><td valign="top"><a href="#Hadron-decays">5.12.2 Hadron decays</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-STORE_005fDECAY_005fRESULTS">STORE_DECAY_RESULTS</a></td><td>&nbsp;</td><td valign="top"><a href="#STORE_005fDECAY_005fRESULTS">5.9.4 STORE_DECAY_RESULTS</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-STRANGE_005fFRACTION">STRANGE_FRACTION</a></td><td>&nbsp;</td><td valign="top"><a href="#Cluster-transition-to-hadrons-_002d-flavour-part">5.12.1.4 Cluster transition to hadrons - flavour part</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Index-1_cp_letter-T">T</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-TIMEOUT">TIMEOUT</a></td><td>&nbsp;</td><td valign="top"><a href="#TIMEOUT">5.1.11 TIMEOUT</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-TRANSITION_005fOFFSET">TRANSITION_OFFSET</a></td><td>&nbsp;</td><td valign="top"><a href="#Cluster-transition-to-hadrons-_002d-flavour-part">5.12.1.4 Cluster transition to hadrons - flavour part</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-TUNE">TUNE</a></td><td>&nbsp;</td><td valign="top"><a href="#TUNE">5.1.4 TUNE</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-TURNOFF">TURNOFF</a></td><td>&nbsp;</td><td valign="top"><a href="#TURNOFF">5.11.2 TURNOFF</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-TURNOFF_005fEXPONENT">TURNOFF_EXPONENT</a></td><td>&nbsp;</td><td valign="top"><a href="#TURNOFF_005fEXPONENT">5.11.8 TURNOFF_EXPONENT</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Index-1_cp_letter-U">U</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-UFO_005fPARAM_005fCARD">UFO_PARAM_CARD</a></td><td>&nbsp;</td><td valign="top"><a href="#UFO-Model-Interface">5.4.2 UFO Model Interface</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-USE_005fPDF_005fALPHAS">USE_PDF_ALPHAS</a></td><td>&nbsp;</td><td valign="top"><a href="#SM">5.4.1.1 Standard Model</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-USR_005fWGT_005fMODE">USR_WGT_MODE</a></td><td>&nbsp;</td><td valign="top"><a href="#A-posteriori-scale-and-PDF-variations-using-the-ROOT-NTuple-Output">7.2 A posteriori scale and PDF variations using the ROOT NTuple Output</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Index-1_cp_letter-V">V</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-VEGAS">VEGAS</a></td><td>&nbsp;</td><td valign="top"><a href="#VEGAS">5.8.3 VEGAS</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-VEV">VEV</a></td><td>&nbsp;</td><td valign="top"><a href="#SM">5.4.1.1 Standard Model</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Index-1_cp_letter-W">W</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-WIDTH_005b_003cid_003e_005d">WIDTH[&lt;id&gt;]</a></td><td>&nbsp;</td><td valign="top"><a href="#SM">5.4.1.1 Standard Model</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-WIDTH_005b_003cid_003e_005d-1">WIDTH[&lt;id&gt;]</a></td><td>&nbsp;</td><td valign="top"><a href="#HDH_005fSET_005fWIDTHS">5.9.6 HDH_SET_WIDTHS</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-WIDTH_005b_003cid_003e_005d-2">WIDTH[&lt;id&gt;]</a></td><td>&nbsp;</td><td valign="top"><a href="#Hadron-decays">5.12.2 Hadron decays</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-WIDTH_005fSCHEME">WIDTH_SCHEME</a></td><td>&nbsp;</td><td valign="top"><a href="#SM">5.4.1.1 Standard Model</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Index-1_cp_letter-X">X</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-xi">xi</a></td><td>&nbsp;</td><td valign="top"><a href="#Parameters-of-the-eikonals">5.14.2.3 Parameters of the eikonals</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Index-1_cp_letter-Y">Y</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-YFS_005fIR_005fCUTOFF">YFS_IR_CUTOFF</a></td><td>&nbsp;</td><td valign="top"><a href="#YFS_005fIR_005fCUTOFF">5.13.1.3 YFS_IR_CUTOFF</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-YFS_005fMODE">YFS_MODE</a></td><td>&nbsp;</td><td valign="top"><a href="#YFS_005fMODE">5.13.1.1 YFS_MODE</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-YFS_005fUSE_005fME">YFS_USE_ME</a></td><td>&nbsp;</td><td valign="top"><a href="#YFS_005fUSE_005fME">5.13.1.2 YFS_USE_ME</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-YUKAWA_005b_003cid_003e_005d">YUKAWA[&lt;id&gt;]</a></td><td>&nbsp;</td><td valign="top"><a href="#SM">5.4.1.1 Standard Model</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-YUKAWA_005fMASSES">YUKAWA_MASSES</a></td><td>&nbsp;</td><td valign="top"><a href="#YUKAWA_005fMASSES">5.5.8 YUKAWA_MASSES</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
</table>
<table><tr><th valign="top">Jump to: &nbsp; </th><td><a class="summary-letter" href="#Index-1_cp_symbol-1"><b>1</b></a>
 &nbsp; 
<br>
<a class="summary-letter" href="#Index-1_cp_letter-A"><b>A</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-1_cp_letter-B"><b>B</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-1_cp_letter-C"><b>C</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-1_cp_letter-D"><b>D</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-1_cp_letter-E"><b>E</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-1_cp_letter-F"><b>F</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-1_cp_letter-H"><b>H</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-1_cp_letter-I"><b>I</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-1_cp_letter-K"><b>K</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-1_cp_letter-L"><b>L</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-1_cp_letter-M"><b>M</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-1_cp_letter-N"><b>N</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-1_cp_letter-O"><b>O</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-1_cp_letter-P"><b>P</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-1_cp_letter-Q"><b>Q</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-1_cp_letter-R"><b>R</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-1_cp_letter-S"><b>S</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-1_cp_letter-T"><b>T</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-1_cp_letter-U"><b>U</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-1_cp_letter-V"><b>V</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-1_cp_letter-W"><b>W</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-1_cp_letter-X"><b>X</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-1_cp_letter-Y"><b>Y</b></a>
 &nbsp; 
</td></tr></table>

<hr size="6">
<a name="SEC_Contents"></a>
<h1>Table of Contents</h1>

<div class="contents">

<ul class="no-bullet">
  <li><a name="toc-Introduction-1" href="#Introduction">1 Introduction</a>
  <ul class="no-bullet">
    <li><a name="toc-Introduction-to-Sherpa-1" href="#Introduction-to-Sherpa">1.1 Introduction to Sherpa</a></li>
    <li><a name="toc-Basic-structure-1" href="#Basic-structure">1.2 Basic structure</a></li>
  </ul></li>
  <li><a name="toc-Getting-started-1" href="#Getting-started">2 Getting started</a>
  <ul class="no-bullet">
    <li><a name="toc-Installation-1" href="#Installation">2.1 Installation</a></li>
    <li><a name="toc-Running-Sherpa-1" href="#Running-Sherpa">2.2 Running Sherpa</a>
    <ul class="no-bullet">
      <li><a name="toc-Process-selection-and-initialization-1" href="#Process-selection-and-initialization-1">2.2.1 Process selection and initialization</a></li>
      <li><a name="toc-The-example-set_002dup_003a-Z_002bJets-at-the-LHC" href="#The-example-set_002dup_003a-Z_002bJets-at-the-LHC">2.2.2 The example set-up: Z+Jets at the LHC</a></li>
      <li><a name="toc-Parton_002dlevel-event-generation-with-Sherpa-1" href="#Parton_002dlevel-event-generation-with-Sherpa-1">2.2.3 Parton-level event generation with Sherpa</a></li>
      <li><a name="toc-Multijet-merged-event-generation-with-Sherpa-1" href="#Multijet-merged-event-generation-with-Sherpa-1">2.2.4 Multijet merged event generation with Sherpa</a></li>
      <li><a name="toc-Running-Sherpa-with-AMEGIC_002b_002b-1" href="#Running-Sherpa-with-AMEGIC_002b_002b-1">2.2.5 Running Sherpa with AMEGIC++</a></li>
    </ul></li>
    <li><a name="toc-Cross-section-determination-1" href="#Cross-section-determination">2.3 Cross section determination</a>
    <ul class="no-bullet">
      <li><a name="toc-Differential-cross-sections-from-single-events" href="#Differential-cross-sections-from-single-events">2.3.1 Differential cross sections from single events</a></li>
    </ul>
</li>
  </ul></li>
  <li><a name="toc-Command-line-options" href="#Command-line">3 Command line options</a></li>
  <li><a name="toc-Input-structure-1" href="#Input-structure">4 Input structure</a>
  <ul class="no-bullet">
    <li><a name="toc-Interpreter-1" href="#Interpreter">4.1 Interpreter</a></li>
    <li><a name="toc-Tags-1" href="#Tags">4.2 Tags</a></li>
  </ul></li>
  <li><a name="toc-Parameters-1" href="#Parameters">5 Parameters</a>
  <ul class="no-bullet">
    <li><a name="toc-Run-parameters" href="#Run-Parameters">5.1 Run parameters</a>
    <ul class="no-bullet">
      <li><a name="toc-EVENTS-1" href="#EVENTS">5.1.1 EVENTS</a></li>
      <li><a name="toc-EVENT_005fTYPE-1" href="#EVENT_005fTYPE">5.1.2 EVENT_TYPE</a></li>
      <li><a name="toc-SHERPA_005fVERSION-1" href="#SHERPA_005fVERSION">5.1.3 SHERPA_VERSION</a></li>
      <li><a name="toc-TUNE-1" href="#TUNE">5.1.4 TUNE</a></li>
      <li><a name="toc-OUTPUT-1" href="#OUTPUT">5.1.5 OUTPUT</a></li>
      <li><a name="toc-LOG_005fFILE-1" href="#LOG_005fFILE">5.1.6 LOG_FILE</a></li>
      <li><a name="toc-RANDOM_005fSEED-1" href="#RANDOM_005fSEED">5.1.7 RANDOM_SEED</a></li>
      <li><a name="toc-EVENT_005fSEED_005fMODE-1" href="#EVENT_005fSEED_005fMODE">5.1.8 EVENT_SEED_MODE</a></li>
      <li><a name="toc-ANALYSIS-1" href="#ANALYSIS">5.1.9 ANALYSIS</a></li>
      <li><a name="toc-ANALYSIS_005fOUTPUT-1" href="#ANALYSIS_005fOUTPUT">5.1.10 ANALYSIS_OUTPUT</a></li>
      <li><a name="toc-TIMEOUT-1" href="#TIMEOUT">5.1.11 TIMEOUT</a></li>
      <li><a name="toc-RLIMIT_005fAS-1" href="#RLIMIT_005fAS">5.1.12 RLIMIT_AS</a></li>
      <li><a name="toc-BATCH_005fMODE-1" href="#BATCH_005fMODE">5.1.13 BATCH_MODE</a></li>
      <li><a name="toc-NUM_005fACCURACY-1" href="#NUM_005fACCURACY">5.1.14 NUM_ACCURACY</a></li>
      <li><a name="toc-SHERPA_005fCPP_005fPATH-1" href="#SHERPA_005fCPP_005fPATH">5.1.15 SHERPA_CPP_PATH</a></li>
      <li><a name="toc-SHERPA_005fLIB_005fPATH-1" href="#SHERPA_005fLIB_005fPATH">5.1.16 SHERPA_LIB_PATH</a></li>
      <li><a name="toc-Event-output-formats-1" href="#Event-output-formats">5.1.17 Event output formats</a></li>
      <li><a name="toc-Scale-and-PDF-variations-1" href="#Scale-and-PDF-variations">5.1.18 Scale and PDF variations</a></li>
      <li><a name="toc-MPI-parallelization-1" href="#MPI-parallelization">5.1.19 MPI parallelization</a></li>
    </ul></li>
    <li><a name="toc-Beam-parameters" href="#Beam-Parameters">5.2 Beam parameters</a>
    <ul class="no-bullet">
      <li><a name="toc-Beam-Spectra-1" href="#Beam-Spectra">5.2.1 Beam Spectra</a>
      <ul class="no-bullet">
        <li><a name="toc-Laser-Backscattering" href="#Laser-Backscattering">5.2.1.1 Laser Backscattering</a></li>
        <li><a name="toc-Simple-Compton" href="#Simple-Compton">5.2.1.2 Simple Compton</a></li>
        <li><a name="toc-EPA" href="#EPA">5.2.1.3 EPA</a></li>
      </ul></li>
      <li><a name="toc-Intrinsic-Transverse-Momentum-1" href="#Intrinsic-Transverse-Momentum">5.2.2 Intrinsic Transverse Momentum</a></li>
    </ul></li>
    <li><a name="toc-ISR-parameters" href="#ISR-Parameters">5.3 ISR parameters</a></li>
    <li><a name="toc-Models-1" href="#Models">5.4 Models</a>
    <ul class="no-bullet">
      <li><a name="toc-Built_002din-Models-1" href="#Built_002din-Models">5.4.1 Built-in Models</a>
      <ul class="no-bullet">
        <li><a name="toc-Standard-Model" href="#SM">5.4.1.1 Standard Model</a></li>
        <li><a name="toc-Effective-Higgs-Couplings" href="#HEFT">5.4.1.2 Effective Higgs Couplings</a></li>
      </ul></li>
      <li><a name="toc-UFO-Model-Interface-1" href="#UFO-Model-Interface">5.4.2 UFO Model Interface</a></li>
    </ul></li>
    <li><a name="toc-Matrix-elements" href="#Matrix-Elements">5.5 Matrix elements</a>
    <ul class="no-bullet">
      <li><a name="toc-ME_005fSIGNAL_005fGENERATOR-1" href="#ME_005fSIGNAL_005fGENERATOR">5.5.1 ME_SIGNAL_GENERATOR</a></li>
      <li><a name="toc-RESULT_005fDIRECTORY-1" href="#RESULT_005fDIRECTORY">5.5.2 RESULT_DIRECTORY</a></li>
      <li><a name="toc-EVENT_005fGENERATION_005fMODE-1" href="#EVENT_005fGENERATION_005fMODE">5.5.3 EVENT_GENERATION_MODE</a></li>
      <li><a name="toc-SCALES-1" href="#SCALES">5.5.4 SCALES</a>
      <ul class="no-bullet">
        <li><a name="toc-Scale-setters-1" href="#Scale-setters">5.5.4.1 Scale setters</a></li>
        <li><a name="toc-Custom-scale-implementation-1" href="#Custom-scale-implementation">5.5.4.2 Custom scale implementation</a></li>
        <li><a name="toc-Predefined-scale-tags-1" href="#Predefined-scale-tags">5.5.4.3 Predefined scale tags</a></li>
        <li><a name="toc-Scale-schemes-for-NLO-calculations-1" href="#Scale-schemes-for-NLO-calculations">5.5.4.4 Scale schemes for NLO calculations</a></li>
        <li><a name="toc-Explicit-scale-variations-1" href="#Explicit-scale-variations">5.5.4.5 Explicit scale variations</a></li>
        <li><a name="toc-METS-scale-setting-with-multiparton-core-processes-1" href="#METS-scale-setting-with-multiparton-core-processes">5.5.4.6 METS scale setting with multiparton core processes</a></li>
      </ul></li>
      <li><a name="toc-COUPLING_005fSCHEME-1" href="#COUPLING_005fSCHEME">5.5.5 COUPLING_SCHEME</a></li>
      <li><a name="toc-COUPLINGS-1" href="#COUPLINGS">5.5.6 COUPLINGS</a></li>
      <li><a name="toc-KFACTOR-1" href="#KFACTOR">5.5.7 KFACTOR</a></li>
      <li><a name="toc-YUKAWA_005fMASSES-1" href="#YUKAWA_005fMASSES">5.5.8 YUKAWA_MASSES</a></li>
      <li><a name="toc-Dipole-subtraction-1" href="#Dipole-subtraction">5.5.9 Dipole subtraction</a></li>
    </ul></li>
    <li><a name="toc-Processes-1" href="#Processes">5.6 Processes</a>
    <ul class="no-bullet">
      <li><a name="toc-Process-1" href="#Process">5.6.1 Process</a>
      <ul class="no-bullet">
        <li><a name="toc-PDG-codes-1" href="#PDG-codes">5.6.1.1 PDG codes</a></li>
        <li><a name="toc-Particle-containers-1" href="#Particle-containers">5.6.1.2 Particle containers</a></li>
        <li><a name="toc-Parentheses-1" href="#Parentheses">5.6.1.3 Parentheses</a></li>
        <li><a name="toc-Curly-brackets-1" href="#Curly-brackets">5.6.1.4 Curly brackets</a></li>
      </ul></li>
      <li><a name="toc-Decay-1" href="#Decay">5.6.2 Decay</a></li>
      <li><a name="toc-DecayOS-1" href="#DecayOS">5.6.3 DecayOS</a></li>
      <li><a name="toc-No_005fDecay-1" href="#No_005fDecay">5.6.4 No_Decay</a></li>
      <li><a name="toc-Scales-1" href="#Scales">5.6.5 Scales</a></li>
      <li><a name="toc-Couplings-1" href="#Couplings">5.6.6 Couplings</a></li>
      <li><a name="toc-CKKW-1" href="#CKKW">5.6.7 CKKW</a></li>
      <li><a name="toc-Selector_005fFile-1" href="#Selector_005fFile">5.6.8 Selector_File</a></li>
      <li><a name="toc-Order-1" href="#Order">5.6.9 Order</a></li>
      <li><a name="toc-Max_005fOrder-1" href="#Max_005fOrder">5.6.10 Max_Order</a></li>
      <li><a name="toc-Min_005fOrder-1" href="#Min_005fOrder">5.6.11 Min_Order</a></li>
      <li><a name="toc-Min_005fN_005fQuarks-1" href="#Min_005fN_005fQuarks">5.6.12 Min_N_Quarks</a></li>
      <li><a name="toc-Max_005fN_005fQuarks-1" href="#Max_005fN_005fQuarks">5.6.13 Max_N_Quarks</a></li>
      <li><a name="toc-Min_005fN_005fTChannels-1" href="#Min_005fN_005fTChannels">5.6.14 Min_N_TChannels</a></li>
      <li><a name="toc-Max_005fN_005fTChannels-1" href="#Max_005fN_005fTChannels">5.6.15 Max_N_TChannels</a></li>
      <li><a name="toc-Print_005fGraphs-1" href="#Print_005fGraphs">5.6.16 Print_Graphs</a></li>
      <li><a name="toc-Name_005fSuffix-1" href="#Name_005fSuffix">5.6.17 Name_Suffix</a></li>
      <li><a name="toc-Integration_005fError-1" href="#Integration_005fError">5.6.18 Integration_Error</a></li>
      <li><a name="toc-Max_005fEpsilon-1" href="#Max_005fEpsilon">5.6.19 Max_Epsilon</a></li>
      <li><a name="toc-Enhance_005fFactor-1" href="#Enhance_005fFactor">5.6.20 Enhance_Factor</a></li>
      <li><a name="toc-RS_005fEnhance_005fFactor-1" href="#RS_005fEnhance_005fFactor">5.6.21 RS_Enhance_Factor</a></li>
      <li><a name="toc-Enhance_005fFunction-1" href="#Enhance_005fFunction">5.6.22 Enhance_Function</a></li>
      <li><a name="toc-Enhance_005fObservable-1" href="#Enhance_005fObservable">5.6.23 Enhance_Observable</a></li>
      <li><a name="toc-NLO_005fQCD_005fMode-1" href="#NLO_005fQCD_005fMode">5.6.24 NLO_QCD_Mode</a></li>
      <li><a name="toc-NLO_005fQCD_005fPart-1" href="#NLO_005fQCD_005fPart">5.6.25 NLO_QCD_Part</a></li>
      <li><a name="toc-NLO_005fEW_005fMode-1" href="#NLO_005fEW_005fMode">5.6.26 NLO_EW_Mode</a></li>
      <li><a name="toc-NLO_005fEW_005fPart-1" href="#NLO_005fEW_005fPart">5.6.27 NLO_EW_Part</a></li>
      <li><a name="toc-Subdivide_005fVirtual-1" href="#Subdivide_005fVirtual">5.6.28 Subdivide_Virtual</a></li>
      <li><a name="toc-ME_005fGenerator-1" href="#ME_005fGenerator">5.6.29 ME_Generator</a></li>
      <li><a name="toc-RS_005fME_005fGenerator-1" href="#RS_005fME_005fGenerator">5.6.30 RS_ME_Generator</a></li>
      <li><a name="toc-Loop_005fGenerator-1" href="#Loop_005fGenerator">5.6.31 Loop_Generator</a>
      <ul class="no-bullet">
        <li><a name="toc-BlackHat-Interface" href="#BlackHat-Interface">5.6.31.1 BlackHat Interface</a></li>
      </ul></li>
      <li><a name="toc-Integrator-1" href="#Integrator">5.6.32 Integrator</a></li>
      <li><a name="toc-PSI_005fItMin-1" href="#PSI_005fItMin">5.6.33 PSI_ItMin</a></li>
      <li><a name="toc-RS_005fPSI_005fItMin-1" href="#RS_005fPSI_005fItMin">5.6.34 RS_PSI_ItMin</a></li>
      <li><a name="toc-End-process-1" href="#End-process">5.6.35 End process</a></li>
    </ul></li>
    <li><a name="toc-Selectors-1" href="#Selectors">5.7 Selectors</a>
    <ul class="no-bullet">
      <li><a name="toc-One-particle-selectors-1" href="#One-particle-selectors">5.7.1 One particle selectors</a></li>
      <li><a name="toc-Two-particle-selectors-1" href="#Two-particle-selectors">5.7.2 Two particle selectors</a></li>
      <li><a name="toc-Decay-selectors-1" href="#Decay-selectors">5.7.3 Decay selectors</a></li>
      <li><a name="toc-Jet-finders-1" href="#Jet-finders">5.7.4 Jet finders</a></li>
      <li><a name="toc-Universal-selector-1" href="#Universal-selector">5.7.5 Universal selector</a></li>
      <li><a name="toc-Minimum-selector-1" href="#Minimum-selector">5.7.6 Minimum selector</a></li>
      <li><a name="toc-NLO-selectors-1" href="#NLO-selectors">5.7.7 NLO selectors</a></li>
      <li><a name="toc-Fastjet-selector-1" href="#Fastjet-selector">5.7.8 Fastjet selector</a></li>
    </ul></li>
    <li><a name="toc-Integration-1" href="#Integration">5.8 Integration</a>
    <ul class="no-bullet">
      <li><a name="toc-INTEGRATION_005fERROR-1" href="#INTEGRATION_005fERROR">5.8.1 INTEGRATION_ERROR</a></li>
      <li><a name="toc-INTEGRATOR-1" href="#INTEGRATOR">5.8.2 INTEGRATOR</a></li>
      <li><a name="toc-VEGAS-1" href="#VEGAS">5.8.3 VEGAS</a></li>
      <li><a name="toc-FINISH_005fOPTIMIZATION-1" href="#FINISH_005fOPTIMIZATION">5.8.4 FINISH_OPTIMIZATION</a></li>
      <li><a name="toc-PSI_005fNMAX-1" href="#PSI_005fNMAX">5.8.5 PSI_NMAX</a></li>
      <li><a name="toc-PSI_005fITMIN-1" href="#PSI_005fITMIN">5.8.6 PSI_ITMIN</a></li>
      <li><a name="toc-PSI_005fITMAX-1" href="#PSI_005fITMAX">5.8.7 PSI_ITMAX</a></li>
      <li><a name="toc-PSI_005fITMIN_005fBY_005fNODE-1" href="#PSI_005fITMIN_005fBY_005fNODE">5.8.8 PSI_ITMIN_BY_NODE</a></li>
      <li><a name="toc-PSI_005fITMAX_005fBY_005fNODE-1" href="#PSI_005fITMAX_005fBY_005fNODE">5.8.9 PSI_ITMAX_BY_NODE</a></li>
    </ul></li>
    <li><a name="toc-Hard-decays-1" href="#Hard-decays">5.9 Hard decays</a>
    <ul class="no-bullet">
      <li><a name="toc-HDH_005fSTATUS-1" href="#HDH_005fSTATUS">5.9.1 HDH_STATUS</a></li>
      <li><a name="toc-HDH_005fWIDTH-1" href="#HDH_005fWIDTH">5.9.2 HDH_WIDTH</a></li>
      <li><a name="toc-HARD_005fSPIN_005fCORRELATIONS-1" href="#HARD_005fSPIN_005fCORRELATIONS">5.9.3 HARD_SPIN_CORRELATIONS</a></li>
      <li><a name="toc-STORE_005fDECAY_005fRESULTS-1" href="#STORE_005fDECAY_005fRESULTS">5.9.4 STORE_DECAY_RESULTS</a></li>
      <li><a name="toc-DECAY_005fRESULT_005fDIRECTORY-1" href="#DECAY_005fRESULT_005fDIRECTORY">5.9.5 DECAY_RESULT_DIRECTORY</a></li>
      <li><a name="toc-HDH_005fSET_005fWIDTHS-1" href="#HDH_005fSET_005fWIDTHS">5.9.6 HDH_SET_WIDTHS</a></li>
      <li><a name="toc-HDH_005fBR_005fWEIGHTS-1" href="#HDH_005fBR_005fWEIGHTS">5.9.7 HDH_BR_WEIGHTS</a></li>
      <li><a name="toc-HARD_005fMASS_005fSMEARING-1" href="#HARD_005fMASS_005fSMEARING">5.9.8 HARD_MASS_SMEARING</a></li>
      <li><a name="toc-RESOLVE_005fDECAYS-1" href="#RESOLVE_005fDECAYS">5.9.9 RESOLVE_DECAYS</a></li>
      <li><a name="toc-DECAY_005fTAU_005fHARD-1" href="#DECAY_005fTAU_005fHARD">5.9.10 DECAY_TAU_HARD</a></li>
      <li><a name="toc-Decay-table-integration-settings-1" href="#Decay-table-integration-settings">5.9.11 Decay table integration settings</a></li>
    </ul></li>
    <li><a name="toc-Parton-showers" href="#Shower-Parameters">5.10 Parton showers</a>
    <ul class="no-bullet">
      <li><a name="toc-SHOWER_005fGENERATOR-1" href="#SHOWER_005fGENERATOR">5.10.1 SHOWER_GENERATOR</a></li>
      <li><a name="toc-JET_005fCRITERION-1" href="#JET_005fCRITERION">5.10.2 JET_CRITERION</a></li>
      <li><a name="toc-MASSIVE_005fPS-1" href="#MASSIVE_005fPS">5.10.3 MASSIVE_PS</a></li>
      <li><a name="toc-MASSLESS_005fPS-1" href="#MASSLESS_005fPS">5.10.4 MASSLESS_PS</a></li>
      <li><a name="toc-CS-Shower-options-1" href="#CS-Shower-options">5.10.5 CS Shower options</a></li>
    </ul></li>
    <li><a name="toc-Multiple-interactions" href="#MPI-Parameters">5.11 Multiple interactions</a>
    <ul class="no-bullet">
      <li><a name="toc-MI_005fHANDLER-1" href="#MI_005fHANDLER">5.11.1 MI_HANDLER</a></li>
      <li><a name="toc-TURNOFF-1" href="#TURNOFF">5.11.2 TURNOFF</a></li>
      <li><a name="toc-SCALE_005fMIN-1" href="#SCALE_005fMIN">5.11.3 SCALE_MIN</a></li>
      <li><a name="toc-PROFILE_005fFUNCTION-1" href="#PROFILE_005fFUNCTION">5.11.4 PROFILE_FUNCTION</a></li>
      <li><a name="toc-PROFILE_005fPARAMETERS-1" href="#PROFILE_005fPARAMETERS">5.11.5 PROFILE_PARAMETERS</a></li>
      <li><a name="toc-REFERENCE_005fSCALE-1" href="#REFERENCE_005fSCALE">5.11.6 REFERENCE_SCALE</a></li>
      <li><a name="toc-RESCALE_005fEXPONENT-1" href="#RESCALE_005fEXPONENT">5.11.7 RESCALE_EXPONENT</a></li>
      <li><a name="toc-TURNOFF_005fEXPONENT-1" href="#TURNOFF_005fEXPONENT">5.11.8 TURNOFF_EXPONENT</a></li>
      <li><a name="toc-SIGMA_005fND_005fFACTOR-1" href="#SIGMA_005fND_005fFACTOR">5.11.9 SIGMA_ND_FACTOR</a></li>
      <li><a name="toc-MI_005fRESULT_005fDIRECTORY-1" href="#MI_005fRESULT_005fDIRECTORY">5.11.10 MI_RESULT_DIRECTORY</a></li>
      <li><a name="toc-MI_005fRESULT_005fDIRECTORY_005fSUFFIX-1" href="#MI_005fRESULT_005fDIRECTORY_005fSUFFIX">5.11.11 MI_RESULT_DIRECTORY_SUFFIX</a></li>
    </ul></li>
    <li><a name="toc-Hadronization-1" href="#Hadronization">5.12 Hadronization</a>
    <ul class="no-bullet">
      <li><a name="toc-Fragmentation-1" href="#Fragmentation">5.12.1 Fragmentation</a>
      <ul class="no-bullet">
        <li><a name="toc-Fragmentation-models" href="#Fragmentation-models">5.12.1.1 Fragmentation models</a></li>
        <li><a name="toc-Hadron-constituents" href="#Hadron-constituents">5.12.1.2 Hadron constituents</a></li>
        <li><a name="toc-Hadron-multiplets" href="#Hadron-multiplets">5.12.1.3 Hadron multiplets</a></li>
        <li><a name="toc-Cluster-transition-to-hadrons-_002d-flavour-part" href="#Cluster-transition-to-hadrons-_002d-flavour-part">5.12.1.4 Cluster transition to hadrons - flavour part</a></li>
        <li><a name="toc-Cluster-transition-and-decay-weights" href="#Cluster-transition-and-decay-weights">5.12.1.5 Cluster transition and decay weights</a></li>
        <li><a name="toc-Cluster-decays-_002d-kinematics" href="#Cluster-decays-_002d-kinematics">5.12.1.6 Cluster decays - kinematics</a></li>
        <li><a name="toc-Splitting-kinematics" href="#Splitting-kinematics">5.12.1.7 Splitting kinematics</a></li>
      </ul></li>
      <li><a name="toc-Hadron-decays-1" href="#Hadron-decays">5.12.2 Hadron decays</a>
      <ul class="no-bullet">
        <li><a name="toc-HadronDecays_002edat" href="#HadronDecays_002edat">5.12.2.1 HadronDecays.dat</a></li>
        <li><a name="toc-Decay-table-files" href="#Decay-table-files">5.12.2.2 Decay table files</a></li>
        <li><a name="toc-Decay-channel-files-1" href="#Decay-channel-files-1">5.12.2.3 Decay channel files</a></li>
        <li><a name="toc-HadronConstants_002edat" href="#HadronConstants_002edat">5.12.2.4 HadronConstants.dat</a></li>
        <li><a name="toc-Further-remarks" href="#Further-remarks">5.12.2.5 Further remarks</a></li>
      </ul>
</li>
    </ul></li>
    <li><a name="toc-QED-corrections" href="#QED-Corrections">5.13 QED corrections</a>
    <ul class="no-bullet">
      <li><a name="toc-General-Switches-1" href="#General-Switches">5.13.1 General Switches</a>
      <ul class="no-bullet">
        <li><a name="toc-YFS_005fMODE-1" href="#YFS_005fMODE">5.13.1.1 YFS_MODE</a></li>
        <li><a name="toc-YFS_005fUSE_005fME-1" href="#YFS_005fUSE_005fME">5.13.1.2 YFS_USE_ME</a></li>
        <li><a name="toc-YFS_005fIR_005fCUTOFF-1" href="#YFS_005fIR_005fCUTOFF">5.13.1.3 YFS_IR_CUTOFF</a></li>
      </ul></li>
      <li><a name="toc-QED-Corrections-to-the-Hard-Interaction-1" href="#QED-Corrections-to-the-Hard-Interaction">5.13.2 QED Corrections to the Hard Interaction</a>
      <ul class="no-bullet">
        <li><a name="toc-ME_005fQED-1" href="#ME_005fQED">5.13.2.1 ME_QED</a></li>
        <li><a name="toc-ME_005fQED_005fCLUSTERING-1" href="#ME_005fQED_005fCLUSTERING">5.13.2.2 ME_QED_CLUSTERING</a></li>
        <li><a name="toc-ME_005fQED_005fCLUSTERING_005fTHRESHOLD-1" href="#ME_005fQED_005fCLUSTERING_005fTHRESHOLD">5.13.2.3 ME_QED_CLUSTERING_THRESHOLD</a></li>
      </ul></li>
      <li><a name="toc-QED-Corrections-to-Hadron-Decays-1" href="#QED-Corrections-to-Hadron-Decays">5.13.3 QED Corrections to Hadron Decays</a></li>
    </ul></li>
    <li><a name="toc-Minimum-bias-events" href="#Minimum-Bias">5.14 Minimum bias events</a>
    <ul class="no-bullet">
      <li><a name="toc-Physics-of-Shrimps" href="#Physics-of-Shrimps">5.14.1 Physics of Shrimps</a>
      <ul class="no-bullet">
        <li><a name="toc-Inclusive-part-of-the-model" href="#Inclusive-part-of-the-model">5.14.1.1 Inclusive part of the model</a></li>
        <li><a name="toc-Exclusive-part-of-the-model" href="#Exclusive-part-of-the-model">5.14.1.2 Exclusive part of the model</a></li>
      </ul></li>
      <li><a name="toc-Parameters-and-settings" href="#Parameters-and-settings">5.14.2 Parameters and settings</a>
      <ul class="no-bullet">
        <li><a name="toc-Generating-minimum-bias-events" href="#Generating-minimum-bias-events">5.14.2.1 Generating minimum bias events</a></li>
        <li><a name="toc-Shrimps-Mode" href="#Shrimps-Mode">5.14.2.2 Shrimps Mode</a></li>
        <li><a name="toc-Parameters-of-the-eikonals" href="#Parameters-of-the-eikonals">5.14.2.3 Parameters of the eikonals</a></li>
        <li><a name="toc-Parameters-for-event-generation" href="#Parameters-for-event-generation">5.14.2.4 Parameters for event generation</a></li>
      </ul>
</li>
    </ul>
</li>
  </ul></li>
  <li><a name="toc-Tips-and-tricks" href="#Tips-and-Tricks">6 Tips and tricks</a>
  <ul class="no-bullet">
    <li><a name="toc-Bash-completion-1" href="#Bash-completion">6.1 Bash completion</a></li>
    <li><a name="toc-Rivet-analyses-1" href="#Rivet-analyses">6.2 Rivet analyses</a></li>
    <li><a name="toc-HZTool-analyses-1" href="#HZTool-analyses">6.3 HZTool analyses</a></li>
    <li><a name="toc-MCFM-interface-1" href="#MCFM-interface">6.4 MCFM interface</a></li>
    <li><a name="toc-Debugging-a-crashing_002fstalled-event-1" href="#Debugging-a-crashing_002fstalled-event">6.5 Debugging a crashing/stalled event</a>
    <ul class="no-bullet">
      <li><a name="toc-Crashing-events" href="#Crashing-events">6.5.1 Crashing events</a></li>
      <li><a name="toc-Stalled-events" href="#Stalled-events">6.5.2 Stalled events</a></li>
    </ul></li>
    <li><a name="toc-Versioned-installation-1" href="#Versioned-installation">6.6 Versioned installation</a></li>
    <li><a name="toc-NLO-calculations-1" href="#NLO-calculations">6.7 NLO calculations</a>
    <ul class="no-bullet">
      <li><a name="toc-Choosing-DIPOLE_005fALPHA-1" href="#Choosing-DIPOLE_005fALPHA">6.7.1 Choosing DIPOLE_ALPHA</a></li>
      <li><a name="toc-Integrating-complicated-Loop_002dME-1" href="#Integrating-complicated-Loop_002dME">6.7.2 Integrating complicated Loop-ME</a></li>
      <li><a name="toc-Avoiding-misbinning-effects-1" href="#Avoiding-misbinning-effects">6.7.3 Avoiding misbinning effects</a></li>
      <li><a name="toc-Enforcing-the-renormalization-scheme-1" href="#Enforcing-the-renormalization-scheme">6.7.4 Enforcing the renormalization scheme</a></li>
      <li><a name="toc-Checking-the-pole-cancellation-1" href="#Checking-the-pole-cancellation">6.7.5 Checking the pole cancellation</a></li>
    </ul>
</li>
  </ul></li>
  <li><a name="toc-A-posteriori-scale-variations" href="#Scale-variations">7 A posteriori scale variations</a>
  <ul class="no-bullet">
    <li><a name="toc-A-posteriori-scale-and-PDF-variations-using-the-HepMC-GenEvent-Output-1" href="#A-posteriori-scale-and-PDF-variations-using-the-HepMC-GenEvent-Output">7.1 A posteriori scale and PDF variations using the HepMC GenEvent Output</a></li>
    <li><a name="toc-A-posteriori-scale-and-PDF-variations-using-the-ROOT-NTuple-Output-1" href="#A-posteriori-scale-and-PDF-variations-using-the-ROOT-NTuple-Output">7.2 A posteriori scale and PDF variations using the ROOT NTuple Output</a>
    <ul class="no-bullet">
      <li><a name="toc-Computing-_0028differential_0029-cross-sections-of-real-correction-events-with-statistical-errors" href="#Computing-_0028differential_0029-cross-sections-of-real-correction-events-with-statistical-errors">7.2.1 Computing (differential) cross sections of real correction events with statistical errors</a></li>
      <li><a name="toc-Computation-of-cross-sections-with-new-PDF_0027s" href="#Computation-of-cross-sections-with-new-PDF_0027s">7.2.2 Computation of cross sections with new PDF&rsquo;s</a></li>
    </ul>
</li>
  </ul></li>
  <li><a name="toc-Customization-1" href="#Customization">8 Customization</a>
  <ul class="no-bullet">
    <li><a name="toc-Exotic-physics-1" href="#Exotic-physics">8.1 Exotic physics</a></li>
    <li><a name="toc-Custom-scale-setter-1" href="#Custom-scale-setter">8.2 Custom scale setter</a></li>
    <li><a name="toc-External-one_002dloop-ME-1" href="#External-one_002dloop-ME">8.3 External one-loop ME</a></li>
    <li><a name="toc-External-RNG-1" href="#External-RNG">8.4 External RNG</a></li>
    <li><a name="toc-External-PDF-1" href="#External-PDF">8.5 External PDF</a></li>
    <li><a name="toc-Python-Interface-1" href="#Python-Interface">8.6 Python Interface</a></li>
  </ul></li>
  <li><a name="toc-Examples-1" href="#Examples">9 Examples</a>
  <ul class="no-bullet">
    <li><a name="toc-Vector-boson-_002b-jets-production" href="#VJets">9.1 Vector boson + jets production</a>
    <ul class="no-bullet">
      <li><a name="toc-W_002bjets-production" href="#LHC_005fWJets">9.1.1 W+jets production</a></li>
      <li><a name="toc-Z_002bjets-production" href="#LHC_005fZJets">9.1.2 Z+jets production</a></li>
      <li><a name="toc-W_002bbb-production" href="#LHC_005fWbb">9.1.3 W+bb production</a></li>
      <li><a name="toc-Zbb-production" href="#LHC_005fZbb">9.1.4 Zbb production</a></li>
    </ul></li>
    <li><a name="toc-Jet-production-1" href="#Jets">9.2 Jet production</a>
    <ul class="no-bullet">
      <li><a name="toc-Jet-production" href="#LHC_005fJets">9.2.1 Jet production</a>
      <ul class="no-bullet">
        <li><a name="toc-MC_0040NLO-setup-for-dijet-and-inclusive-jet-production" href="#LHC_005fJets_005fMCatNLO">9.2.1.1 MC@NLO setup for dijet and inclusive jet production</a></li>
        <li><a name="toc-MEPS-setup-for-jet-production" href="#LHC_005fJets_005fMEPS">9.2.1.2 MEPS setup for jet production</a></li>
      </ul></li>
      <li><a name="toc-Jets-at-lepton-colliders" href="#LEP_005fJets">9.2.2 Jets at lepton colliders</a>
      <ul class="no-bullet">
        <li><a name="toc-MEPS-setup-for-ee_002d_003ejets" href="#LEP_005fJets_005fLOmerging">9.2.2.1 MEPS setup for ee-&gt;jets</a></li>
        <li><a name="toc-MEPS_0040NLO-setup-for-ee_002d_003ejets" href="#LEP_005fJets_005fNLOmerging">9.2.2.2 MEPS@NLO setup for ee-&gt;jets</a></li>
      </ul>
</li>
    </ul></li>
    <li><a name="toc-Higgs-boson-_002b-jets-production" href="#HJets">9.3 Higgs boson + jets production</a>
    <ul class="no-bullet">
      <li><a name="toc-H-production-in-gluon-fusion-with-interference-effects" href="#LHC_005fHInt">9.3.1 H production in gluon fusion with interference effects</a></li>
      <li><a name="toc-H_002bjets-production-in-gluon-fusion" href="#LHC_005fHJets">9.3.2 H+jets production in gluon fusion</a></li>
      <li><a name="toc-H_002bjets-production-in-gluon-fusion-with-finite-top-mass-effects" href="#LHC_005fHJets_005fFiniteMt">9.3.3 H+jets production in gluon fusion with finite top mass effects</a></li>
      <li><a name="toc-H_002bjets-production-in-associated-production" href="#LHC_005fVHJets">9.3.4 H+jets production in associated production</a>
      <ul class="no-bullet">
        <li><a name="toc-Higgs-production-in-association-with-W-bosons-and-jets" href="#LHC_005fWHJets">9.3.4.1 Higgs production in association with W bosons and jets</a></li>
        <li><a name="toc-Higgs-production-in-association-with-Z-bosons-and-jets" href="#LHC_005fZHJets">9.3.4.2 Higgs production in association with Z bosons and jets</a></li>
        <li><a name="toc-Higgs-production-in-association-with-lepton-pairs" href="#LHC_005fHll_005fMC_0040NLO">9.3.4.3 Higgs production in association with lepton pairs</a></li>
      </ul></li>
      <li><a name="toc-Associated-t-anti_002dt-H-production-at-the-LHC" href="#LHC_005fHTTBar">9.3.5 Associated t anti-t H production at the LHC</a></li>
    </ul></li>
    <li><a name="toc-Top-quark-_0028pair_0029-_002b-jets-production" href="#TopsJets">9.4 Top quark (pair) + jets production</a>
    <ul class="no-bullet">
      <li><a name="toc-Top-quark-pair-production-1" href="#Top-quark-pair-production">9.4.1 Top quark pair production</a></li>
      <li><a name="toc-Top-quark-pair-production-including-approximate-EW-corrections-1" href="#Top-quark-pair-production-including-approximate-EW-corrections">9.4.2 Top quark pair production including approximate EW corrections</a></li>
      <li><a name="toc-Production-of-a-top-quark-pair-in-association-with-a-W_002dboson" href="#Tops-plus-W-in-MC_0040NLO">9.4.3 Production of a top quark pair in association with a W-boson</a></li>
    </ul></li>
    <li><a name="toc-Single_002dtop-production-in-the-s_002c-t-and-tW-channel" href="#SingleTopChannels">9.5 Single-top production in the s, t and tW channel</a>
    <ul class="no-bullet">
      <li><a name="toc-t_002dchannel-single_002dtop-production-1" href="#t_002dchannel-single_002dtop-production">9.5.1 t-channel single-top production</a></li>
      <li><a name="toc-t_002dchannel-single_002dtop-production-with-N_005ff_003d4-1" href="#t_002dchannel-single_002dtop-production-with-N_005ff_003d4">9.5.2 t-channel single-top production with N_f=4</a></li>
      <li><a name="toc-s_002dchannel-single_002dtop-production-1" href="#s_002dchannel-single_002dtop-production">9.5.3 s-channel single-top production</a></li>
      <li><a name="toc-tW_002dchannel-single_002dtop-production-1" href="#tW_002dchannel-single_002dtop-production">9.5.4 tW-channel single-top production</a></li>
    </ul></li>
    <li><a name="toc-Vector-boson-pairs-_002b-jets-production" href="#VVJets">9.6 Vector boson pairs + jets production</a>
    <ul class="no-bullet">
      <li><a name="toc-Dilepton_002c-missing-energy-and-jets-production" href="#Dilepton-missing-energy-and-jets-production">9.6.1 Dilepton, missing energy and jets production</a></li>
      <li><a name="toc-Dilepton_002c-missing-energy-and-jets-production-_0028gluon-initiated_0029" href="#Dilepton-missing-energy-and-jets-production-_0028gluon-initiated_0029">9.6.2 Dilepton, missing energy and jets production (gluon initiated)</a></li>
      <li><a name="toc-Four-lepton-and-jets-production-1" href="#Four-lepton-and-jets-production">9.6.3 Four lepton and jets production</a></li>
      <li><a name="toc-Four-lepton-and-jets-production-_0028gluon-initiated_0029-1" href="#Four-lepton-and-jets-production-_0028gluon-initiated_0029">9.6.4 Four lepton and jets production (gluon initiated)</a></li>
      <li><a name="toc-WZ-production-with-jets-production-1" href="#WZ-production-with-jets-production">9.6.5 WZ production with jets production</a></li>
      <li><a name="toc-Same-sign-dilepton_002c-missing-energy-and-jets-production" href="#Same-sign-dilepton-missing-energy-and-jets-production">9.6.6 Same sign dilepton, missing energy and jets production</a></li>
    </ul></li>
    <li><a name="toc-Event-generation-in-the-MSSM-using-UFO" href="#MSSM_002fUFO">9.7 Event generation in the MSSM using UFO</a></li>
    <li><a name="toc-Deep_002dinelastic-scattering" href="#DIS">9.8 Deep-inelastic scattering</a>
    <ul class="no-bullet">
      <li><a name="toc-DIS-at-HERA" href="#HERA">9.8.1 DIS at HERA</a></li>
    </ul></li>
    <li><a name="toc-Fixed_002dorder-next_002dto_002dleading-order-calculations" href="#FONLO">9.9 Fixed-order next-to-leading order calculations</a>
    <ul class="no-bullet">
      <li><a name="toc-Production-of-NTuples" href="#NTuple-production">9.9.1 Production of NTuples</a>
      <ul class="no-bullet">
        <li><a name="toc-NTuple-production-1" href="#NTuple-production-1">9.9.1.1 NTuple production</a></li>
        <li><a name="toc-Usage-of-NTuples-in-Sherpa" href="#Usage-of-NTuples-in-Sherpa">9.9.1.2 Usage of NTuples in Sherpa</a></li>
      </ul>
</li>
    </ul></li>
    <li><a name="toc-Soft-QCD_003a-Minimum-Bias-and-Cross-Sections" href="#SoftQCD">9.10 Soft QCD: Minimum Bias and Cross Sections</a>
    <ul class="no-bullet">
      <li><a name="toc-Calculation-of-inclusive-cross-sections-1" href="#Calculation-of-inclusive-cross-sections">9.10.1 Calculation of inclusive cross sections</a></li>
      <li><a name="toc-Simulation-of-Minimum-Bias-events-1" href="#Simulation-of-Minimum-Bias-events">9.10.2 Simulation of Minimum Bias events</a></li>
    </ul></li>
    <li><a name="toc-Setups-for-event-production-at-B_002dfactories" href="#BFactories">9.11 Setups for event production at B-factories</a>
    <ul class="no-bullet">
      <li><a name="toc-QCD-continuum-1" href="#QCD-continuum">9.11.1 QCD continuum</a></li>
      <li><a name="toc-Signal-process-1" href="#Signal-process">9.11.2 Signal process</a></li>
      <li><a name="toc-Single-hadron-decay-chains-1" href="#Single-hadron-decay-chains">9.11.3 Single hadron decay chains</a></li>
    </ul></li>
    <li><a name="toc-Calculating-matrix-element-values-for-externally-given-configurations" href="#MEvalues">9.12 Calculating matrix element values for externally given configurations</a>
    <ul class="no-bullet">
      <li><a name="toc-Computing-matrix-elements-for-idividual-phase-space-points-using-the-Python-Interface" href="#Matrix-Element-values-through-Python-interface">9.12.1 Computing matrix elements for idividual phase space points using the Python Interface</a></li>
      <li><a name="toc-Computing-matrix-elements-for-idividual-phase-space-points-using-the-C_002b_002b-Interface" href="#Matrix-Element-values-through-C_002b_002b-interface">9.12.2 Computing matrix elements for idividual phase space points using the C++ Interface</a></li>
    </ul></li>
    <li><a name="toc-Using-the-Python-interface" href="#APIexamples">9.13 Using the Python interface</a>
    <ul class="no-bullet">
      <li><a name="toc-Generate-events-using-scripts" href="#Events">9.13.1 Generate events using scripts</a></li>
      <li><a name="toc-Generate-events-with-MPI-using-scripts" href="#MPIEvents">9.13.2 Generate events with MPI using scripts</a></li>
    </ul>
</li>
  </ul></li>
  <li><a name="toc-Getting-help-1" href="#Getting-help">10 Getting help</a></li>
  <li><a name="toc-Authors-1" href="#Authors">11 Authors</a></li>
  <li><a name="toc-Copying-1" href="#Copying">12 Copying</a></li>
  <li><a name="toc-References-1" href="#References">Appendix A References</a></li>
  <li><a name="toc-Index-1" href="#Index">Appendix B Index</a></li>
</ul>
</div>
<hr>
<p>
 <font size="-1">
  This document was generated on <i>August 29, 2019</i> using <a href="http://www.nongnu.org/texi2html/"><i>texi2html 5.0</i></a>.
 </font>
 <br>

</p>
</body>
</html>
